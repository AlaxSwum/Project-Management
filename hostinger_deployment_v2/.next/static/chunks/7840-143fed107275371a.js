"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7840],{7840:function(n,e,t){t.d(e,{Z:function(){return _}});var a=t(7437),i=t(2265),s=t(4887),r=t(9186),o=t(3298),l=t(887),d=t(2125),c=t(7227),m=t(6689),p=t(1809),g=t(1253),h=t(2929),x=t(2469),f=t(3549),u=t(3152),b=t(1550),v=t(5946),k=t(1205),y=t(5856),j=t(7514);function w(n){var e;let{task:t}=n,{user:s}=(0,f.useAuth)(),[r,l]=(0,i.useState)([]),[d,c]=(0,i.useState)(""),[m,p]=(0,i.useState)(!1),[g,h]=(0,i.useState)(!1),[x,w]=(0,i.useState)(!1),[N,F]=(0,i.useState)([]),[_,z]=(0,i.useState)([]),[C,S]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(null==t?void 0:t.id)&&D()},[null==t?void 0:t.id]);let D=async()=>{if(null==t?void 0:t.id){p(!0);try{let[n,e]=await Promise.all([u.OV.getTaskComments(t.id),u.OV.getTaskAttachments(t.id)]);l(n||[])}catch(n){console.error("Failed to fetch task comments/attachments:",n),l([])}finally{p(!1)}}},T=async()=>{if((d.trim()||0!==N.length||0!==_.length)&&(null==t?void 0:t.id)){S(!0);try{let e=await u.OV.createTaskComment(t.id,{comment:d.trim()||"Shared files"}),a=[];for(let e of N)try{let i=await u.OV.uploadTaskAttachment(t.id,e);if(i){var n;let e={...i,source:"upload",name:i.filename,size:i.file_size,url:i.file,uploaded_by:(null===(n=i.user)||void 0===n?void 0:n.name)||"Unknown",uploaded_at:i.created_at};a.push(e)}}catch(n){console.error("Failed to upload file:",e.name,n)}for(let n of _)try{let e={id:Date.now()+Math.random(),file:n.webViewLink||n.webContentLink||"",filename:n.name,user:{id:(null==s?void 0:s.id)||0,name:(null==s?void 0:s.name)||"Unknown",email:(null==s?void 0:s.email)||"Unknown",role:(null==s?void 0:s.role)||"user"},created_at:new Date().toISOString(),file_size:n.size||0,name:n.name,size:n.size||0,type:n.mimeType||"application/octet-stream",uploaded_by:(null==s?void 0:s.name)||(null==s?void 0:s.email)||"Unknown",uploaded_at:new Date().toISOString(),task_id:t.id,url:n.webViewLink||n.webContentLink,source:"drive",drive_file_id:n.id};a.push(e)}catch(e){console.error("Failed to attach Drive file:",n.name,e)}if(e){let n={...e,attachments:a};l([...r,n]),c(""),F([]),z([]),h(!1),w(!1)}}catch(n){console.error("Failed to add comment:",n)}finally{S(!1)}}},A=n=>{F(N.filter((e,t)=>t!==n))},B=n=>{z(_.filter((e,t)=>t!==n))},U=n=>{if(0===n)return"0 Bytes";let e=Math.floor(Math.log(n)/Math.log(1024));return parseFloat((n/Math.pow(1024,e)).toFixed(2))+" "+["Bytes","KB","MB","GB"][e]};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n          .task-interaction-section {\n            flex: 1;\n            display: flex;\n            flex-direction: column;\n            height: 100%;\n            background: #fafafa;\n            width: 100%;\n            max-width: 100%;\n            box-sizing: border-box;\n            overflow: hidden;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n          }\n\n          .comments-section {\n            flex: 1;\n            display: flex;\n            flex-direction: column;\n            height: 100%;\n            width: 100%;\n            max-width: 100%;\n            box-sizing: border-box;\n            overflow: hidden;\n            gap: 0;\n          }\n          \n          .comments-list {\n            flex: 1;\n            padding: 1rem;\n            overflow-y: auto;\n            min-height: 200px;\n            max-height: calc(100% - 200px);\n            scrollbar-width: thin;\n            scrollbar-color: rgba(55, 65, 81, 0.3) transparent;\n          }\n          \n          .comments-list::-webkit-scrollbar {\n            width: 6px;\n          }\n          \n          .comments-list::-webkit-scrollbar-track {\n            background: rgba(55, 65, 81, 0.1);\n            border-radius: 3px;\n          }\n          \n          .comments-list::-webkit-scrollbar-thumb {\n            background: rgba(55, 65, 81, 0.3);\n            border-radius: 3px;\n          }\n          \n          .comments-list::-webkit-scrollbar-thumb:hover {\n            background: rgba(55, 65, 81, 0.5);\n          }\n          \n          .empty-comments {\n            text-align: center;\n            padding: 2rem 1rem;\n            color: #6b7280;\n            background: #ffffff;\n            border-radius: 8px;\n            border: 1px solid #e5e7eb;\n            margin: 1rem;\n            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n          }\n          \n          .empty-comments p {\n            margin: 0.5rem 0;\n            font-weight: 500;\n          }\n          \n          .empty-comments p:first-of-type {\n            font-weight: 600;\n            color: #374151;\n            font-size: 1rem;\n          }\n          \n          .comment-item {\n            margin-bottom: 1rem;\n            padding: 1rem;\n            background: #ffffff;\n            border-radius: 8px;\n            border: 1px solid #e5e7eb;\n            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n            transition: all 0.2s ease;\n          }\n          \n          .comment-item:hover {\n            border-color: #d1d5db;\n            transform: translateY(-1px);\n            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n          }\n          \n          .comment-item:last-child {\n            margin-bottom: 0;\n          }\n          \n          .comment-header {\n            display: flex;\n            align-items: center;\n            gap: 0.75rem;\n            margin-bottom: 0.75rem;\n          }\n          \n          .author-avatar, .current-user-avatar {\n            width: 36px;\n            height: 36px;\n            background: #111827;\n            border: 1px solid #e5e7eb;\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 0.875rem;\n            font-weight: 600;\n            color: #ffffff;\n            flex-shrink: 0;\n          }\n          \n          .comment-meta {\n            display: flex;\n            flex-direction: column;\n            gap: 0.125rem;\n          }\n          \n          .author-name {\n            font-weight: 600;\n            color: #374151;\n            font-size: 0.875rem;\n          }\n          \n          .comment-time {\n            font-size: 0.75rem;\n            color: #6b7280;\n            font-weight: 500;\n          }\n          \n          .comment-content {\n            margin-left: 0;\n            font-size: 0.875rem;\n            color: #374151;\n            line-height: 1.5;\n            font-weight: 500;\n            margin-bottom: 0.75rem;\n          }\n\n          .comment-attachments {\n            margin-top: 0.75rem;\n          }\n\n          .attachment-item {\n            display: flex;\n            align-items: center;\n            gap: 0.75rem;\n            padding: 0.75rem;\n            background: #f9fafb;\n            border: 1px solid #e5e7eb;\n            border-radius: 6px;\n            margin-bottom: 0.5rem;\n            transition: all 0.2s ease;\n          }\n\n          .attachment-item:hover {\n            background: #f3f4f6;\n            border-color: #d1d5db;\n          }\n\n          .attachment-icon {\n            width: 20px;\n            height: 20px;\n            color: #6b7280;\n            flex-shrink: 0;\n          }\n\n          .attachment-info {\n            flex: 1;\n          }\n\n          .attachment-name {\n            font-size: 0.875rem;\n            font-weight: 500;\n            color: #374151;\n            margin-bottom: 0.25rem;\n          }\n\n          .attachment-meta {\n            font-size: 0.75rem;\n            color: #6b7280;\n          }\n          \n          .add-comment {\n            border-top: 1px solid #e5e7eb;\n            padding: 1rem;\n            background: #ffffff;\n            width: 100%;\n            max-width: 100%;\n            box-sizing: border-box;\n            flex-shrink: 0;\n          }\n          \n          .comment-input-container {\n            display: flex;\n            flex-direction: column;\n            gap: 0.75rem;\n            width: 100%;\n            max-width: 100%;\n            box-sizing: border-box;\n          }\n\n          .comment-input-row {\n            display: flex;\n            align-items: flex-start;\n            gap: 0.75rem;\n            width: 100%;\n          }\n          \n          .comment-input {\n            flex: 1;\n            padding: 0.875rem 1rem;\n            border: 1px solid #d1d5db;\n            border-radius: 8px;\n            font-size: 0.875rem;\n            line-height: 1.5;\n            resize: vertical;\n            min-height: 80px;\n            max-width: 100%;\n            width: 100%;\n            box-sizing: border-box;\n            transition: all 0.2s ease;\n            background: #ffffff;\n            color: #374151;\n            font-weight: 500;\n            font-family: inherit;\n          }\n          \n          .comment-input:focus {\n            outline: none;\n            border-color: #374151;\n            box-shadow: 0 0 0 3px rgba(55, 65, 81, 0.1);\n          }\n          \n          .comment-input::placeholder {\n            color: #9ca3af;\n            font-weight: 500;\n          }\n\n          .comment-actions {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            gap: 0.75rem;\n          }\n\n          .file-actions {\n            display: flex;\n            gap: 0.5rem;\n          }\n\n          .file-action-btn {\n            padding: 0.5rem;\n            background: #ffffff;\n            border: 1px solid #d1d5db;\n            border-radius: 6px;\n            cursor: pointer;\n            transition: all 0.2s ease;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            color: #6b7280;\n          }\n\n          .file-action-btn:hover {\n            background: #f9fafb;\n            border-color: #9ca3af;\n            color: #374151;\n          }\n\n          .file-action-btn.active {\n            background: #f3f4f6;\n            border-color: #6b7280;\n            color: #374151;\n          }\n          \n          .send-comment-btn {\n            background: #111827;\n            color: #ffffff;\n            border: none;\n            padding: 0.875rem 1rem;\n            border-radius: 6px;\n            cursor: pointer;\n            display: flex;\n            align-items: center;\n            transition: all 0.2s ease;\n            font-weight: 500;\n            font-size: 0.875rem;\n          }\n          \n          .send-comment-btn:hover:not(:disabled) {\n            background: #1f2937;\n          }\n          \n          .send-comment-btn:disabled {\n            background: #9ca3af;\n            cursor: not-allowed;\n          }\n\n          .selected-files {\n            margin-top: 0.75rem;\n          }\n\n          .selected-files-title {\n            font-size: 0.875rem;\n            font-weight: 600;\n            color: #374151;\n            margin-bottom: 0.5rem;\n          }\n\n          .selected-file-item {\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            padding: 0.5rem;\n            background: #f9fafb;\n            border: 1px solid #e5e7eb;\n            border-radius: 6px;\n            margin-bottom: 0.5rem;\n          }\n\n          .file-info {\n            display: flex;\n            align-items: center;\n            gap: 0.5rem;\n            flex: 1;\n          }\n\n          .file-name {\n            font-size: 0.875rem;\n            font-weight: 500;\n            color: #374151;\n          }\n\n          .file-size {\n            font-size: 0.75rem;\n            color: #6b7280;\n          }\n\n          .remove-file-btn {\n            padding: 0.25rem;\n            background: none;\n            border: none;\n            cursor: pointer;\n            color: #ef4444;\n            border-radius: 4px;\n            transition: all 0.2s ease;\n          }\n\n          .remove-file-btn:hover {\n            background: #fee2e2;\n          }\n\n          .drive-explorer-modal {\n            position: fixed;\n            inset: 0;\n            background: rgba(0, 0, 0, 0.5);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            padding: 1rem;\n            z-index: 1000;\n          }\n\n          .drive-explorer-content {\n            background: #ffffff;\n            border-radius: 12px;\n            width: 100%;\n            max-width: 800px;\n            height: 600px;\n            display: flex;\n            flex-direction: column;\n            overflow: hidden;\n            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.25);\n          }\n\n          .drive-explorer-header {\n            padding: 1rem 1.5rem;\n            border-bottom: 1px solid #e5e7eb;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n          }\n\n          .drive-explorer-title {\n            font-size: 1.125rem;\n            font-weight: 600;\n            color: #374151;\n          }\n\n          .close-explorer-btn {\n            padding: 0.5rem;\n            background: none;\n            border: none;\n            cursor: pointer;\n            color: #6b7280;\n            border-radius: 6px;\n            transition: all 0.2s ease;\n          }\n\n          .close-explorer-btn:hover {\n            background: #f3f4f6;\n            color: #374151;\n          }\n\n          .drive-explorer-body {\n            flex: 1;\n            overflow: hidden;\n          }\n\n          .file-input-hidden {\n            display: none;\n          }\n\n          .loading-state {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            padding: 3rem;\n            color: #6b7280;\n            font-weight: 500;\n            background: #ffffff;\n            border-radius: 8px;\n            border: 1px solid #e5e7eb;\n            margin: 1rem;\n          }\n          \n          @media (max-width: 768px) {\n            .comments-list {\n              padding: 0.75rem;\n            }\n            \n            .comment-item {\n              padding: 0.75rem;\n            }\n            \n            .add-comment {\n              padding: 0.75rem;\n            }\n            \n            .comment-input {\n              min-height: 60px;\n              font-size: 0.875rem;\n            }\n            \n            .author-avatar, .current-user-avatar {\n              width: 32px;\n              height: 32px;\n              font-size: 0.75rem;\n            }\n\n            .comment-actions {\n              flex-direction: column;\n              align-items: stretch;\n              gap: 0.75rem;\n            }\n\n            .file-actions {\n              justify-content: center;\n            }\n\n            .drive-explorer-content {\n              max-width: 95vw;\n              height: 80vh;\n            }\n          }\n        "}}),(0,a.jsx)("div",{className:"task-interaction-section",children:(0,a.jsxs)("div",{className:"comments-section",children:[(0,a.jsx)("div",{className:"comments-list",children:m?(0,a.jsx)("div",{className:"loading-state",children:"Loading comments..."}):0===r.length?(0,a.jsxs)("div",{className:"empty-comments",children:[(0,a.jsx)(o.Z,{style:{width:"48px",height:"48px",margin:"0 auto 1rem",color:"#d1d5db"}}),(0,a.jsx)("p",{children:"No comments yet"}),(0,a.jsx)("p",{children:"Be the first to add a comment or share files!"})]}):r.map(n=>(0,a.jsxs)("div",{className:"comment-item",children:[(0,a.jsxs)("div",{className:"comment-header",children:[(0,a.jsx)("div",{className:"author-avatar",children:n.author.charAt(0).toUpperCase()}),(0,a.jsxs)("div",{className:"comment-meta",children:[(0,a.jsx)("div",{className:"author-name",children:n.author}),(0,a.jsx)("div",{className:"comment-time",children:new Date(n.created_at).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),(0,a.jsx)("div",{className:"comment-content",children:n.comment}),n.attachments&&n.attachments.length>0&&(0,a.jsx)("div",{className:"comment-attachments",children:n.attachments.map((n,e)=>(0,a.jsxs)("div",{className:"attachment-item",children:[(0,a.jsx)(b.Z,{className:"attachment-icon"}),(0,a.jsxs)("div",{className:"attachment-info",children:[(0,a.jsx)("div",{className:"attachment-name",children:n.name||n.filename}),(0,a.jsxs)("div",{className:"attachment-meta",children:[U(n.size||n.file_size)," • ","drive"===n.source?"Google Drive":"Uploaded"]})]}),(n.url||n.file)&&(0,a.jsx)("a",{href:n.url||n.file,target:"_blank",rel:"noopener noreferrer",style:{padding:"0.25rem 0.5rem",background:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"4px",color:"#374151",textDecoration:"none",fontSize:"0.75rem",fontWeight:"500"},children:"View"})]},e))})]},n.id))}),(0,a.jsxs)("div",{className:"add-comment",children:[(0,a.jsxs)("div",{className:"comment-input-container",children:[(0,a.jsxs)("div",{className:"comment-input-row",children:[(0,a.jsx)("div",{className:"current-user-avatar",children:(null==s?void 0:null===(e=s.name)||void 0===e?void 0:e.charAt(0).toUpperCase())||"U"}),(0,a.jsx)("textarea",{value:d,onChange:n=>c(n.target.value),placeholder:"Add a comment or share files...",className:"comment-input"})]}),(N.length>0||_.length>0)&&(0,a.jsxs)("div",{className:"selected-files",children:[(0,a.jsx)("div",{className:"selected-files-title",children:"Attached Files:"}),N.map((n,e)=>(0,a.jsxs)("div",{className:"selected-file-item",children:[(0,a.jsxs)("div",{className:"file-info",children:[(0,a.jsx)(b.Z,{style:{width:"16px",height:"16px",color:"#6b7280"}}),(0,a.jsx)("span",{className:"file-name",children:n.name}),(0,a.jsxs)("span",{className:"file-size",children:["(",U(n.size),")"]})]}),(0,a.jsx)("button",{onClick:()=>A(e),className:"remove-file-btn",type:"button",children:"✕"})]},"file-".concat(e))),_.map((n,e)=>(0,a.jsxs)("div",{className:"selected-file-item",children:[(0,a.jsxs)("div",{className:"file-info",children:[(0,a.jsx)(b.Z,{style:{width:"16px",height:"16px",color:"#6b7280"}}),(0,a.jsx)("span",{className:"file-name",children:n.name}),(0,a.jsx)("span",{className:"file-size",children:"(Google Drive)"})]}),(0,a.jsx)("button",{onClick:()=>B(e),className:"remove-file-btn",type:"button",children:"✕"})]},"drive-".concat(e)))]}),(0,a.jsxs)("div",{className:"comment-actions",children:[(0,a.jsxs)("div",{className:"file-actions",children:[(0,a.jsx)("button",{onClick:()=>{var n;return null===(n=document.getElementById("file-input"))||void 0===n?void 0:n.click()},className:"file-action-btn",type:"button",title:"Upload files",children:(0,a.jsx)(v.Z,{style:{width:"18px",height:"18px"}})}),(0,a.jsx)("button",{onClick:()=>w(!0),className:"file-action-btn",type:"button",title:"Choose from Google Drive",children:(0,a.jsx)(k.Z,{style:{width:"18px",height:"18px"}})})]}),(0,a.jsx)("button",{onClick:T,disabled:!d.trim()&&0===N.length&&0===_.length||C,className:"send-comment-btn",children:C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{style:{width:"16px",height:"16px",border:"2px solid transparent",borderTop:"2px solid #ffffff",borderRadius:"50%",animation:"spin 1s linear infinite",marginRight:"0.5rem"}}),"Uploading..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y.Z,{style:{width:"16px",height:"16px",marginRight:"0.5rem"}}),"Send"]})})]})]}),(0,a.jsx)("input",{id:"file-input",type:"file",multiple:!0,onChange:n=>{let e=Array.from(n.target.files||[]);F([...N,...e])},className:"file-input-hidden"})]})]})}),x&&(0,a.jsx)("div",{className:"drive-explorer-modal",onClick:()=>w(!1),children:(0,a.jsxs)("div",{className:"drive-explorer-content",onClick:n=>n.stopPropagation(),children:[(0,a.jsxs)("div",{className:"drive-explorer-header",children:[(0,a.jsx)("h3",{className:"drive-explorer-title",children:"Choose from Google Drive"}),(0,a.jsx)("button",{onClick:()=>w(!1),className:"close-explorer-btn",children:"✕"})]}),(0,a.jsx)("div",{className:"drive-explorer-body",children:(0,a.jsx)(j.default,{onFileSelect:n=>{z([..._,n])},onFolderSelect:()=>{},allowFileSelection:!0,allowFolderSelection:!1,showCreateFolder:!1,mode:"select"})})]})}),(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        "}})]})}let N=[{value:"low",label:"Low",icon:"",color:"#10b981"},{value:"medium",label:"Medium",icon:"",color:"#f59e0b"},{value:"high",label:"High",icon:"",color:"#ef4444"},{value:"urgent",label:"Urgent",icon:"",color:"#dc2626"}],F=[{value:"todo",label:"To Do",icon:"",color:"#e5e7eb"},{value:"in_progress",label:"In Progress",icon:"",color:"#dbeafe"},{value:"review",label:"Review",icon:"",color:"#fef3c7"},{value:"done",label:"Done",icon:"",color:"#d1fae5"}];function _(n){var e,t,f,u,b;let{task:v,users:k,onClose:y,onSave:j,onStatusChange:_,onDelete:z}=n,[C,S]=(0,i.useState)(!1),[D,T]=(0,i.useState)(!1),[A,B]=(0,i.useState)("task"),U=(0,i.useCallback)(n=>{if(!n)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(n))return n;if(n.includes("T"))return n.split("T")[0];let e=new Date(n);return isNaN(e.getTime())?"":e.toISOString().split("T")[0]},[]),[E,I]=(0,i.useState)({name:v.name,description:v.description,priority:v.priority,due_date:U(v.due_date),start_date:U(v.start_date),assignee_ids:v.assignees?v.assignees.map(n=>n.id):v.assignee?[v.assignee.id]:[],tags:v.tags_list.join(", ")});(0,i.useEffect)(()=>{I({name:v.name,description:v.description,priority:v.priority,due_date:U(v.due_date),start_date:U(v.start_date),assignee_ids:v.assignees?v.assignees.map(n=>n.id):v.assignee?[v.assignee.id]:[],tags:v.tags_list.join(", ")})},[v,U]);let Z=n=>n?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Not set",L=n=>new Date(n).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),M=async()=>{try{let n=n=>{if(!n)return null;if(/^\d{4}-\d{2}-\d{2}$/.test(n))return n;if(n.includes("T"))return n.split("T")[0];let e=new Date(n);return isNaN(e.getTime())?null:e.toISOString().split("T")[0]},e={...E,tags:E.tags,assignee_ids:E.assignee_ids&&E.assignee_ids.length>0?E.assignee_ids:[],due_date:n(E.due_date),start_date:n(E.start_date)};console.log("Saving task with assignee_ids:",e.assignee_ids),console.log("Saving task with formatted dates:",{due_date:e.due_date,start_date:e.start_date}),await j(e),S(!1)}catch(n){console.error("Failed to save task:",n)}},O=async n=>{_&&await _(v.id,n)},P=async()=>{if(z)try{await z(v.id),y()}catch(n){console.error("Failed to delete task:",n)}},R=(f=v.priority,N.find(n=>n.value===f)||N[1]),Y=(u=v.status,F.find(n=>n.value===u)||F[0]),H=!!(b=v.due_date)&&new Date(b)<new Date,V=[{id:"task",label:"Task",icon:(0,a.jsx)(r.Z,{style:{width:"16px",height:"16px"}})},{id:"comments",label:"Comments & Files",icon:(0,a.jsx)(o.Z,{style:{width:"16px",height:"16px"}})}],W=(0,a.jsxs)("div",{className:"task-modal-overlay",onClick:y,children:[(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n          @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');\n          \n          @keyframes fadeIn {\n            from { opacity: 0; }\n            to { opacity: 1; }\n          }\n          \n          @keyframes slideUp {\n            from { \n              opacity: 0;\n              transform: translateY(20px) scale(0.95);\n            }\n            to { \n              opacity: 1;\n              transform: translateY(0) scale(1);\n            }\n          }\n          \n          @keyframes shimmer {\n            0% { background-position: -200px 0; }\n            100% { background-position: calc(200px + 100%) 0; }\n          }\n          \n          .task-modal-overlay {\n            position: fixed;\n            inset: 0;\n            background: rgba(0, 0, 0, 0.85);\n            backdrop-filter: blur(12px);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            padding: 1rem;\n            z-index: 100000;\n            animation: fadeIn 0.4s cubic-bezier(0.23, 1, 0.32, 1);\n            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n          }\n          \n          .task-modal-content {\n            background: rgba(255, 255, 255, 0.98);\n            border: 2px solid #FFB333;\n            border-radius: 20px;\n            width: 100%;\n            max-width: min(1200px, calc(100vw - 2rem));\n            height: 85vh;\n            max-height: 85vh;\n            display: flex;\n            flex-direction: column;\n            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.4);\n            backdrop-filter: blur(20px);\n            animation: slideUp 0.5s cubic-bezier(0.23, 1, 0.32, 1);\n            position: relative;\n            overflow: hidden;\n            margin: 0 auto;\n            z-index: 100001;\n          }\n          \n          .task-modal-content::before {\n            content: '';\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            height: 4px;\n            background: linear-gradient(90deg, #FFB333, #F87239, #C483D9, #5884FD);\n            border-radius: 20px 20px 0 0;\n          }\n          \n          .task-modal-header {\n            padding: 2rem 2.5rem 1.5rem 2.5rem;\n            border-bottom: 2px solid rgba(255, 179, 51, 0.2);\n            display: flex;\n            justify-content: space-between;\n            align-items: flex-start;\n            gap: 1.5rem;\n            flex-shrink: 0;\n            background: linear-gradient(135deg, #F5F5ED 0%, #FAFAF2 100%);\n            position: relative;\n            z-index: 1;\n          }\n          \n          .task-modal-body {\n            flex: 1;\n            display: flex;\n            flex-direction: column;\n            min-height: 0;\n            background: #F5F5ED;\n          }\n          \n          .tab-navigation {\n            display: flex;\n            background: rgba(255, 255, 255, 0.9);\n            flex-shrink: 0;\n            border-bottom: 2px solid rgba(255, 179, 51, 0.1);\n            backdrop-filter: blur(10px);\n          }\n          \n          .tab-button {\n            flex: 1;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            gap: 0.75rem;\n            padding: 1.25rem 1.5rem;\n            background: transparent;\n            border: none;\n            cursor: pointer;\n            font-weight: 600;\n            color: #6B7280;\n            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);\n            border-right: 1px solid rgba(255, 179, 51, 0.2);\n            position: relative;\n            overflow: hidden;\n          }\n          \n          .tab-button:last-child {\n            border-right: none;\n          }\n          \n          .tab-button::before {\n            content: '';\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background: rgba(255, 179, 51, 0.05);\n            opacity: 0;\n            transition: opacity 0.3s ease;\n          }\n          \n          .tab-button:hover {\n            color: #FFB333;\n            transform: translateY(-2px);\n          }\n          \n          .tab-button:hover::before {\n            opacity: 1;\n          }\n          \n          .tab-button.active {\n            background: #FFB333;\n            color: #FFFFFF;\n            transform: translateY(-2px);\n            box-shadow: 0 8px 24px rgba(255, 179, 51, 0.3);\n          }\n          \n          .tab-button.active svg {\n            color: #FFFFFF;\n          }\n          \n          .tab-content {\n            flex: 1;\n            overflow-y: auto;\n            padding: 2rem 2.5rem;\n            background: linear-gradient(135deg, #F5F5ED 0%, #FAFAF2 100%);\n          }\n          \n          .task-title-section {\n            flex: 1;\n          }\n          \n          .task-title {\n            font-size: 1.875rem;\n            font-weight: 700;\n            color: #374151;\n            margin-bottom: 1rem;\n            line-height: 1.3;\n            letter-spacing: -0.025em;\n          }\n          \n          .task-meta-badges {\n            display: flex;\n            gap: 1rem;\n            flex-wrap: wrap;\n          }\n          \n          .task-badge {\n            display: flex;\n            align-items: center;\n            gap: 0.5rem;\n            padding: 0.5rem 1rem;\n            border-radius: 12px;\n            font-size: 0.875rem;\n            font-weight: 600;\n            backdrop-filter: blur(10px);\n            transition: all 0.3s ease;\n          }\n          \n          .task-badge.priority {\n            background: rgba(255, 179, 51, 0.15);\n            border: 2px solid #FFB333;\n            color: #F87239;\n          }\n          \n          .task-badge.status {\n            background: rgba(88, 132, 253, 0.15);\n            border: 2px solid #5884FD;\n            color: #5884FD;\n          }\n          \n          .task-badge.overdue {\n            background: rgba(239, 68, 68, 0.15);\n            border: 2px solid #EF4444;\n            color: #EF4444;\n            animation: pulse 2s infinite;\n          }\n          \n          .task-header-actions {\n            display: flex;\n            gap: 0.75rem;\n          }\n          \n          .task-action-btn {\n            padding: 0.75rem;\n            border: 2px solid transparent;\n            border-radius: 12px;\n            background: rgba(255, 255, 255, 0.9);\n            cursor: pointer;\n            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            backdrop-filter: blur(10px);\n          }\n          \n          .task-action-btn:hover {\n            transform: translateY(-4px);\n            box-shadow: 0 12px 32px rgba(0, 0, 0, 0.15);\n          }\n          \n          .task-action-btn.edit {\n            border-color: #5884FD;\n            color: #5884FD;\n          }\n          \n          .task-action-btn.edit:hover {\n            background: #5884FD;\n            color: #FFFFFF;\n          }\n          \n          .task-action-btn.delete {\n            border-color: #EF4444;\n            color: #EF4444;\n          }\n          \n          .task-action-btn.delete:hover {\n            background: #EF4444;\n            color: #FFFFFF;\n          }\n          \n          .task-action-btn.close {\n            border-color: #C483D9;\n            color: #C483D9;\n          }\n          \n          .task-action-btn.close:hover {\n            background: #C483D9;\n            color: #FFFFFF;\n          }\n          \n          .task-description {\n            background: rgba(255, 255, 255, 0.9);\n            padding: 1.5rem;\n            border: 2px solid rgba(255, 179, 51, 0.2);\n            border-radius: 12px;\n            margin-bottom: 2rem;\n            line-height: 1.6;\n            color: #374151;\n            white-space: pre-wrap;\n            backdrop-filter: blur(10px);\n            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);\n          }\n          \n          .task-description.empty {\n            color: #9CA3AF;\n            font-style: italic;\n            text-align: center;\n          }\n          \n          .task-details-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(min(280px, 100%), 1fr));\n            gap: 1.5rem;\n            margin-bottom: 2rem;\n          }\n          \n          .task-detail-item {\n            display: flex;\n            align-items: center;\n            gap: 1rem;\n            padding: 1.25rem;\n            border: 2px solid rgba(255, 179, 51, 0.2);\n            border-radius: 12px;\n            background: rgba(255, 255, 255, 0.9);\n            backdrop-filter: blur(10px);\n            transition: all 0.3s ease;\n            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);\n          }\n          \n          .task-detail-item:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);\n            border-color: #FFB333;\n          }\n          \n          .task-detail-icon {\n            flex-shrink: 0;\n            color: #FFB333;\n            width: 20px;\n            height: 20px;\n          }\n          \n          .task-detail-content {\n            flex: 1;\n          }\n          \n          .task-detail-label {\n            font-size: 0.875rem;\n            font-weight: 600;\n            color: #6B7280;\n            margin-bottom: 0.25rem;\n            text-transform: uppercase;\n            letter-spacing: 0.05em;\n          }\n          \n          .task-detail-value {\n            font-weight: 600;\n            color: #374151;\n            font-size: 0.925rem;\n          }\n          \n          .task-status-actions-inline {\n            background: rgba(255, 255, 255, 0.9);\n            border: 2px solid rgba(255, 179, 51, 0.2);\n            border-radius: 12px;\n            padding: 1.5rem;\n            margin-top: 2rem;\n            backdrop-filter: blur(10px);\n            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.05);\n          }\n          \n          .status-actions-title {\n            font-weight: 700;\n            color: #374151;\n            margin-bottom: 1rem;\n            font-size: 1rem;\n            letter-spacing: -0.025em;\n          }\n          \n          .status-buttons {\n            display: flex;\n            gap: 0.75rem;\n            flex-wrap: wrap;\n          }\n          \n          .status-btn {\n            display: flex;\n            align-items: center;\n            gap: 0.5rem;\n            padding: 0.75rem 1.25rem;\n            border: 2px solid #FFB333;\n            border-radius: 12px;\n            background: rgba(255, 255, 255, 0.9);\n            cursor: pointer;\n            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);\n            font-weight: 600;\n            font-size: 0.875rem;\n            flex: 1;\n            min-width: auto;\n            justify-content: center;\n            color: #FFB333;\n          }\n          \n          .status-btn:hover {\n            transform: translateY(-3px);\n            box-shadow: 0 8px 24px rgba(255, 179, 51, 0.3);\n            background: #FFB333;\n            color: #FFFFFF;\n          }\n          \n          .status-btn.current {\n            background: #FFB333;\n            color: #FFFFFF;\n            transform: translateY(-2px);\n            box-shadow: 0 8px 24px rgba(255, 179, 51, 0.3);\n          }\n          \n          .status-btn:disabled {\n            opacity: 0.6;\n            cursor: not-allowed;\n            transform: none;\n          }\n          \n          .edit-form {\n            display: flex;\n            flex-direction: column;\n            gap: 2rem;\n          }\n          \n          .form-group {\n            display: flex;\n            flex-direction: column;\n            gap: 0.75rem;\n          }\n          \n          .form-label {\n            font-weight: 700;\n            color: #374151;\n            font-size: 0.925rem;\n            letter-spacing: 0.025em;\n          }\n          \n          .form-input, .form-textarea, .form-select {\n            padding: 1rem 1.25rem;\n            border: 2px solid rgba(255, 179, 51, 0.3);\n            border-radius: 12px;\n            font-size: 0.925rem;\n            background: rgba(255, 255, 255, 0.9);\n            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);\n            backdrop-filter: blur(10px);\n            color: #374151;\n            font-weight: 500;\n          }\n          \n          .form-input:focus, .form-textarea:focus, .form-select:focus {\n            outline: none;\n            border-color: #FFB333;\n            box-shadow: 0 0 0 3px rgba(255, 179, 51, 0.1);\n            background: #FFFFFF;\n          }\n          \n          .form-textarea {\n            resize: vertical;\n            min-height: 120px;\n            font-family: inherit;\n            line-height: 1.6;\n          }\n          \n          .form-actions {\n            display: flex;\n            gap: 1.25rem;\n            margin-top: 1rem;\n            padding-top: 1.5rem;\n            border-top: 2px solid rgba(255, 179, 51, 0.2);\n          }\n          \n          .btn {\n            flex: 1;\n            padding: 1rem 2rem;\n            border-radius: 12px;\n            font-weight: 600;\n            cursor: pointer;\n            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);\n            border: 2px solid;\n            font-size: 0.925rem;\n            letter-spacing: 0.025em;\n          }\n          \n          .btn-primary {\n            background: #FFB333;\n            color: #FFFFFF;\n            border-color: #FFB333;\n          }\n          \n          .btn-primary:hover {\n            background: #F87239;\n            border-color: #F87239;\n            transform: translateY(-3px);\n            box-shadow: 0 12px 32px rgba(255, 179, 51, 0.4);\n          }\n          \n          .btn-secondary {\n            background: rgba(255, 255, 255, 0.9);\n            color: #6B7280;\n            border-color: rgba(245, 245, 237, 0.8);\n          }\n          \n          .btn-secondary:hover {\n            background: #F9FAFB;\n            color: #374151;\n            border-color: #D1D5DB;\n            transform: translateY(-3px);\n          }\n          \n          .confirm-modal-overlay {\n            position: fixed;\n            inset: 0;\n            background: rgba(0, 0, 0, 0.9);\n            backdrop-filter: blur(8px);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            padding: 1rem;\n            z-index: 100002;\n            animation: fadeIn 0.3s ease-out;\n          }\n          \n          .confirm-modal-content {\n            background: rgba(255, 255, 255, 0.98);\n            border: 2px solid #EF4444;\n            border-radius: 16px;\n            padding: 2rem;\n            max-width: 400px;\n            width: 100%;\n            text-align: center;\n            animation: slideUp 0.4s cubic-bezier(0.23, 1, 0.32, 1);\n            backdrop-filter: blur(20px);\n            box-shadow: 0 20px 60px rgba(239, 68, 68, 0.3);\n          }\n          \n          .confirm-modal-title {\n            font-size: 1.375rem;\n            font-weight: 700;\n            color: #EF4444;\n            margin-bottom: 1rem;\n            letter-spacing: -0.025em;\n          }\n          \n          .confirm-modal-text {\n            color: #6B7280;\n            margin-bottom: 2rem;\n            line-height: 1.6;\n            font-weight: 500;\n          }\n          \n          .confirm-modal-actions {\n            display: flex;\n            gap: 1rem;\n          }\n          \n          .btn-danger {\n            flex: 1;\n            background: #EF4444;\n            color: #FFFFFF;\n            border: 2px solid #EF4444;\n            padding: 1rem 2rem;\n            border-radius: 12px;\n            font-weight: 600;\n            cursor: pointer;\n            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);\n          }\n          \n          .btn-danger:hover {\n            background: #DC2626;\n            border-color: #DC2626;\n            transform: translateY(-3px);\n            box-shadow: 0 12px 32px rgba(239, 68, 68, 0.4);\n          }\n          \n          @keyframes pulse {\n            0%, 100% { opacity: 1; }\n            50% { opacity: 0.7; }\n          }\n          \n          /* Mobile optimizations */\n          @media (max-width: 768px) {\n            .task-modal-overlay {\n              padding: 0.75rem;\n              z-index: 100000;\n            }\n            .task-modal-content {\n              max-width: calc(100vw - 1.5rem);\n              border-radius: 16px;\n              height: 90vh;\n              margin: 0 auto;\n              z-index: 100001;\n            }\n            .task-modal-header {\n              padding: 1.5rem;\n              flex-direction: column;\n              align-items: stretch;\n              gap: 1rem;\n            }\n            .task-header-actions {\n              justify-content: center;\n            }\n            .tab-content {\n              padding: 1.5rem;\n            }\n            .task-details-grid {\n              grid-template-columns: 1fr;\n              gap: 1rem;\n            }\n            .task-detail-item {\n              padding: 1rem;\n            }\n            .edit-form div[style*=\"grid\"] {\n              grid-template-columns: 1fr !important;\n            }\n            .form-actions {\n              flex-direction: column;\n              gap: 1rem;\n            }\n            .btn {\n              padding: 1.25rem;\n              font-size: 1rem;\n            }\n            .tab-button {\n              padding: 1rem;\n              font-size: 0.875rem;\n            }\n          }\n        "}}),(0,a.jsxs)("div",{className:"task-modal-content",onClick:n=>n.stopPropagation(),children:[(0,a.jsxs)("div",{className:"task-modal-header",children:[(0,a.jsxs)("div",{className:"task-title-section",children:[C?(0,a.jsx)("input",{type:"text",value:E.name,onChange:n=>I({...E,name:n.target.value}),className:"form-input",style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem"}}):(0,a.jsx)("h2",{className:"task-title",children:v.name}),(0,a.jsxs)("div",{className:"task-meta-badges",children:[(0,a.jsxs)("div",{className:"task-badge priority",children:[(0,a.jsx)("span",{children:R.icon}),(0,a.jsxs)("span",{children:[R.label," Priority"]})]}),(0,a.jsxs)("div",{className:"task-badge status",children:[(0,a.jsx)("span",{children:Y.icon}),(0,a.jsx)("span",{children:Y.label})]}),H&&(0,a.jsxs)("div",{className:"task-badge overdue",children:[(0,a.jsx)(l.Z,{style:{width:"16px",height:"16px"}}),(0,a.jsx)("span",{children:"Overdue"})]})]})]}),(0,a.jsxs)("div",{className:"task-header-actions",children:[(0,a.jsx)("button",{onClick:()=>S(!C),className:"task-action-btn edit",title:C?"Cancel Edit":"Edit Task",children:(0,a.jsx)(d.Z,{style:{width:"18px",height:"18px"}})}),z&&(0,a.jsx)("button",{onClick:()=>T(!0),className:"task-action-btn delete",title:"Delete Task",children:(0,a.jsx)(c.Z,{style:{width:"18px",height:"18px"}})}),(0,a.jsx)("button",{onClick:y,className:"task-action-btn close",title:"Close",children:(0,a.jsx)(m.Z,{style:{width:"18px",height:"18px"}})})]})]}),(0,a.jsxs)("div",{className:"task-modal-body",children:[(0,a.jsx)("div",{className:"tab-navigation",children:V.map(n=>(0,a.jsxs)("button",{onClick:()=>B(n.id),className:"tab-button ".concat(A===n.id?"active":""),children:[n.icon,(0,a.jsx)("span",{children:n.label})]},n.id))}),(0,a.jsxs)("div",{className:"tab-content ".concat(C?"editing":""),children:["task"===A&&(0,a.jsx)(a.Fragment,{children:C?(0,a.jsxs)("div",{className:"edit-form",children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label",children:"Description"}),(0,a.jsx)("textarea",{value:E.description,onChange:n=>I({...E,description:n.target.value}),className:"form-textarea",placeholder:"Describe what needs to be done..."})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(200px, 100%), 1fr))",gap:"1rem"},children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label",children:"Priority"}),(0,a.jsx)("select",{value:E.priority,onChange:n=>I({...E,priority:n.target.value}),className:"form-select",children:N.map(n=>(0,a.jsxs)("option",{value:n.value,children:[n.icon," ",n.label]},n.value))})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label",children:"Assignees"}),(0,a.jsx)("div",{style:{border:"2px solid #e5e7eb",borderRadius:"8px",padding:"0.75rem",background:"#ffffff",minHeight:"100px",maxHeight:"150px",overflowY:"auto"},children:0===k.length?(0,a.jsx)("div",{style:{color:"#6b7280",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:"No team members available"}):k.map(n=>(0,a.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.4rem",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s ease",marginBottom:"0.2rem"},onMouseOver:n=>n.currentTarget.style.backgroundColor="#f3f4f6",onMouseOut:n=>n.currentTarget.style.backgroundColor="transparent",children:[(0,a.jsx)("input",{type:"checkbox",checked:E.assignee_ids.includes(n.id),onChange:e=>{e.target.checked?I({...E,assignee_ids:[...E.assignee_ids,n.id]}):I({...E,assignee_ids:E.assignee_ids.filter(e=>e!==n.id)})},style:{marginRight:"0.5rem",accentColor:"#000000"}}),(0,a.jsx)("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:E.assignee_ids.includes(n.id)?"#000000":"#f3f4f6",color:E.assignee_ids.includes(n.id)?"#ffffff":"#000000",border:"2px solid #000000",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",fontWeight:"600"},children:n.name.charAt(0).toUpperCase()}),(0,a.jsx)("span",{style:{fontSize:"0.85rem",fontWeight:"500",color:E.assignee_ids.includes(n.id)?"#000000":"#374151"},children:n.name})]},n.id))}),E.assignee_ids.length>0&&(0,a.jsx)("div",{style:{marginTop:"0.5rem",padding:"0.4rem",background:"#f0f9ff",border:"1px solid #3b82f6",borderRadius:"4px",fontSize:"0.8rem",color:"#1e40af"},children:(0,a.jsxs)("strong",{children:[E.assignee_ids.length," assignee",1===E.assignee_ids.length?"":"s"," selected"]})})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label",children:"Created by"}),(0,a.jsx)("input",{type:"text",value:(null===(e=v.created_by)||void 0===e?void 0:e.name)||"Unknown User",className:"form-input",disabled:!0,style:{backgroundColor:"#f9fafb",color:"#6b7280",cursor:"not-allowed"}})]})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(250px, 100%), 1fr))",gap:"1rem"},children:[(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label",children:"Start Date"}),(0,a.jsx)("input",{type:"date",value:E.start_date,onChange:n=>I({...E,start_date:n.target.value}),className:"form-input"})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label",children:"Due Date"}),(0,a.jsx)("input",{type:"date",value:E.due_date,onChange:n=>I({...E,due_date:n.target.value}),className:"form-input"})]})]}),(0,a.jsxs)("div",{className:"form-group",children:[(0,a.jsx)("label",{className:"form-label",children:"Tags"}),(0,a.jsx)("input",{type:"text",value:E.tags,onChange:n=>I({...E,tags:n.target.value}),className:"form-input",placeholder:"frontend, urgent, bug (comma-separated)"})]}),(0,a.jsxs)("div",{className:"form-actions",children:[(0,a.jsx)("button",{onClick:()=>S(!1),className:"btn btn-secondary",children:"Cancel"}),(0,a.jsx)("button",{onClick:M,className:"btn btn-primary",children:"Save Changes"})]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"task-description ".concat(v.description?"":"empty"),children:v.description||"No description provided."}),(0,a.jsxs)("div",{className:"task-details-grid",children:[(0,a.jsxs)("div",{className:"task-detail-item",children:[(0,a.jsx)(p.Z,{className:"task-detail-icon",style:{width:"20px",height:"20px"}}),(0,a.jsxs)("div",{className:"task-detail-content",children:[(0,a.jsx)("div",{className:"task-detail-label",children:v.assignees&&v.assignees.length>1?"Assignees":"Assignee"}),(0,a.jsx)("div",{className:"task-detail-value",children:v.assignees&&v.assignees.length>0?(0,a.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:v.assignees.map((n,e)=>(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[(0,a.jsx)("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"#000000",color:"#ffffff",border:"2px solid #ffffff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.7rem",fontWeight:"600",marginLeft:e>0?"-8px":"0",zIndex:v.assignees.length-e,position:"relative"},children:n.name.charAt(0).toUpperCase()}),(0,a.jsx)("span",{style:{fontSize:"0.875rem",fontWeight:"500"},children:n.name}),e<v.assignees.length-1&&v.assignees.length>1&&(0,a.jsx)("span",{style:{color:"#6b7280"},children:","})]},n.id))}):v.assignee?v.assignee.name:"Unassigned"})]})]}),(0,a.jsxs)("div",{className:"task-detail-item",children:[(0,a.jsx)(g.Z,{className:"task-detail-icon",style:{width:"20px",height:"20px"}}),(0,a.jsxs)("div",{className:"task-detail-content",children:[(0,a.jsx)("div",{className:"task-detail-label",children:"Due Date"}),(0,a.jsx)("div",{className:"task-detail-value",children:Z(v.due_date)})]})]}),(0,a.jsxs)("div",{className:"task-detail-item",children:[(0,a.jsx)(h.Z,{className:"task-detail-icon",style:{width:"20px",height:"20px"}}),(0,a.jsxs)("div",{className:"task-detail-content",children:[(0,a.jsx)("div",{className:"task-detail-label",children:"Start Date"}),(0,a.jsx)("div",{className:"task-detail-value",children:Z(v.start_date)})]})]}),(0,a.jsxs)("div",{className:"task-detail-item",children:[(0,a.jsx)(h.Z,{className:"task-detail-icon",style:{width:"20px",height:"20px"}}),(0,a.jsxs)("div",{className:"task-detail-content",children:[(0,a.jsx)("div",{className:"task-detail-label",children:"Estimated Hours"}),(0,a.jsx)("div",{className:"task-detail-value",children:v.estimated_hours?"".concat(v.estimated_hours,"h"):"Not set"})]})]}),v.tags_list&&v.tags_list.length>0&&(0,a.jsxs)("div",{className:"task-detail-item",children:[(0,a.jsx)(x.Z,{className:"task-detail-icon",style:{width:"20px",height:"20px"}}),(0,a.jsxs)("div",{className:"task-detail-content",children:[(0,a.jsx)("div",{className:"task-detail-label",children:"Tags"}),(0,a.jsx)("div",{className:"task-detail-value",children:v.tags_list.join(", ")})]})]}),(0,a.jsxs)("div",{className:"task-detail-item",children:[(0,a.jsx)(p.Z,{className:"task-detail-icon",style:{width:"20px",height:"20px"}}),(0,a.jsxs)("div",{className:"task-detail-content",children:[(0,a.jsx)("div",{className:"task-detail-label",children:"Created by"}),(0,a.jsx)("div",{className:"task-detail-value",children:(null===(t=v.created_by)||void 0===t?void 0:t.name)||"Unknown User"})]})]}),(0,a.jsxs)("div",{className:"task-detail-item",children:[(0,a.jsx)(g.Z,{className:"task-detail-icon",style:{width:"20px",height:"20px"}}),(0,a.jsxs)("div",{className:"task-detail-content",children:[(0,a.jsx)("div",{className:"task-detail-label",children:"Created"}),(0,a.jsx)("div",{className:"task-detail-value",children:L(v.created_at)})]})]}),(0,a.jsxs)("div",{className:"task-detail-item",children:[(0,a.jsx)(g.Z,{className:"task-detail-icon",style:{width:"20px",height:"20px"}}),(0,a.jsxs)("div",{className:"task-detail-content",children:[(0,a.jsx)("div",{className:"task-detail-label",children:"Last Updated"}),(0,a.jsx)("div",{className:"task-detail-value",children:L(v.updated_at)})]})]})]}),!C&&_&&(0,a.jsxs)("div",{className:"task-status-actions-inline",children:[(0,a.jsx)("div",{className:"status-actions-title",children:"Change Status"}),(0,a.jsx)("div",{className:"status-buttons",children:F.map(n=>(0,a.jsxs)("button",{onClick:()=>O(n.value),className:"status-btn ".concat(n.value===v.status?"current":""),disabled:n.value===v.status,children:[(0,a.jsx)("span",{children:n.icon}),(0,a.jsx)("span",{children:n.label})]},n.value))})]})]})}),"comments"===A&&(0,a.jsx)("div",{style:{height:"100%"},children:(0,a.jsx)(w,{task:v})})]})]})]}),D&&(0,a.jsx)("div",{className:"confirm-modal-overlay",onClick:()=>T(!1),children:(0,a.jsxs)("div",{className:"confirm-modal-content",onClick:n=>n.stopPropagation(),children:[(0,a.jsx)("h3",{className:"confirm-modal-title",children:"Delete Task"}),(0,a.jsxs)("p",{className:"confirm-modal-text",children:['Are you sure you want to delete "',v.name,'"? This action cannot be undone.']}),(0,a.jsxs)("div",{className:"confirm-modal-actions",children:[(0,a.jsx)("button",{onClick:()=>T(!1),className:"btn btn-secondary",children:"Cancel"}),(0,a.jsx)("button",{onClick:P,className:"btn-danger",children:"Delete Task"})]})]})})]});return(0,s.createPortal)(W,document.body)}},3549:function(n,e,t){t.r(e),t.d(e,{AuthProvider:function(){return l},useAuth:function(){return o}});var a=t(7437),i=t(2265),s=t(8411);let r=(0,i.createContext)(void 0),o=()=>{let n=(0,i.useContext)(r);if(void 0===n)throw Error("useAuth must be used within an AuthProvider");return n},l=n=>{let{children:e}=n,[t,o]=(0,i.useState)(null),[l,d]=(0,i.useState)(!0),[c,m]=(0,i.useState)(!1);(0,i.useEffect)(()=>{m(!0)},[]),(0,i.useEffect)(()=>{if(!c)return;let n=async()=>{try{console.log("Starting auth initialization..."),await new Promise(n=>setTimeout(n,50));let{user:i,error:r}=await s.supabaseAuth.getUser();if(console.log("Auth result:",{currentUser:i,error:r}),i&&!r){var n,e,t,a;let s={id:i.id,email:i.email,name:(null===(n=i.user_metadata)||void 0===n?void 0:n.name)||i.email,phone:(null===(e=i.user_metadata)||void 0===e?void 0:e.phone)||"",role:(null===(t=i.user_metadata)||void 0===t?void 0:t.role)||"member",position:(null===(a=i.user_metadata)||void 0===a?void 0:a.position)||"",date_joined:new Date().toISOString()};o(s),console.log("User set:",s)}else console.log("No user found or error occurred")}catch(n){console.error("Auth initialization error:",n)}finally{console.log("Setting isLoading to false"),d(!1)}},e=setTimeout(()=>{console.warn("Auth initialization timeout, proceeding without auth"),d(!1)},3e3),t=setTimeout(()=>{n().finally(()=>{clearTimeout(e)})},100);return()=>{clearTimeout(e),clearTimeout(t)}},[c]);let p=async(n,e)=>{try{console.log("Attempting login for:",n);let{user:l,error:d}=await s.supabaseAuth.signIn(n,e);if(d)throw console.error("Login error:",d),Error(d instanceof Error?d.message:"Login failed");if(l){var t,a,i,r;let n={id:l.id,email:l.email,name:(null===(t=l.user_metadata)||void 0===t?void 0:t.name)||l.email,phone:(null===(a=l.user_metadata)||void 0===a?void 0:a.phone)||"",role:(null===(i=l.user_metadata)||void 0===i?void 0:i.role)||"member",position:(null===(r=l.user_metadata)||void 0===r?void 0:r.position)||"",date_joined:new Date().toISOString()};o(n),console.log("Login successful:",n)}}catch(n){throw console.error("Login failed:",n),Error(n.message||"Login failed")}},g=async n=>{throw Error("Registration is disabled. Please contact an administrator.")},h=async()=>{try{await s.supabaseAuth.signOut(),o(null)}catch(n){console.error("Logout error:",n),o(null)}};return(0,a.jsx)(r.Provider,{value:{user:t,isLoading:l,login:p,register:g,logout:h,isAuthenticated:!!t},children:e})}}}]);