(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4571],{3786:function(e,r,t){Promise.resolve().then(t.bind(t,6410))},6410:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return g}});var o=t(7437),i=t(2265),n=t(4033),a=t(3549),s=t(1205),l=t(1253),d=t(2125),c=t(7227);let f=["Zoom","Google Meet","Microsoft Teams","In-Person","Hybrid","Webex","Other"],m=["30 minutes","1 hour","1.5 hours","2 hours","2.5 hours","3 hours","4 hours","Full Day"],u=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];function g(){let{user:e,isAuthenticated:r,isLoading:g}=(0,a.useAuth)(),p=(0,n.useRouter)(),[x,h]=(0,i.useState)(!0),[b,y]=(0,i.useState)(!1),[v,j]=(0,i.useState)(""),[S,w]=(0,i.useState)(null),[_,C]=(0,i.useState)([]),[k,T]=(0,i.useState)([]),[z,R]=(0,i.useState)([]),[B,W]=(0,i.useState)([]),[F,E]=(0,i.useState)(null),[A,I]=(0,i.useState)(null),[D,L]=(0,i.useState)([]),[M,O]=(0,i.useState)([]),[P,N]=(0,i.useState)(!1),[H,Y]=(0,i.useState)(!1),[q,Z]=(0,i.useState)(!1),[U,V]=(0,i.useState)(null),[$,G]=(0,i.useState)({class_name:"",class_info:"",class_start_date:"",duration:"",days:[],time_range:"",platform:"",instructor_name:"",instructor_info:"",post_date:"",folder_id:null}),[X,J]=(0,i.useState)({name:"",description:"",folder_type:"category",color:"#ffffff"}),K=async()=>{if(null==e?void 0:e.id)try{let r=(await Promise.resolve().then(t.bind(t,8411))).supabase,{data:o,error:i}=await r.from("class_schedule_members").select("id, role").eq("user_id",e.id).single();if(o&&!i)y(!0),j(o.role);else{let{data:t,error:o}=await r.from("auth_user").select("id, name, email, role, is_superuser, is_staff").eq("id",e.id).single();if(o){y(!1);return}let i=t.is_superuser||t.is_staff||"admin"===t.role||"hr"===t.role;i?(y(!0),j("admin")):y(!1)}}catch(e){console.error("Error checking access:",e),w("Failed to check access permissions")}},Q=async()=>{if(b&&(null==e?void 0:e.id))try{let e=(await Promise.resolve().then(t.bind(t,8411))).supabase,{data:r,error:o}=await e.from("class_schedule").select("\n          *,\n          auth_user:created_by (id, name, email, role)\n        ").order("class_start_date",{ascending:!0});if(o)throw o;let{data:i,error:n}=await e.from("class_schedule_members").select("\n          *,\n          auth_user:user_id (id, name, email, role)\n        "),{data:a,error:s}=await e.from("auth_user").select("id, name, email, role").order("name"),{data:l,error:d}=await e.from("class_schedule_folders").select("*").order("name");C(r||[]);let c=(i||[]).map(e=>({...e,user:e.auth_user||e.user||{id:e.user_id,name:"Unknown User",email:"",role:"member"}}));T(c),R(a||[]);let f=(l||[]).filter((e,r,t)=>r===t.findIndex(r=>r.name===e.name));W(f),ee(r||[],F)}catch(e){console.error("Error fetching data:",e),w("Failed to load class schedule data")}},ee=(e,r)=>{if(null===r)O(e);else{let t=e.filter(e=>e.folder_id===r);O(t)}},er=e=>{I(e),E(e.id),L([...D,e]),ee(_,e.id)},et=e=>{if(null===e)I(null),E(null),L([]),ee(_,null);else{let r=D.findIndex(r=>r.id===e.id),t=D.slice(0,r+1);I(e),E(e.id),L(t),ee(_,e.id)}},eo=()=>null===A?B.filter(e=>!e.parent_id):B.filter(e=>e.parent_id===A.id);(0,i.useEffect)(()=>{if(!g){if(!r){p.push("/login");return}K()}},[r,g,null==e?void 0:e.id,p]),(0,i.useEffect)(()=>{b?Q().finally(()=>h(!1)):g||h(!1)},[b,null==e?void 0:e.id]),(0,i.useEffect)(()=>{ee(_,F)},[_,F]);let ei=async r=>{r.preventDefault();try{let r=(await Promise.resolve().then(t.bind(t,8411))).supabase;if(U){let{error:e}=await r.from("class_schedule").update($).eq("id",U.id);if(e)throw e}else{let{error:t}=await r.from("class_schedule").insert({...$,created_by:null==e?void 0:e.id});if(t)throw t}await Q(),ed()}catch(e){console.error("Error saving class:",e),w("Failed to save class")}},en=async e=>{if(confirm("Are you sure you want to delete this class?"))try{let r=(await Promise.resolve().then(t.bind(t,8411))).supabase,{error:o}=await r.from("class_schedule").delete().eq("id",e);if(o)throw o;await Q()}catch(e){console.error("Error deleting class:",e),w("Failed to delete class")}},ea=async e=>{try{let r=(await Promise.resolve().then(t.bind(t,8411))).supabase,{error:o}=await r.from("class_schedule_members").insert({user_id:e,role:"member"});if(o)throw o;await Q()}catch(e){console.error("Error adding member:",e),w("Failed to add member")}},es=async e=>{if(confirm("Are you sure you want to remove this member?"))try{let r=(await Promise.resolve().then(t.bind(t,8411))).supabase,{error:o}=await r.from("class_schedule_members").delete().eq("user_id",e);if(o)throw o;await Q()}catch(e){console.error("Error removing member:",e),w("Failed to remove member")}},el=async r=>{r.preventDefault();try{let r=(await Promise.resolve().then(t.bind(t,8411))).supabase,{error:o}=await r.from("class_schedule_folders").insert({...X,parent_id:(null==A?void 0:A.id)||null,created_by:null==e?void 0:e.id});if(o)throw o;await Q(),J({name:"",description:"",folder_type:"category",color:"#ffffff"}),Z(!1)}catch(e){console.error("Error creating folder:",e),w("Failed to create folder")}},ed=()=>{G({class_name:"",class_info:"",class_start_date:"",duration:"",days:[],time_range:"",platform:"",instructor_name:"",instructor_info:"",post_date:"",folder_id:(null==A?void 0:A.id)||null}),V(null),N(!1)},ec=e=>{G({class_name:e.class_name,class_info:e.class_info,class_start_date:e.class_start_date,duration:e.duration,days:e.days,time_range:e.time_range,platform:e.platform,instructor_name:e.instructor_name,instructor_info:e.instructor_info,post_date:e.post_date,folder_id:e.folder_id||null}),V(e),N(!0)},ef=e=>new Date(e).toLocaleDateString();return g||x?(0,o.jsx)("div",{style:{padding:"2rem",background:"#F5F5ED",flex:1,display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:(0,o.jsx)("div",{style:{width:"32px",height:"32px",border:"3px solid #C483D9",borderTop:"3px solid #5884FD",borderRadius:"50%",animation:"spin 1s linear infinite"}})}):b?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        "}}),(0,o.jsxs)("div",{id:"main-content",className:"main-content",style:{padding:"2rem",background:"#F5F5ED",flex:1,minHeight:"100vh"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"3rem",paddingBottom:"1.5rem"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{style:{fontSize:"2.5rem",fontWeight:"300",margin:"0",color:"#1a1a1a",letterSpacing:"-0.02em"},children:"Class Schedule"}),(0,o.jsx)("p",{style:{fontSize:"1.1rem",color:"#666666",margin:"0.5rem 0 0 0",lineHeight:"1.5"},children:"Manage and organize your class schedules and training sessions"})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"0.75rem"},children:[(0,o.jsx)("button",{onClick:()=>{J({name:"",description:"",folder_type:"category",color:"#ffffff"}),Z(!0)},style:{padding:"0.75rem 1.5rem",background:"#ffffff",color:"#666666",border:"1px solid #e0e0e0",borderRadius:"12px",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},children:"Create Folder"}),"admin"===v&&(0,o.jsx)("button",{onClick:()=>Y(!0),style:{padding:"0.75rem 1.5rem",background:"#FFB333",color:"#ffffff",border:"none",borderRadius:"12px",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(255, 179, 51, 0.3)"},children:"Manage Members"}),(0,o.jsx)("button",{onClick:()=>{G({...$,folder_id:(null==A?void 0:A.id)||null}),N(!0)},style:{padding:"0.75rem 1.5rem",background:"#5884FD",color:"#ffffff",border:"none",borderRadius:"12px",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(88, 132, 253, 0.3)"},children:A?"Add to ".concat(A.name):"Add Class"})]})]}),S&&(0,o.jsx)("div",{style:{background:"#ffffff",border:"1px solid #F87239",borderRadius:"12px",padding:"1rem",marginBottom:"2rem",color:"#F87239",fontWeight:"500",boxShadow:"0 2px 8px rgba(248, 114, 57, 0.1)"},children:S}),(0,o.jsxs)("div",{style:{background:"#ffffff",border:"1px solid #e8e8e8",borderRadius:"16px",padding:"2rem",marginBottom:"2rem",boxShadow:"0 2px 16px rgba(0, 0, 0, 0.04)"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1.5rem",fontSize:"0.9rem",color:"#666666"},children:[(0,o.jsx)("button",{onClick:()=>et(null),style:{background:"transparent",border:"none",color:null===A?"#1a1a1a":"#666666",fontWeight:null===A?"500":"400",textDecoration:"none",cursor:"pointer",padding:"0.25rem 0.5rem",borderRadius:"6px",transition:"all 0.2s ease"},children:"Class Schedule"}),D.map((e,r)=>(0,o.jsxs)("span",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,o.jsx)("span",{style:{color:"#C483D9"},children:"â€¢"}),(0,o.jsx)("button",{onClick:()=>et(e),style:{background:"transparent",border:"none",color:r===D.length-1?"#1a1a1a":"#666666",fontWeight:r===D.length-1?"500":"400",textDecoration:"none",cursor:"pointer",padding:"0.25rem 0.5rem",borderRadius:"6px",transition:"all 0.2s ease"},children:e.name})]},e.id))]}),(0,o.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,o.jsxs)("h3",{style:{fontSize:"1.2rem",fontWeight:"500",marginBottom:"1.5rem",color:"#1a1a1a",letterSpacing:"-0.01em"},children:[A?"".concat(A.name):"All Folders",null===A&&B.length>0&&(0,o.jsxs)("span",{style:{color:"#666666",fontSize:"0.9rem",fontWeight:"400"},children:["(",B.length," total)"]})]}),0===eo().length&&0===B.length?(0,o.jsxs)("div",{style:{textAlign:"center",padding:"3rem 2rem",color:"#999999",border:"1px dashed #e0e0e0",borderRadius:"12px",background:"#fafafa"},children:[(0,o.jsx)("div",{style:{width:"48px",height:"48px",background:"#f0f0f0",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1.5rem"},children:(0,o.jsx)(s.Z,{style:{width:"24px",height:"24px",color:"#999999"}})}),(0,o.jsx)("p",{style:{margin:"0 0 1rem 0",fontSize:"1.1rem",fontWeight:"500"},children:"No folders created yet"}),(0,o.jsx)("p",{style:{margin:"0",fontSize:"0.9rem",lineHeight:"1.5"},children:"Create folders to organize your classes by category, level, or subject"})]}):(0,o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"1rem"},children:eo().map(e=>(0,o.jsxs)("div",{onClick:()=>er(e),style:{padding:"1.5rem",background:"#ffffff",border:"1px solid #e8e8e8",borderRadius:"12px",cursor:"pointer",display:"flex",alignItems:"center",gap:"1rem",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)"},onMouseEnter:e=>{e.currentTarget.style.borderColor="#C483D9",e.currentTarget.style.background="#fafafa",e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 16px rgba(196, 131, 217, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.borderColor="#e8e8e8",e.currentTarget.style.background="#ffffff",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)"},children:[(0,o.jsx)("div",{style:{width:"40px",height:"40px",background:"#f0f0f0",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,o.jsx)(s.Z,{style:{width:"20px",height:"20px",color:"#999999"}})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontWeight:"500",color:"#1a1a1a",fontSize:"1rem"},children:e.name}),e.description&&(0,o.jsx)("div",{style:{fontSize:"0.85rem",color:"#666666",marginTop:"0.25rem",lineHeight:"1.4"},children:e.description})]})]},e.id))})]})]}),A&&(0,o.jsx)("div",{style:{background:"#ffffff",border:"1px solid #e8e8e8",borderRadius:"16px",overflow:"hidden",boxShadow:"0 2px 16px rgba(0, 0, 0, 0.04)"},children:(0,o.jsxs)("div",{style:{overflowX:"auto",WebkitOverflowScrolling:"touch"},children:[(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"120px 200px 100px 100px 100px 100px 120px 200px 100px 80px",gap:"0",background:"#fafafa",borderBottom:"1px solid #e8e8e8",fontWeight:"500",fontSize:"0.8rem",color:"#666666",letterSpacing:"0.025em",minWidth:"1120px"},children:[(0,o.jsx)("div",{style:{padding:"1.25rem 1rem",borderRight:"1px solid #f0f0f0"},children:"START DATE"}),(0,o.jsx)("div",{style:{padding:"1.25rem 1rem",borderRight:"1px solid #f0f0f0"},children:"CLASS NAME"}),(0,o.jsx)("div",{style:{padding:"1.25rem 1rem",borderRight:"1px solid #f0f0f0"},children:"DURATION"}),(0,o.jsx)("div",{style:{padding:"1.25rem 1rem",borderRight:"1px solid #f0f0f0"},children:"DAYS"}),(0,o.jsx)("div",{style:{padding:"1.25rem 1rem",borderRight:"1px solid #f0f0f0"},children:"TIME"}),(0,o.jsx)("div",{style:{padding:"1.25rem 1rem",borderRight:"1px solid #f0f0f0"},children:"PLATFORM"}),(0,o.jsx)("div",{style:{padding:"1.25rem 1rem",borderRight:"1px solid #f0f0f0"},children:"INSTRUCTOR NAME"}),(0,o.jsx)("div",{style:{padding:"1.25rem 1rem",borderRight:"1px solid #f0f0f0"},children:"INSTRUCTOR INFO"}),(0,o.jsx)("div",{style:{padding:"1.25rem 1rem",borderRight:"1px solid #f0f0f0"},children:"POST DATE"}),(0,o.jsx)("div",{style:{padding:"1.25rem 1rem"},children:"ACTIONS"})]}),0===M.length?(0,o.jsxs)("div",{style:{padding:"4rem",textAlign:"center",color:"#999999",fontSize:"1.1rem"},children:[(0,o.jsx)("div",{style:{width:"48px",height:"48px",background:"#f0f0f0",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:(0,o.jsx)(l.Z,{style:{width:"24px",height:"24px",color:"#999999"}})}),(0,o.jsxs)("p",{style:{margin:"0",fontWeight:"500"},children:["No classes in ",A.name]}),(0,o.jsx)("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.9rem",color:"#666666"},children:'Click "Add Class" to create one.'})]}):M.map(e=>(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"120px 200px 100px 100px 100px 100px 120px 200px 100px 80px",gap:"0",borderBottom:"1px solid #f0f0f0",fontSize:"0.85rem",transition:"all 0.2s ease",minWidth:"1120px"},children:[(0,o.jsx)("div",{style:{padding:"1rem",borderRight:"1px solid #f0f0f0",color:"#666666"},children:ef(e.class_start_date)}),(0,o.jsxs)("div",{style:{padding:"1rem",borderRight:"1px solid #f0f0f0"},children:[(0,o.jsx)("div",{style:{fontWeight:"500",marginBottom:"0.25rem",color:"#1a1a1a"},children:e.class_name}),(0,o.jsx)("div",{style:{fontSize:"0.75rem",color:"#666666",lineHeight:"1.4"},children:e.class_info&&e.class_info.length>50?"".concat(e.class_info.substring(0,50),"..."):e.class_info})]}),(0,o.jsx)("div",{style:{padding:"1rem",borderRight:"1px solid #f0f0f0",color:"#666666"},children:e.duration}),(0,o.jsx)("div",{style:{padding:"1rem",borderRight:"1px solid #f0f0f0",color:"#666666"},children:e.days.join(", ")}),(0,o.jsx)("div",{style:{padding:"1rem",borderRight:"1px solid #f0f0f0",color:"#666666"},children:e.time_range}),(0,o.jsx)("div",{style:{padding:"1rem",borderRight:"1px solid #f0f0f0",color:"#666666"},children:e.platform}),(0,o.jsx)("div",{style:{padding:"1rem",borderRight:"1px solid #f0f0f0",color:"#666666"},children:e.instructor_name||"-"}),(0,o.jsx)("div",{style:{padding:"1rem",borderRight:"1px solid #f0f0f0",color:"#666666"},children:e.instructor_info&&e.instructor_info.length>30?"".concat(e.instructor_info.substring(0,30),"..."):e.instructor_info||"-"}),(0,o.jsx)("div",{style:{padding:"1rem",borderRight:"1px solid #f0f0f0",color:"#666666"},children:ef(e.post_date)}),(0,o.jsxs)("div",{style:{padding:"1rem",display:"flex",gap:"0.5rem",alignItems:"flex-start"},children:[(0,o.jsx)("button",{onClick:()=>ec(e),style:{padding:"0.5rem",background:"#ffffff",border:"1px solid #e8e8e8",borderRadius:"8px",cursor:"pointer",color:"#5884FD",transition:"all 0.2s ease",height:"36px",width:"36px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},onMouseEnter:e=>{e.currentTarget.style.background="#5884FD",e.currentTarget.style.color="#ffffff",e.currentTarget.style.borderColor="#5884FD",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(88, 132, 253, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.background="#ffffff",e.currentTarget.style.color="#5884FD",e.currentTarget.style.borderColor="#e8e8e8",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 1px 3px rgba(0, 0, 0, 0.1)"},children:(0,o.jsx)(d.Z,{style:{width:"16px",height:"16px"}})}),(0,o.jsx)("button",{onClick:()=>en(e.id),style:{padding:"0.5rem",background:"#ffffff",border:"1px solid #e8e8e8",borderRadius:"8px",cursor:"pointer",color:"#F87239",transition:"all 0.2s ease",height:"36px",width:"36px",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},onMouseEnter:e=>{e.currentTarget.style.background="#F87239",e.currentTarget.style.color="#ffffff",e.currentTarget.style.borderColor="#F87239",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(248, 114, 57, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.background="#ffffff",e.currentTarget.style.color="#F87239",e.currentTarget.style.borderColor="#e8e8e8",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 1px 3px rgba(0, 0, 0, 0.1)"},children:(0,o.jsx)(c.Z,{style:{width:"16px",height:"16px"}})})]})]},e.id))]})}),!A&&(0,o.jsxs)("div",{style:{background:"#ffffff",border:"1px solid #e8e8e8",borderRadius:"16px",padding:"4rem",textAlign:"center",color:"#666666",boxShadow:"0 2px 16px rgba(0, 0, 0, 0.04)"},children:[(0,o.jsx)("div",{style:{width:"64px",height:"64px",background:"#f0f0f0",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 2rem"},children:(0,o.jsx)(s.Z,{style:{width:"32px",height:"32px",color:"#999999"}})}),(0,o.jsx)("h3",{style:{fontSize:"1.5rem",fontWeight:"400",margin:"0 0 1rem 0",color:"#1a1a1a",letterSpacing:"-0.01em"},children:"Choose a Folder to View Classes"}),(0,o.jsx)("p",{style:{fontSize:"1.1rem",margin:"0 0 1rem 0",lineHeight:"1.5"},children:"Click on a folder above to see its class schedules and manage your training sessions."}),(0,o.jsx)("p",{style:{fontSize:"0.9rem",margin:"0",color:"#999999"},children:"Create new folders to organize classes by category, level, or subject."})]}),P&&(0,o.jsx)("div",{style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,o.jsxs)("div",{style:{background:"#ffffff",border:"1px solid #e8e8e8",borderRadius:"20px",padding:"3rem",width:"95%",maxWidth:"700px",maxHeight:"95vh",overflow:"auto",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)"},children:[(0,o.jsxs)("div",{style:{textAlign:"center",marginBottom:"3rem",paddingBottom:"2rem",borderBottom:"1px solid #f0f0f0"},children:[(0,o.jsx)("h2",{style:{fontSize:"2rem",fontWeight:"400",margin:"0 0 0.5rem 0",color:"#1a1a1a",letterSpacing:"-0.025em"},children:U?"Edit Class Schedule":"Add New Class Schedule"}),(0,o.jsx)("p",{style:{fontSize:"1.1rem",color:"#666666",margin:"0",fontWeight:"400",lineHeight:"1.5"},children:U?"Update your class details below":"Fill in the details to create a new class schedule"})]}),(0,o.jsxs)("form",{onSubmit:ei,children:[(0,o.jsxs)("div",{style:{marginBottom:"3rem"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"1px solid #f0f0f0"},children:[(0,o.jsx)("div",{style:{width:"4px",height:"24px",backgroundColor:"#5884FD",borderRadius:"2px"}}),(0,o.jsx)("h3",{style:{fontSize:"1.2rem",fontWeight:"500",margin:"0",color:"#1a1a1a",letterSpacing:"-0.015em"},children:"Basic Information"})]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2.5rem",marginBottom:"2rem"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.75rem",fontWeight:"600",fontSize:"1rem",color:"#374151",letterSpacing:"-0.01em"},children:"Class Name"}),(0,o.jsx)("input",{type:"text",value:$.class_name,onChange:e=>G({...$,class_name:e.target.value}),required:!0,placeholder:"Enter class name...",style:{width:"100%",padding:"0.9rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"0.95rem",backgroundColor:"#fafafa",boxSizing:"border-box"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.75rem",fontWeight:"600",fontSize:"1rem",color:"#374151",letterSpacing:"-0.01em"},children:"Class Start Date"}),(0,o.jsx)("input",{type:"date",value:$.class_start_date,onChange:e=>G({...$,class_start_date:e.target.value}),required:!0,style:{width:"100%",padding:"0.9rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"0.95rem",backgroundColor:"#fafafa",boxSizing:"border-box"}})]})]}),(0,o.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.75rem",fontWeight:"600",fontSize:"1rem",color:"#374151",letterSpacing:"-0.01em"},children:"Class Information"}),(0,o.jsx)("textarea",{value:$.class_info,onChange:e=>G({...$,class_info:e.target.value}),rows:3,placeholder:"Describe the class content, objectives, and requirements...",style:{width:"100%",padding:"0.9rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"0.95rem",resize:"vertical",backgroundColor:"#fafafa",boxSizing:"border-box"}})]})]}),(0,o.jsxs)("div",{style:{marginBottom:"3rem"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"1px solid #f0f0f0"},children:[(0,o.jsx)("div",{style:{width:"4px",height:"24px",backgroundColor:"#C483D9",borderRadius:"2px"}}),(0,o.jsx)("h3",{style:{fontSize:"1.2rem",fontWeight:"500",margin:"0",color:"#1a1a1a",letterSpacing:"-0.015em"},children:"Schedule Details"})]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2.5rem",marginBottom:"2rem"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.75rem",fontWeight:"600",fontSize:"1rem",color:"#374151",letterSpacing:"-0.01em"},children:"Duration"}),(0,o.jsxs)("select",{value:$.duration,onChange:e=>G({...$,duration:e.target.value}),required:!0,style:{width:"100%",padding:"0.9rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"0.95rem",backgroundColor:"#fafafa",boxSizing:"border-box"},children:[(0,o.jsx)("option",{value:"",children:"Select duration"}),m.map(e=>(0,o.jsx)("option",{value:e,children:e},e))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.75rem",fontWeight:"600",fontSize:"1rem",color:"#374151",letterSpacing:"-0.01em"},children:"Time Range"}),(0,o.jsx)("input",{type:"text",value:$.time_range,onChange:e=>G({...$,time_range:e.target.value}),placeholder:"e.g., 7:00 PM - 9:00 PM",required:!0,style:{width:"100%",padding:"0.9rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"0.95rem",backgroundColor:"#fafafa",boxSizing:"border-box"}})]})]}),(0,o.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"1rem",fontWeight:"600",fontSize:"1rem",color:"#374151",letterSpacing:"-0.01em"},children:"Days of Week"}),(0,o.jsx)("div",{style:{border:"2px solid #e5e7eb",borderRadius:"8px",padding:"1rem",backgroundColor:"#fafafa"},children:(0,o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(120px, 1fr))",gap:"0.75rem"},children:u.map(e=>(0,o.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",cursor:"pointer",padding:"0.5rem",borderRadius:"4px",backgroundColor:"#ffffff",border:"1px solid #e5e7eb"},children:[(0,o.jsx)("input",{type:"checkbox",checked:$.days.includes(e),onChange:r=>{r.target.checked?G({...$,days:[...$.days,e]}):G({...$,days:$.days.filter(r=>r!==e)})},style:{width:"16px",height:"16px"}}),(0,o.jsx)("span",{style:{fontSize:"0.9rem",fontWeight:"500"},children:e})]},e))})})]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"2.5rem",marginBottom:"2rem"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.75rem",fontWeight:"600",fontSize:"1rem",color:"#374151",letterSpacing:"-0.01em"},children:"Platform"}),(0,o.jsxs)("select",{value:$.platform,onChange:e=>G({...$,platform:e.target.value}),required:!0,style:{width:"100%",padding:"0.9rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"0.95rem",backgroundColor:"#fafafa",boxSizing:"border-box"},children:[(0,o.jsx)("option",{value:"",children:"Select platform"}),f.map(e=>(0,o.jsx)("option",{value:e,children:e},e))]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.75rem",fontWeight:"600",fontSize:"1rem",color:"#374151",letterSpacing:"-0.01em"},children:"Post Date"}),(0,o.jsx)("input",{type:"date",value:$.post_date,onChange:e=>G({...$,post_date:e.target.value}),required:!0,style:{width:"100%",padding:"0.9rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"0.95rem",backgroundColor:"#fafafa",boxSizing:"border-box"}})]})]})]}),(0,o.jsxs)("div",{style:{marginBottom:"3rem"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"2rem",paddingBottom:"1rem",borderBottom:"1px solid #f0f0f0"},children:[(0,o.jsx)("div",{style:{width:"4px",height:"24px",backgroundColor:"#F87239",borderRadius:"2px"}}),(0,o.jsx)("h3",{style:{fontSize:"1.2rem",fontWeight:"500",margin:"0",color:"#1a1a1a",letterSpacing:"-0.015em"},children:"Additional Details"})]}),(0,o.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.75rem",fontWeight:"600",fontSize:"1rem",color:"#374151",letterSpacing:"-0.01em"},children:"Instructor Name"}),(0,o.jsx)("input",{type:"text",value:$.instructor_name,onChange:e=>G({...$,instructor_name:e.target.value}),placeholder:"Enter instructor's full name",style:{width:"100%",padding:"0.9rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"0.95rem",backgroundColor:"#fafafa",boxSizing:"border-box"}})]}),(0,o.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"1rem",fontWeight:"600",fontSize:"1rem",color:"#374151",letterSpacing:"-0.01em"},children:"Instructor Information"}),(0,o.jsx)("textarea",{value:$.instructor_info,onChange:e=>G({...$,instructor_info:e.target.value}),rows:4,placeholder:"Provide instructor background, qualifications, experience, and contact information...",style:{width:"100%",padding:"1rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"0.95rem",resize:"vertical",backgroundColor:"#fafafa",lineHeight:"1.5",boxSizing:"border-box"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.75rem",fontWeight:"600",fontSize:"1rem",color:"#374151",letterSpacing:"-0.01em"},children:"Folder"}),(0,o.jsxs)("select",{value:$.folder_id||"",onChange:e=>G({...$,folder_id:e.target.value?parseInt(e.target.value):null}),style:{width:"100%",padding:"0.9rem",border:"2px solid #e5e7eb",borderRadius:"8px",fontSize:"0.95rem",backgroundColor:"#fafafa",boxSizing:"border-box"},children:[(0,o.jsx)("option",{value:"",children:"No folder"}),B.map(e=>(0,o.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"1.5rem",justifyContent:"center",paddingTop:"2.5rem",borderTop:"1px solid #f0f0f0",marginTop:"2rem"},children:[(0,o.jsx)("button",{type:"button",onClick:ed,style:{padding:"1rem 2.5rem",background:"#ffffff",color:"#666666",border:"1px solid #e0e0e0",borderRadius:"12px",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",minWidth:"140px",fontFamily:"inherit",outline:"none",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#f8f8f8",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="#ffffff",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)"},children:"Cancel"}),(0,o.jsx)("button",{type:"submit",style:{padding:"1rem 2.5rem",background:"#5884FD",color:"#ffffff",border:"none",borderRadius:"12px",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",minWidth:"140px",fontFamily:"inherit",outline:"none",boxShadow:"0 4px 12px rgba(88, 132, 253, 0.3)"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#4A6CF7",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 6px 16px rgba(88, 132, 253, 0.4)"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="#5884FD",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 12px rgba(88, 132, 253, 0.3)"},children:U?"Update Class":"Create Class"})]})]})]})}),H&&"admin"===v&&(0,o.jsx)("div",{style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,o.jsxs)("div",{style:{background:"#ffffff",border:"1px solid #e8e8e8",borderRadius:"20px",padding:"2.5rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)"},children:[(0,o.jsx)("h2",{style:{fontSize:"1.75rem",fontWeight:"400",marginBottom:"2rem",color:"#1a1a1a",letterSpacing:"-0.02em"},children:"Manage Class Schedule Members"}),(0,o.jsxs)("div",{style:{marginBottom:"2rem"},children:[(0,o.jsx)("h3",{style:{fontSize:"1.1rem",fontWeight:"600",marginBottom:"1rem"},children:"Current Members"}),(0,o.jsx)("div",{style:{border:"2px solid #e5e7eb",borderRadius:"6px",maxHeight:"200px",overflow:"auto"},children:(k||[]).map(e=>(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",borderBottom:"1px solid #e5e7eb"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{style:{fontWeight:"600"},children:e.user.name}),(0,o.jsxs)("span",{style:{color:"#666666",fontSize:"0.9rem",marginLeft:"0.5rem"},children:["(",e.user.email,")"]})]}),(0,o.jsx)("button",{onClick:()=>es(e.user_id),style:{padding:"0.375rem 0.75rem",background:"#ffffff",color:"#F87239",border:"1px solid #e8e8e8",borderRadius:"6px",fontSize:"0.8rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="#F87239",e.currentTarget.style.color="#ffffff",e.currentTarget.style.borderColor="#F87239"},onMouseLeave:e=>{e.currentTarget.style.background="#ffffff",e.currentTarget.style.color="#F87239",e.currentTarget.style.borderColor="#e8e8e8"},children:"Remove"})]},e.user_id))})]}),(0,o.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,o.jsx)("h3",{style:{fontSize:"1.1rem",fontWeight:"600",marginBottom:"1rem"},children:"Add New Members"}),(0,o.jsx)("div",{style:{border:"2px solid #e5e7eb",borderRadius:"6px",maxHeight:"200px",overflow:"auto"},children:(z||[]).filter(e=>!(k||[]).some(r=>r.user_id===e.id)).map(e=>(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"0.75rem",borderBottom:"1px solid #e5e7eb"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("span",{style:{fontWeight:"600"},children:e.name}),(0,o.jsxs)("span",{style:{color:"#666666",fontSize:"0.9rem",marginLeft:"0.5rem"},children:["(",e.email,")"]})]}),(0,o.jsx)("button",{onClick:()=>ea(e.id),style:{padding:"0.375rem 0.75rem",background:"#5884FD",color:"#ffffff",border:"none",borderRadius:"6px",fontSize:"0.8rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="#4A6CF7"},onMouseLeave:e=>{e.currentTarget.style.background="#5884FD"},children:"Add"})]},e.id))})]}),(0,o.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,o.jsx)("button",{onClick:()=>Y(!1),style:{padding:"0.875rem 2rem",background:"#5884FD",color:"#ffffff",border:"none",borderRadius:"12px",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(88, 132, 253, 0.3)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#4A6CF7",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 6px 16px rgba(88, 132, 253, 0.4)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#5884FD",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 12px rgba(88, 132, 253, 0.3)"},children:"Close"})})]})}),q&&(0,o.jsx)("div",{style:{position:"fixed",top:"0",left:"0",right:"0",bottom:"0",background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,o.jsxs)("div",{style:{background:"#ffffff",border:"1px solid #e8e8e8",borderRadius:"20px",padding:"2.5rem",width:"90%",maxWidth:"500px",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.1)"},children:[(0,o.jsx)("h2",{style:{fontSize:"1.75rem",fontWeight:"400",marginBottom:"2rem",color:"#1a1a1a",letterSpacing:"-0.02em"},children:A?"Create Subfolder in ".concat(A.name):"Create New Folder"}),A&&(0,o.jsxs)("div",{style:{background:"#f0f0f0",border:"1px solid #e5e7eb",borderRadius:"6px",padding:"1rem",marginBottom:"1.5rem",fontSize:"0.9rem",color:"#666666"},children:[(0,o.jsx)("strong",{children:"Parent Folder:"})," ",A.name,(0,o.jsx)("br",{}),'This folder will be created inside "',A.name,'"']}),(0,o.jsxs)("form",{onSubmit:el,children:[(0,o.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Folder Name"}),(0,o.jsx)("input",{type:"text",value:X.name,onChange:e=>J({...X,name:e.target.value}),placeholder:A?"e.g., Beginner Level, Advanced Topics, Practical Sessions":"e.g., Programming Classes, Business Training, Design Workshops",required:!0,style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"6px",fontSize:"0.9rem"}})]}),(0,o.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Folder Type"}),(0,o.jsxs)("select",{value:X.folder_type,onChange:e=>J({...X,folder_type:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"6px",fontSize:"0.9rem"},children:[(0,o.jsx)("option",{value:"category",children:"Category"}),(0,o.jsx)("option",{value:"level",children:"Level"}),(0,o.jsx)("option",{value:"subject",children:"Subject"}),(0,o.jsx)("option",{value:"semester",children:"Semester"}),(0,o.jsx)("option",{value:"instructor",children:"Instructor"})]})]}),(0,o.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,o.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600"},children:"Description (Optional)"}),(0,o.jsx)("textarea",{value:X.description,onChange:e=>J({...X,description:e.target.value}),placeholder:"Brief description of this folder's purpose",rows:3,style:{width:"100%",padding:"0.75rem",border:"2px solid #e5e7eb",borderRadius:"6px",fontSize:"0.9rem",resize:"vertical"}})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[(0,o.jsx)("button",{type:"button",onClick:()=>Z(!1),style:{padding:"0.875rem 1.5rem",background:"#ffffff",color:"#666666",border:"1px solid #e0e0e0",borderRadius:"12px",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#f8f8f8",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#ffffff",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.1)"},children:"Cancel"}),(0,o.jsx)("button",{type:"submit",style:{padding:"0.875rem 1.5rem",background:"#C483D9",color:"#ffffff",border:"none",borderRadius:"12px",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(196, 131, 217, 0.3)"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#B16EC4",e.currentTarget.style.transform="translateY(-1px)",e.currentTarget.style.boxShadow="0 6px 16px rgba(196, 131, 217, 0.4)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#C483D9",e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 4px 12px rgba(196, 131, 217, 0.3)"},children:A?"Create Subfolder":"Create Folder"})]})]})]})})]})]}):(0,o.jsx)("div",{style:{padding:"2rem",background:"#F5F5ED",flex:1,display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:(0,o.jsxs)("div",{style:{textAlign:"center",maxWidth:"500px"},children:[(0,o.jsx)("h1",{style:{fontSize:"2.5rem",fontWeight:"300",marginBottom:"1rem",color:"#1a1a1a",letterSpacing:"-0.02em"},children:"Access Denied"}),(0,o.jsx)("p",{style:{fontSize:"1.1rem",color:"#666666",marginBottom:"2rem",lineHeight:"1.6"},children:"You don't have permission to access the Class Schedule. Please contact an administrator to request access."}),(0,o.jsx)("button",{onClick:()=>p.push("/dashboard"),style:{padding:"0.875rem 2rem",background:"#5884FD",color:"#ffffff",border:"none",borderRadius:"12px",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(88, 132, 253, 0.3)"},children:"Back to Dashboard"})]})})}},3549:function(e,r,t){"use strict";t.r(r),t.d(r,{AuthProvider:function(){return l},useAuth:function(){return s}});var o=t(7437),i=t(2265),n=t(8411);let a=(0,i.createContext)(void 0),s=()=>{let e=(0,i.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},l=e=>{let{children:r}=e,[t,s]=(0,i.useState)(null),[l,d]=(0,i.useState)(!0),[c,f]=(0,i.useState)(!1);(0,i.useEffect)(()=>{f(!0)},[]),(0,i.useEffect)(()=>{if(!c)return;let e=async()=>{try{console.log("Starting auth initialization..."),await new Promise(e=>setTimeout(e,50));let{user:i,error:a}=await n.supabaseAuth.getUser();if(console.log("Auth result:",{currentUser:i,error:a}),i&&!a){var e,r,t,o;let n={id:i.id,email:i.email,name:(null===(e=i.user_metadata)||void 0===e?void 0:e.name)||i.email,phone:(null===(r=i.user_metadata)||void 0===r?void 0:r.phone)||"",role:(null===(t=i.user_metadata)||void 0===t?void 0:t.role)||"member",position:(null===(o=i.user_metadata)||void 0===o?void 0:o.position)||"",date_joined:new Date().toISOString()};s(n),console.log("User set:",n)}else console.log("No user found or error occurred")}catch(e){console.error("Auth initialization error:",e)}finally{console.log("Setting isLoading to false"),d(!1)}},r=setTimeout(()=>{console.warn("Auth initialization timeout, proceeding without auth"),d(!1)},3e3),t=setTimeout(()=>{e().finally(()=>{clearTimeout(r)})},100);return()=>{clearTimeout(r),clearTimeout(t)}},[c]);let m=async(e,r)=>{try{console.log("Attempting login for:",e);let{user:l,error:d}=await n.supabaseAuth.signIn(e,r);if(d)throw console.error("Login error:",d),Error(d instanceof Error?d.message:"Login failed");if(l){var t,o,i,a;let e={id:l.id,email:l.email,name:(null===(t=l.user_metadata)||void 0===t?void 0:t.name)||l.email,phone:(null===(o=l.user_metadata)||void 0===o?void 0:o.phone)||"",role:(null===(i=l.user_metadata)||void 0===i?void 0:i.role)||"member",position:(null===(a=l.user_metadata)||void 0===a?void 0:a.position)||"",date_joined:new Date().toISOString()};s(e),console.log("Login successful:",e)}}catch(e){throw console.error("Login failed:",e),Error(e.message||"Login failed")}},u=async e=>{throw Error("Registration is disabled. Please contact an administrator.")},g=async()=>{try{await n.supabaseAuth.signOut(),s(null)}catch(e){console.error("Logout error:",e),s(null)}};return(0,o.jsx)(a.Provider,{value:{user:t,isLoading:l,login:m,register:u,logout:g,isAuthenticated:!!t},children:r})}},622:function(e,r,t){"use strict";var o=t(2265),i=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(e,r,t){var o,n={},d=null,c=null;for(o in void 0!==t&&(d=""+t),void 0!==r.key&&(d=""+r.key),void 0!==r.ref&&(c=r.ref),r)a.call(r,o)&&!l.hasOwnProperty(o)&&(n[o]=r[o]);if(e&&e.defaultProps)for(o in r=e.defaultProps)void 0===n[o]&&(n[o]=r[o]);return{$$typeof:i,type:e,key:d,ref:c,props:n,_owner:s.current}}r.Fragment=n,r.jsx=d,r.jsxs=d},7437:function(e,r,t){"use strict";e.exports=t(622)},4033:function(e,r,t){e.exports=t(94)},1253:function(e,r,t){"use strict";var o=t(2265);let i=o.forwardRef(function({title:e,titleId:r,...t},i){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":r},t),e?o.createElement("title",{id:r},e):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))});r.Z=i},1205:function(e,r,t){"use strict";var o=t(2265);let i=o.forwardRef(function({title:e,titleId:r,...t},i){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":r},t),e?o.createElement("title",{id:r},e):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))});r.Z=i},2125:function(e,r,t){"use strict";var o=t(2265);let i=o.forwardRef(function({title:e,titleId:r,...t},i){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":r},t),e?o.createElement("title",{id:r},e):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"}))});r.Z=i},7227:function(e,r,t){"use strict";var o=t(2265);let i=o.forwardRef(function({title:e,titleId:r,...t},i){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:i,"aria-labelledby":r},t),e?o.createElement("title",{id:r},e):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))});r.Z=i}},function(e){e.O(0,[7708,8411,2971,2472,1744],function(){return e(e.s=3786)}),_N_E=e.O()}]);