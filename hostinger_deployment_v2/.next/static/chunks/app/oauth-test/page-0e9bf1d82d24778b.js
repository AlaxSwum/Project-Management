(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[298],{6098:function(e,s,t){Promise.resolve().then(t.bind(t,2943))},2943:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return r}});var n=t(7437),l=t(2265),o=t(2601);function r(){let[e,s]=(0,l.useState)("Initializing..."),[t,r]=(0,l.useState)([]),[i,c]=(0,l.useState)(null),d=e=>{let s=new Date().toLocaleTimeString();r(t=>[...t,"[".concat(s,"] ").concat(e)])},a=async()=>{try{d("\uD83D\uDD0D Testing Google API configuration...");let e=o.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID,t=o.env.NEXT_PUBLIC_GOOGLE_DRIVE_API_KEY;if(d("Client ID: ".concat(e?"Found":"Missing")),d("API Key: ".concat(t?"Found":"Missing")),!e||!t){s("❌ Environment variables missing");return}if(window.google){d("✅ Google Identity Services loaded");try{let t=window.google.accounts.oauth2.initTokenClient({client_id:e,scope:"https://www.googleapis.com/auth/drive.readonly",callback:e=>{d("\uD83D\uDCCA Token Response received"),c(e),e.access_token?(d("✅ Access token received successfully"),s("✅ OAuth working correctly")):e.error&&(d("❌ OAuth error: ".concat(e.error)),s("❌ OAuth failed: ".concat(e.error)))}});d("\uD83D\uDE80 Token client initialized, requesting access..."),t.requestAccessToken()}catch(e){d("❌ Token client error: ".concat(e.message)),s("❌ Token client failed: ".concat(e.message))}}else d("❌ Google Identity Services not loaded"),s("❌ Google scripts not loaded")}catch(e){d("❌ Test error: ".concat(e.message)),s("❌ Test failed: ".concat(e.message))}};return(0,l.useEffect)(()=>{let e=document.querySelector('script[src="https://accounts.google.com/gsi/client"]');if(e){d("✅ Google Identity Services script already loaded"),s("✅ Ready for testing");return}let t=document.createElement("script");return t.src="https://accounts.google.com/gsi/client",t.onload=()=>{d("✅ Google Identity Services script loaded"),s("✅ Ready for testing")},t.onerror=()=>{d("❌ Failed to load Google Identity Services"),s("❌ Script loading failed")},document.head.appendChild(t),()=>{let e=document.querySelector('script[src="https://accounts.google.com/gsi/client"]');e&&document.head.contains(e)&&document.head.removeChild(e)}},[]),(0,n.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,n.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:(0,n.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"\uD83D\uDD0D Google OAuth Test & Diagnostics"}),(0,n.jsxs)("div",{className:"mb-6 p-4 rounded-lg bg-blue-50 border border-blue-200",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-blue-900 mb-2",children:"Current Status"}),(0,n.jsx)("p",{className:"text-blue-800",children:e})]}),(0,n.jsxs)("div",{className:"mb-6 p-4 rounded-lg bg-gray-50 border border-gray-200",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Environment Configuration"}),(0,n.jsxs)("div",{className:"space-y-1 text-sm font-mono",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Client ID:"})," ",o.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID||"Not set"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"API Key:"})," ",o.env.NEXT_PUBLIC_GOOGLE_DRIVE_API_KEY?"Set (hidden)":"Not set"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Current Domain:"})," ",window.location.hostname]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Current URL:"})," ",window.location.href]})]})]}),(0,n.jsx)("div",{className:"mb-6",children:(0,n.jsx)("button",{onClick:a,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"\uD83E\uDDEA Test Google OAuth"})}),i&&(0,n.jsxs)("div",{className:"mb-6 p-4 rounded-lg bg-green-50 border border-green-200",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-green-900 mb-2",children:"Token Information"}),(0,n.jsx)("pre",{className:"text-sm bg-white p-3 rounded border overflow-auto",children:JSON.stringify(i,null,2)})]}),(0,n.jsxs)("div",{className:"p-4 rounded-lg bg-gray-50 border border-gray-200",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Test Logs"}),(0,n.jsx)("div",{className:"max-h-64 overflow-y-auto bg-black text-green-400 p-3 rounded font-mono text-sm",children:0===t.length?(0,n.jsx)("p",{children:"No logs yet..."}):t.map((e,s)=>(0,n.jsx)("div",{children:e},s))})]}),(0,n.jsxs)("div",{className:"mt-6 p-4 rounded-lg bg-yellow-50 border border-yellow-200",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold text-yellow-900 mb-2",children:"\uD83D\uDCCB Required Google Cloud Console Settings"}),(0,n.jsxs)("div",{className:"text-yellow-800 space-y-2 text-sm",children:[(0,n.jsx)("p",{children:(0,n.jsx)("strong",{children:"1. OAuth 2.0 Client IDs:"})}),(0,n.jsxs)("ul",{className:"ml-4 list-disc",children:[(0,n.jsx)("li",{children:"Type: Web application"}),(0,n.jsxs)("li",{children:["Authorized JavaScript origins: ",(0,n.jsx)("code",{children:"https://srv875725.hstgr.cloud"})]}),(0,n.jsxs)("li",{children:["Authorized redirect URIs: ",(0,n.jsx)("code",{children:"https://srv875725.hstgr.cloud"})]})]}),(0,n.jsx)("p",{children:(0,n.jsx)("strong",{children:"2. OAuth Consent Screen:"})}),(0,n.jsxs)("ul",{className:"ml-4 list-disc",children:[(0,n.jsx)("li",{children:"Status: Published (not in testing)"}),(0,n.jsx)("li",{children:"User type: External or Internal"}),(0,n.jsx)("li",{children:"Scopes: Google Drive API"})]}),(0,n.jsx)("p",{children:(0,n.jsx)("strong",{children:"3. APIs & Services:"})}),(0,n.jsxs)("ul",{className:"ml-4 list-disc",children:[(0,n.jsx)("li",{children:"Google Drive API: Enabled"}),(0,n.jsx)("li",{children:"Google Identity Services: Enabled"})]})]})]})]})})})}}},function(e){e.O(0,[736,744],function(){return e(e.s=6098)}),_N_E=e.O()}]);