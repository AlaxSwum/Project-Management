(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6840],{5525:function(e,r,t){Promise.resolve().then(t.bind(t,4512))},4512:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return g}});var i=t(7437),n=t(2265),o=t(4033),a=t(3549),s=t(5838),d=t(9186),l=t(2893),c=t(7965),f=t(4438),p=t(9367),x=t(4560);function g(){let{user:e,isAuthenticated:r,isLoading:g}=(0,a.useAuth)(),h=(0,o.useRouter)(),[m,u]=(0,n.useState)([]),[b,y]=(0,n.useState)(!0),[j,v]=(0,n.useState)(""),[w,k]=(0,n.useState)("all");(0,n.useEffect)(()=>{if(!g){if(!r){h.push("/login");return}S()}},[r,g,h,e]);let S=async()=>{if(null==e?void 0:e.id)try{y(!0);let r=(await Promise.resolve().then(t.bind(t,8411))).supabase,{data:i,error:n}=await r.from("notifications").select("*").eq("recipient_id",e.id).order("created_at",{ascending:!1});if(n)throw n;u(i||[])}catch(e){console.error("Error fetching notifications:",e),v("Failed to load notifications")}finally{y(!1)}},_=async e=>{try{let r=(await Promise.resolve().then(t.bind(t,8411))).supabase,{error:i}=await r.from("notifications").update({is_read:!0}).eq("id",e);if(i)throw i;u(m.map(r=>r.id===e?{...r,is_read:!0}:r))}catch(e){console.error("Error marking notification as read:",e)}},F=async()=>{try{let e=(await Promise.resolve().then(t.bind(t,8411))).supabase,r=m.filter(e=>!e.is_read).map(e=>e.id);if(0===r.length)return;let{error:i}=await e.from("notifications").update({is_read:!0}).in("id",r);if(i)throw i;u(m.map(e=>({...e,is_read:!0})))}catch(e){console.error("Error marking all notifications as read:",e)}},C=e=>{switch(e){case"leave_request_submitted":return(0,i.jsx)(s.Z,{style:{width:"20px",height:"20px",color:"#FFB333"}});case"leave_request_approved":return(0,i.jsx)(d.Z,{style:{width:"20px",height:"20px",color:"#10b981"}});case"leave_request_rejected":return(0,i.jsx)(l.Z,{style:{width:"20px",height:"20px",color:"#F87239"}});default:return(0,i.jsx)(c.Z,{style:{width:"20px",height:"20px",color:"#C483D9"}})}},E=e=>{let r=new Date(e),t=new Date,i=(t.getTime()-r.getTime())/36e5;return i<1?"Just now":i<24?"".concat(Math.floor(i),"h ago"):i<48?"Yesterday":r.toLocaleDateString()},R="unread"===w?m.filter(e=>!e.is_read):m;return g||b?(0,i.jsxs)("div",{style:{display:"flex",minHeight:"100vh",background:"#F5F5ED"},children:[(0,i.jsx)(x.Z,{projects:[],onCreateProject:()=>{}}),(0,i.jsx)("div",{style:{marginLeft:"256px",padding:"2rem",background:"#F5F5ED",flex:1,display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:(0,i.jsx)("div",{style:{width:"32px",height:"32px",border:"3px solid #C483D9",borderTop:"3px solid #5884FD",borderRadius:"50%",animation:"spin 1s linear infinite"}})})]}):r?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        "}}),(0,i.jsxs)("div",{style:{display:"flex",minHeight:"100vh",background:"#F5F5ED"},children:[(0,i.jsx)(x.Z,{projects:[],onCreateProject:()=>{}}),(0,i.jsxs)("div",{style:{marginLeft:"256px",padding:"2rem",background:"#F5F5ED",flex:1,minHeight:"100vh"},children:[(0,i.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"3rem",paddingBottom:"1.5rem"},children:(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{style:{fontSize:"2.5rem",fontWeight:"300",margin:"0",color:"#1a1a1a",letterSpacing:"-0.02em"},children:"Inbox"}),(0,i.jsx)("p",{style:{fontSize:"1.1rem",color:"#666666",margin:"0.5rem 0 0 0",lineHeight:"1.5"},children:"Notifications and important updates"})]})}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"3rem"},children:[(0,i.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"2rem",textAlign:"center",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[(0,i.jsx)("div",{style:{fontSize:"2.5rem",fontWeight:"300",color:"#5884FD",marginBottom:"0.5rem"},children:m.length}),(0,i.jsx)("div",{style:{color:"#666666",fontSize:"0.9rem",fontWeight:"500"},children:"Total Notifications"})]}),(0,i.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"2rem",textAlign:"center",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[(0,i.jsx)("div",{style:{fontSize:"2.5rem",fontWeight:"300",color:"#FFB333",marginBottom:"0.5rem"},children:m.filter(e=>!e.is_read).length}),(0,i.jsx)("div",{style:{color:"#666666",fontSize:"0.9rem",fontWeight:"500"},children:"Unread"})]}),(0,i.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"2rem",textAlign:"center",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[(0,i.jsx)("div",{style:{fontSize:"2.5rem",fontWeight:"300",color:"#10b981",marginBottom:"0.5rem"},children:m.filter(e=>e.is_read).length}),(0,i.jsx)("div",{style:{color:"#666666",fontSize:"0.9rem",fontWeight:"500"},children:"Read"})]})]}),(0,i.jsx)("div",{style:{background:"#ffffff",border:"1px solid #e8e8e8",borderRadius:"16px",padding:"2rem",marginBottom:"2rem",boxShadow:"0 2px 16px rgba(0, 0, 0, 0.04)"},children:(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[(0,i.jsxs)("div",{style:{display:"flex",gap:"0.75rem"},children:[(0,i.jsxs)("button",{onClick:()=>k("all"),style:{padding:"0.75rem 1.5rem",background:"all"===w?"#5884FD":"#ffffff",color:"all"===w?"#ffffff":"#666666",border:"1px solid #e0e0e0",borderRadius:"12px",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"all"===w?"0 4px 12px rgba(88, 132, 253, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.1)"},children:["All (",m.length,")"]}),(0,i.jsxs)("button",{onClick:()=>k("unread"),style:{padding:"0.75rem 1.5rem",background:"unread"===w?"#5884FD":"#ffffff",color:"unread"===w?"#ffffff":"#666666",border:"1px solid #e0e0e0",borderRadius:"12px",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"unread"===w?"0 4px 12px rgba(88, 132, 253, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.1)"},children:["Unread (",m.filter(e=>!e.is_read).length,")"]})]}),m.some(e=>!e.is_read)&&(0,i.jsx)("button",{onClick:F,style:{padding:"0.75rem 1.5rem",background:"#FFB333",color:"#ffffff",border:"none",borderRadius:"12px",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(255, 179, 51, 0.3)"},children:"Mark All as Read"})]})}),j&&(0,i.jsx)("div",{style:{background:"#ffffff",border:"1px solid #F87239",borderRadius:"12px",padding:"1rem",marginBottom:"2rem",color:"#F87239",fontWeight:"500",boxShadow:"0 2px 8px rgba(248, 114, 57, 0.1)"},children:j}),(0,i.jsx)("div",{style:{background:"#ffffff",border:"1px solid #e8e8e8",borderRadius:"16px",overflow:"hidden",boxShadow:"0 2px 16px rgba(0, 0, 0, 0.04)"},children:0===R.length?(0,i.jsxs)("div",{style:{textAlign:"center",padding:"4rem 2rem",color:"#999999"},children:[(0,i.jsx)("div",{style:{width:"64px",height:"64px",background:"#f0f0f0",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 2rem"},children:(0,i.jsx)(f.Z,{style:{width:"32px",height:"32px",color:"#999999"}})}),(0,i.jsx)("h3",{style:{fontSize:"1.5rem",fontWeight:"400",margin:"0 0 1rem 0",color:"#1a1a1a",letterSpacing:"-0.01em"},children:"unread"===w?"No Unread Notifications":"No Notifications"}),(0,i.jsx)("p",{style:{fontSize:"1.1rem",margin:"0",lineHeight:"1.5"},children:"unread"===w?"All caught up! No unread notifications at the moment.":"Your inbox is empty. Notifications will appear here when you have updates."})]}):(0,i.jsx)("div",{style:{padding:"1.5rem"},children:R.map(e=>(0,i.jsxs)("div",{onClick:()=>!e.is_read&&_(e.id),style:{display:"flex",alignItems:"flex-start",gap:"1.5rem",padding:"1.5rem",marginBottom:"1rem",background:e.is_read?"#ffffff":"#f8fafc",border:"1px solid ".concat(e.is_read?"#e8e8e8":"#5884FD"),borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 16px rgba(0, 0, 0, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)"},children:[(0,i.jsx)("div",{style:{width:"48px",height:"48px",background:"#f0f0f0",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:C(e.type)}),(0,i.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,i.jsx)("div",{style:{fontSize:"1.1rem",fontWeight:"500",color:"#1a1a1a",marginBottom:"0.5rem",lineHeight:"1.4"},children:e.title}),(0,i.jsx)("div",{style:{fontSize:"0.95rem",color:"#666666",lineHeight:"1.5",marginBottom:"1rem"},children:e.message}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"0.85rem",color:"#999999"},children:[(0,i.jsx)("span",{children:E(e.created_at)}),!e.is_read&&(0,i.jsx)("button",{onClick:r=>{r.stopPropagation(),_(e.id)},style:{background:"transparent",border:"none",color:"#5884FD",cursor:"pointer",padding:"0.25rem",borderRadius:"6px",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.25rem"},title:"Mark as read",children:(0,i.jsx)(p.Z,{style:{width:"16px",height:"16px"}})})]})]})]},e.id))})})]})]})]}):null}},9367:function(e,r,t){"use strict";var i=t(2265);let n=i.forwardRef(function({title:e,titleId:r,...t},n){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":r},t),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))});r.Z=n},2893:function(e,r,t){"use strict";var i=t(2265);let n=i.forwardRef(function({title:e,titleId:r,...t},n){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":r},t),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});r.Z=n}},function(e){e.O(0,[8326,7708,2933,1460,8411,4560,2971,2472,1744],function(){return e(e.s=5525)}),_N_E=e.O()}]);