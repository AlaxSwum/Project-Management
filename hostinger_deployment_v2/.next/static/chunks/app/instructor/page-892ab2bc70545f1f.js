(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6169],{5228:function(e,r,t){Promise.resolve().then(t.bind(t,8114))},8114:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return f},dynamic:function(){return h}});var a=t(7437),n=t(2265),s=t(3549),o=t(8411),i=t(1253),l=t(2929);let d=n.forwardRef(function({title:e,titleId:r,...t},a){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},t),e?n.createElement("title",{id:r},e):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"}))});var c=t(1205),g=t(9649),u=t(1296),m=t(654),p=t(5255),v=t(6610);let h="force-dynamic";function f(){let{user:e}=(0,s.useAuth)(),[r,t]=(0,n.useState)([]),[h,f]=(0,n.useState)(null),[x,y]=(0,n.useState)("students"),[b,j]=(0,n.useState)([]),[w,S]=(0,n.useState)([]),[_,k]=(0,n.useState)(""),[A,E]=(0,n.useState)(null),[M,I]=(0,n.useState)([]),[R,z]=(0,n.useState)([]),[W,P]=(0,n.useState)(!1),[C,B]=(0,n.useState)(""),[F,D]=(0,n.useState)(null),[L,T]=(0,n.useState)(!1),[Z,N]=(0,n.useState)(new Date().toISOString().split("T")[0]);(0,n.useEffect)(()=>{e&&"instructor"!==e.role&&(window.location.href="/dashboard")},[e]),(0,n.useEffect)(()=>{e&&"instructor"===e.role&&O()},[e]),(0,n.useEffect)(()=>{h&&("students"===x?q():"attendance"===x?H():"kpi"===x&&U())},[h,x]),(0,n.useEffect)(()=>{h&&_&&A&&V()},[h,_,A]);let O=async()=>{try{var r;P(!0),console.log("\uD83D\uDCDA Loading classes for instructor:",null==e?void 0:e.id,null==e?void 0:e.name);let{data:a,error:n}=await o.supabase.from("classes_instructors").select("\n          classes!inner (\n            *,\n            classes_folders(name)\n          )\n        ").eq("instructor_id",null==e?void 0:e.id).eq("is_active",!0);if(n){console.error("❌ Error loading instructor classes:",n),B("Error loading classes: ".concat(n.message));return}console.log("\uD83D\uDD0D Raw instructor classes data:",a);let s=(null==a?void 0:null===(r=a.filter(e=>{var r;let t=!(null===(r=e.classes.class_title)||void 0===r?void 0:r.toLowerCase().includes("general training all staff"));return console.log('\uD83D\uDD0D Class "'.concat(e.classes.class_title,'" - Status: ').concat(e.classes.status,", Include: ").concat(t)),t}))||void 0===r?void 0:r.map(e=>{var r;return{...e.classes,folder_name:(null===(r=e.classes.classes_folders)||void 0===r?void 0:r.name)||"No Folder"}}))||[];console.log("\uD83D\uDD0D Classes after filtering:",s);let i=await Promise.all(s.map(async e=>{let{data:r,error:t}=await o.supabase.from("classes_participants").select("id").eq("class_id",e.id);return{...e,current_participants:(null==r?void 0:r.length)||0}}));console.log("\uD83D\uDCDA Final loaded classes:",i),t(i),B("")}catch(e){console.error("\uD83D\uDCA5 Error in loadInstructorClasses:",e),B("Error loading classes")}finally{P(!1)}},q=async()=>{if(h)try{P(!0);let{data:e,error:r}=await o.supabase.from("classes_participants").select("*").eq("class_id",h.id);if(r){console.error("Error loading students:",r),B("Error loading students");return}j(e||[]),B("")}catch(e){console.error("Error loading students:",e),B("Error loading students")}finally{P(!1)}},H=async()=>{if(h)try{P(!0);let{data:e,error:r}=await o.supabase.from("class_attendance_folders").select("id, class_id, attendance_date").eq("class_id",h.id).order("attendance_date",{ascending:!1});if(r&&"PGRST116"!==r.code){console.error("Error loading attendance folders:",r),B("Error loading attendance data");return}if(!e||0===e.length){S([]),B("");return}let t=await Promise.all(e.map(async e=>{let{data:r}=await o.supabase.from("class_daily_attendance").select("status").eq("folder_id",e.id),t=(null==r?void 0:r.filter(e=>"present"===e.status).length)||0,a=(null==r?void 0:r.filter(e=>"absent"===e.status).length)||0,n=(null==r?void 0:r.filter(e=>"late"===e.status).length)||0;return{id:e.id,attendance_date:e.attendance_date,present_count:t,absent_count:a,late_count:n,total_students:t+a+n}}));S(t),B("")}catch(e){console.error("Error loading attendance folders:",e),B("Error loading attendance data")}finally{P(!1)}},V=async()=>{if(h&&_&&A)try{P(!0);let{data:e,error:r}=await o.supabase.from("class_daily_attendance").select("id, student_id, student_name, status, reason").eq("folder_id",A);if(r){console.error("Error loading attendance records:",r),B("Error loading attendance records");return}I(e||[]),B("")}catch(e){console.error("Error loading attendance records:",e),B("Error loading attendance records")}finally{P(!1)}},U=async()=>{if(h)try{P(!0);let{data:e}=await o.supabase.from("classes_participants").select("*").eq("class_id",h.id);if(!e||0===e.length){z([]);return}let r=await Promise.all(e.map(async e=>{let{data:r}=await o.supabase.from("class_attendance_folders").select("id").eq("class_id",h.id),t=(null==r?void 0:r.length)||0;if(0===t)return{student_id:e.id,student_name:e.student_name,total_classes:0,attended_classes:0,attendance_rate:0,absent_excused:0,absent_unexcused:0,recent_trend:"stable"};let{data:a}=await o.supabase.from("class_daily_attendance").select("status, folder_id").eq("student_id",e.id).in("folder_id",(r||[]).map(e=>e.id)),n=(null==a?void 0:a.filter(e=>"present"===e.status).length)||0,s=(null==a?void 0:a.filter(e=>"late"===e.status).length)||0,i=(null==a?void 0:a.filter(e=>"absent"===e.status).length)||0,l=n+.5*s,d=t>0?l/t*100:0,c="stable";return d>=90?c="improving":d<70&&(c="declining"),{student_id:e.id,student_name:e.student_name,total_classes:t,attended_classes:n,late_classes:s,absent_classes:i,attendance_rate:Math.round(100*d)/100,attendance_score:Math.round(100*l)/100,absent_excused:0,absent_unexcused:i,recent_trend:c}}));z(r),B("")}catch(e){console.error("Error loading student KPIs:",e),B("Error loading student KPIs")}finally{P(!1)}},Y=async()=>{if(h&&Z)try{P(!0);let{data:r,error:t}=await o.supabase.from("class_attendance_folders").insert({class_id:h.id,attendance_date:Z,created_by:null==e?void 0:e.id}).select().single();if(t){console.error("Error creating attendance folder:",t),B("Error creating attendance folder: ".concat(t.message));return}let{data:a}=await o.supabase.from("classes_participants").select("*").eq("class_id",h.id);if(!a||0===a.length){B("No students found in this class");return}let n=a.map(t=>({folder_id:r.id,student_id:t.id,student_name:t.student_name,status:"present",reason:null,recorded_by:null==e?void 0:e.id})),{error:s}=await o.supabase.from("class_daily_attendance").insert(n);if(s){console.error("Error creating attendance records:",s),B("Error creating attendance records: ".concat(s.message));return}B("Attendance folder created successfully"),T(!1),N(new Date().toISOString().split("T")[0]),await H(),E(r.id),k(r.attendance_date),await V()}catch(e){console.error("Error creating attendance folder:",e),B("Error creating attendance folder: ".concat(e instanceof Error?e.message:"Unknown error"))}finally{P(!1)}},G=async(e,r)=>{try{D(e);let t=M.find(r=>r.id===e);if(!t){D(null);return}let a=t.status;I(t=>t.map(t=>t.id===e?{...t,status:r}:t)),S(e=>e.map(e=>{if(e.id===A){let t={...e};return"present"===a?t.present_count--:"late"===a?t.late_count--:"absent"===a&&t.absent_count--,"present"===r?t.present_count++:"late"===r?t.late_count++:"absent"===r&&t.absent_count++,t}return e}));let{error:n}=await o.supabase.from("class_daily_attendance").update({status:r}).eq("id",e);if(n){console.error("Error updating attendance:",n),B("Error updating attendance"),I(r=>r.map(r=>r.id===e?{...r,status:a}:r)),S(e=>e.map(e=>{if(e.id===A){let t={...e};return"present"===r?t.present_count--:"late"===r?t.late_count--:"absent"===r&&t.absent_count--,"present"===a?t.present_count++:"late"===a?t.late_count++:"absent"===a&&t.absent_count++,t}return e})),D(null);return}B(""),D(null)}catch(e){console.error("Error updating attendance:",e),B("Error updating attendance"),D(null)}},K=async e=>{if(confirm("Are you sure you want to delete this attendance day? This will also delete all attendance records for this day."))try{P(!0);let{error:r}=await o.supabase.from("class_attendance_folders").delete().eq("id",e);if(r){console.error("Error deleting attendance folder:",r),B("Error deleting attendance folder");return}B("Attendance day deleted successfully"),A===e&&(E(null),k(""),I([])),H()}catch(e){console.error("Error deleting attendance folder:",e),B("Error deleting attendance folder")}finally{P(!1)}},$=async e=>{try{B("Generating certificate for ".concat(e.student_name,"...")),setTimeout(()=>{B("Certificate generated successfully for ".concat(e.student_name,"!"))},2e3)}catch(e){console.error("Error generating certificate:",e),B("Error generating certificate")}};return e?"instructor"!==e.role?(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:"Access denied. Instructor role required."}):(0,a.jsx)("div",{className:"instructor-dashboard",style:{minHeight:"100vh",background:"var(--background)",fontFamily:"'Mabry Pro', 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif",flex:"1",padding:"var(--spacing-xl)"},children:(0,a.jsxs)("div",{style:{background:"var(--surface)",border:"1px solid var(--border)",borderRadius:"var(--radius-2xl)",padding:"var(--spacing-xl)",boxShadow:"var(--shadow-lg)"},children:[(0,a.jsxs)("div",{style:{marginBottom:"var(--spacing-xl)"},children:[(0,a.jsx)("h1",{style:{fontSize:"2rem",fontWeight:"650",color:"var(--text-primary)",marginBottom:"var(--spacing-sm)",fontFamily:"'Mabry Pro', 'Inter', sans-serif",letterSpacing:"-0.025em"},children:"Instructor Dashboard"}),(0,a.jsxs)("p",{style:{color:"var(--text-secondary)",fontSize:"1.125rem",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:["Welcome back, ",e.name,"! Manage your classes and track student progress."]})]}),C&&(0,a.jsx)("div",{style:{padding:"var(--spacing-md)",borderRadius:"var(--radius-lg)",marginBottom:"var(--spacing-lg)",backgroundColor:C.includes("Error")?"rgba(239, 68, 68, 0.15)":"rgba(16, 185, 129, 0.15)",color:C.includes("Error")?"var(--status-blocked)":"var(--status-completed)",border:C.includes("Error")?"1px solid rgba(239, 68, 68, 0.3)":"1px solid rgba(16, 185, 129, 0.3)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:C}),h?(0,a.jsxs)("div",{children:[(0,a.jsx)("button",{onClick:()=>{f(null),y("students")},className:"btn-outline",style:{marginBottom:"var(--spacing-lg)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:"← Back to My Classes"}),(0,a.jsxs)("div",{style:{marginBottom:"var(--spacing-lg)"},children:[(0,a.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:"var(--text-primary)",marginBottom:"var(--spacing-sm)",fontFamily:"'Mabry Pro', 'Inter', sans-serif",letterSpacing:"-0.025em"},children:h.class_title}),(0,a.jsxs)("p",{style:{color:"var(--text-secondary)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:[h.current_participants," students • ",h.class_date," • ",h.start_time," - ",h.end_time]})]}),(0,a.jsx)("div",{style:{display:"flex",gap:"var(--spacing-xs)",marginBottom:"var(--spacing-lg)",backgroundColor:"var(--surface-dark)",padding:"var(--spacing-xs)",borderRadius:"var(--radius-xl)",border:"1px solid var(--border)"},children:[{id:"students",label:"Students",icon:g.Z},{id:"attendance",label:"Attendance",icon:u.Z},{id:"kpi",label:"KPI",icon:m.Z}].map(e=>{let r=e.icon;return(0,a.jsxs)("button",{onClick:()=>y(e.id),style:{flex:"1",display:"flex",alignItems:"center",justifyContent:"center",gap:"var(--spacing-sm)",padding:"var(--spacing-sm) var(--spacing-lg)",borderRadius:"var(--radius-lg)",fontSize:"0.875rem",fontWeight:"600",transition:"all var(--transition-normal)",border:"none",cursor:"pointer",fontFamily:"'Mabry Pro', 'Inter', sans-serif",backgroundColor:x===e.id?"var(--surface)":"transparent",color:x===e.id?"var(--primary)":"var(--text-secondary)",boxShadow:x===e.id?"var(--shadow-sm)":"none"},children:[(0,a.jsx)(r,{style:{height:"1rem",width:"1rem"}}),e.label]},e.id)})}),"students"===x&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"var(--text-primary)",marginBottom:"var(--spacing-md)",fontFamily:"'Mabry Pro', 'Inter', sans-serif",letterSpacing:"-0.025em"},children:"Student List"}),W?(0,a.jsx)("div",{style:{textAlign:"center",padding:"var(--spacing-xl) 0",color:"var(--text-secondary)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:"Loading students..."}):0===b.length?(0,a.jsxs)("div",{style:{textAlign:"center",padding:"var(--spacing-2xl) 0",color:"var(--text-muted)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:[(0,a.jsx)(g.Z,{style:{height:"4rem",width:"4rem",margin:"0 auto var(--spacing-md)",color:"var(--border-dark)"}}),(0,a.jsx)("h4",{style:{fontSize:"1.125rem",fontWeight:"600",marginBottom:"var(--spacing-sm)",color:"var(--text-primary)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:"No Students Enrolled"}),(0,a.jsx)("p",{children:"No students are currently enrolled in this class."})]}):(0,a.jsxs)("div",{style:{background:"var(--surface)",borderRadius:"var(--radius-2xl)",border:"2px solid var(--border)",overflow:"hidden",boxShadow:"var(--shadow-lg)",margin:"0 auto",maxWidth:"100%"},children:[(0,a.jsx)("div",{style:{background:"var(--surface-light)",padding:"var(--spacing-md)",borderBottom:"2px solid var(--border)"},children:(0,a.jsxs)("h4",{style:{fontSize:"1.125rem",fontWeight:"600",color:"var(--text-primary)",textAlign:"center",margin:"0",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:["Class Students (",b.length,")"]})}),(0,a.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:[(0,a.jsx)("thead",{style:{background:"var(--surface-dark)"},children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{style:{padding:"var(--spacing-md)",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-secondary)",borderBottom:"2px solid var(--border)",borderRight:"1px solid var(--border)",textTransform:"uppercase",letterSpacing:"0.025em"},children:"Student Name"}),(0,a.jsx)("th",{style:{padding:"var(--spacing-md)",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-secondary)",borderBottom:"2px solid var(--border)",borderRight:"1px solid var(--border)",textTransform:"uppercase",letterSpacing:"0.025em"},children:"Email"}),(0,a.jsx)("th",{style:{padding:"var(--spacing-md)",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-secondary)",borderBottom:"2px solid var(--border)",borderRight:"1px solid var(--border)",textTransform:"uppercase",letterSpacing:"0.025em"},children:"Phone"}),(0,a.jsx)("th",{style:{padding:"var(--spacing-md)",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-secondary)",borderBottom:"2px solid var(--border)",borderRight:"1px solid var(--border)",textTransform:"uppercase",letterSpacing:"0.025em"},children:"Discord ID"}),(0,a.jsx)("th",{style:{padding:"var(--spacing-md)",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-secondary)",borderBottom:"2px solid var(--border)",textTransform:"uppercase",letterSpacing:"0.025em"},children:"Enrolled Date"})]})}),(0,a.jsx)("tbody",{children:b.map((e,r)=>(0,a.jsxs)("tr",{style:{borderBottom:r<b.length-1?"1px solid var(--border)":"none",transition:"background-color var(--transition-normal)",cursor:"default"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="var(--surface-light)",onMouseLeave:e=>e.currentTarget.style.backgroundColor="transparent",children:[(0,a.jsx)("td",{style:{padding:"var(--spacing-md)",textAlign:"center",color:"var(--text-primary)",fontWeight:"500",borderRight:"1px solid var(--border)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:e.student_name}),(0,a.jsx)("td",{style:{padding:"var(--spacing-md)",textAlign:"center",color:"var(--text-secondary)",borderRight:"1px solid var(--border)",fontFamily:"'Mabry Pro', 'Inter', sans-serif",maxWidth:"280px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:e.email,children:e.email}),(0,a.jsx)("td",{style:{padding:"var(--spacing-md)",textAlign:"center",color:"var(--text-secondary)",borderRight:"1px solid var(--border)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:e.phone_number?e.phone_number:(0,a.jsx)("span",{style:{background:"var(--surface-dark)",color:"var(--text-secondary)",padding:"0.125rem 0.5rem",borderRadius:"9999px",fontSize:"0.75rem",border:"1px solid var(--border)"},children:"N/A"})}),(0,a.jsx)("td",{style:{padding:"var(--spacing-md)",textAlign:"center",color:"var(--text-secondary)",borderRight:"1px solid var(--border)",fontFamily:"'Mabry Pro', 'Inter', sans-serif",maxWidth:"220px",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:e.discord_id||"N/A",children:e.discord_id?e.discord_id:(0,a.jsx)("span",{style:{background:"var(--surface-dark)",color:"var(--text-secondary)",padding:"0.125rem 0.5rem",borderRadius:"9999px",fontSize:"0.75rem",border:"1px solid var(--border)"},children:"N/A"})}),(0,a.jsx)("td",{style:{padding:"var(--spacing-md)",textAlign:"center",color:"var(--text-muted)",fontSize:"0.875rem",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:new Date(e.enrolled_at).toLocaleDateString()})]},e.id))})]})]})]}),"attendance"===x&&(0,a.jsxs)("div",{style:{animation:"fadeIn 0.4s ease-out"},children:[(0,a.jsxs)("div",{style:{background:"var(--surface)",border:"2px solid var(--border)",borderRadius:"var(--radius-2xl)",padding:"var(--spacing-lg)",marginBottom:"var(--spacing-xl)",boxShadow:"var(--shadow-md)",transition:"all var(--transition-normal)"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-sm)",marginBottom:"var(--spacing-md)"},children:[(0,a.jsx)(i.Z,{style:{height:"1.25rem",width:"1.25rem",color:"var(--primary)"}}),(0,a.jsx)("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"var(--text-primary)",margin:0,fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:"Create New Attendance Day"})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"var(--spacing-md)",alignItems:"center"},children:[(0,a.jsx)("input",{type:"date",value:Z,onChange:e=>N(e.target.value),style:{flex:1,padding:"var(--spacing-md)",borderRadius:"var(--radius-lg)",border:"2px solid var(--border)",background:"var(--surface)",color:"var(--text-primary)",fontSize:"1rem",fontFamily:"'Mabry Pro', 'Inter', sans-serif",transition:"all var(--transition-normal)",boxShadow:"var(--shadow-sm)"},onFocus:e=>{e.target.style.borderColor="var(--primary)",e.target.style.boxShadow="0 0 0 3px rgba(255, 179, 51, 0.1), var(--shadow-md)"},onBlur:e=>{e.target.style.borderColor="var(--border)",e.target.style.boxShadow="var(--shadow-sm)"}}),(0,a.jsxs)("button",{onClick:Y,disabled:W,style:{background:W?"var(--text-muted)":"var(--primary)",color:"var(--text-inverse)",padding:"var(--spacing-md) var(--spacing-lg)",borderRadius:"var(--radius-lg)",border:"none",cursor:W?"not-allowed":"pointer",fontWeight:"600",fontSize:"0.875rem",fontFamily:"'Mabry Pro', 'Inter', sans-serif",transition:"all var(--transition-normal)",boxShadow:"var(--shadow-sm)",display:"flex",alignItems:"center",gap:"var(--spacing-sm)"},onMouseEnter:e=>{W||(e.target.style.transform="translateY(-2px)",e.target.style.boxShadow="var(--shadow-lg)")},onMouseLeave:e=>{e.target.style.transform="translateY(0)",e.target.style.boxShadow="var(--shadow-sm)"},children:[(0,a.jsx)(p.Z,{style:{height:"1rem",width:"1rem"}}),W?"Creating...":"Create Attendance Day"]})]})]}),(0,a.jsxs)("div",{style:{marginBottom:"var(--spacing-xl)"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-sm)",marginBottom:"var(--spacing-lg)"},children:[(0,a.jsx)(c.Z,{style:{height:"1.25rem",width:"1.25rem",color:"var(--primary)"}}),(0,a.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"var(--text-primary)",margin:0,fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:"Attendance History"})]}),0===w.length?(0,a.jsxs)("div",{style:{background:"var(--surface)",border:"2px dashed var(--border)",borderRadius:"var(--radius-xl)",padding:"var(--spacing-2xl)",textAlign:"center",color:"var(--text-muted)"},children:[(0,a.jsx)(u.Z,{style:{height:"3rem",width:"3rem",margin:"0 auto var(--spacing-md)",color:"var(--text-muted)"}}),(0,a.jsx)("p",{style:{fontSize:"1rem",fontWeight:"500",marginBottom:"var(--spacing-sm)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:"No attendance days created yet"}),(0,a.jsx)("p",{style:{fontSize:"0.875rem",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:"Create your first attendance day to start tracking student presence."})]}):(0,a.jsx)("div",{style:{background:"var(--surface)",borderRadius:"var(--radius-2xl)",border:"2px solid var(--border)",overflow:"hidden",boxShadow:"var(--shadow-lg)"},children:(0,a.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:[(0,a.jsx)("thead",{style:{background:"var(--surface-dark)"},children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{style:{padding:"var(--spacing-lg)",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.025em"},children:"Date"}),(0,a.jsx)("th",{style:{padding:"var(--spacing-lg)",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.025em"},children:"Day"}),(0,a.jsx)("th",{style:{padding:"var(--spacing-lg)",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.025em"},children:"Present"}),(0,a.jsx)("th",{style:{padding:"var(--spacing-lg)",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.025em"},children:"Late"}),(0,a.jsx)("th",{style:{padding:"var(--spacing-lg)",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.025em"},children:"Absent"}),(0,a.jsx)("th",{style:{padding:"var(--spacing-lg)",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.025em"},children:"Actions"})]})}),(0,a.jsx)("tbody",{children:w.map((e,r)=>(0,a.jsxs)("tr",{style:{borderBottom:r<w.length-1?"1px solid var(--border)":"none",transition:"background-color var(--transition-normal)",animation:"fadeIn 0.4s ease-out ".concat(.05*r,"s both")},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--surface-light)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,a.jsx)("td",{style:{padding:"var(--spacing-lg)",fontSize:"1rem",fontWeight:"500",color:"var(--text-primary)"},children:new Date(e.attendance_date).toLocaleDateString()}),(0,a.jsx)("td",{style:{padding:"var(--spacing-lg)",textAlign:"center",fontSize:"0.875rem",color:"var(--text-secondary)"},children:new Date(e.attendance_date).toLocaleDateString("en-US",{weekday:"long"})}),(0,a.jsx)("td",{style:{padding:"var(--spacing-lg)",textAlign:"center"},children:(0,a.jsx)("span",{style:{padding:"var(--spacing-xs) var(--spacing-sm)",borderRadius:"var(--radius-full)",background:"rgba(16, 185, 129, 0.1)",color:"var(--status-completed)",fontWeight:"600",fontSize:"0.875rem"},children:e.present_count})}),(0,a.jsx)("td",{style:{padding:"var(--spacing-lg)",textAlign:"center"},children:(0,a.jsx)("span",{style:{padding:"var(--spacing-xs) var(--spacing-sm)",borderRadius:"var(--radius-full)",background:"rgba(255, 179, 51, 0.1)",color:"var(--status-in-progress)",fontWeight:"600",fontSize:"0.875rem"},children:e.late_count})}),(0,a.jsx)("td",{style:{padding:"var(--spacing-lg)",textAlign:"center"},children:(0,a.jsx)("span",{style:{padding:"var(--spacing-xs) var(--spacing-sm)",borderRadius:"var(--radius-full)",background:"rgba(239, 68, 68, 0.1)",color:"var(--status-blocked)",fontWeight:"600",fontSize:"0.875rem"},children:e.absent_count})}),(0,a.jsx)("td",{style:{padding:"var(--spacing-lg)",textAlign:"center"},children:(0,a.jsxs)("div",{style:{display:"inline-flex",gap:"var(--spacing-sm)"},children:[(0,a.jsx)("button",{onClick:()=>{E(e.id),k(e.attendance_date)},style:{padding:"var(--spacing-sm) var(--spacing-md)",borderRadius:"var(--radius-lg)",border:"1px solid var(--primary)",background:"var(--primary-soft)",color:"var(--primary)",cursor:"pointer",fontWeight:"600",fontSize:"0.75rem",transition:"all var(--transition-normal)"},onMouseEnter:e=>{e.target.style.background="var(--primary)",e.target.style.color="white"},onMouseLeave:e=>{e.target.style.background="var(--primary-soft)",e.target.style.color="var(--primary)"},children:"View"}),(0,a.jsx)("button",{onClick:()=>K(e.id),style:{padding:"var(--spacing-sm) var(--spacing-md)",borderRadius:"var(--radius-lg)",border:"1px solid var(--status-blocked)",background:"rgba(239, 68, 68, 0.1)",color:"var(--status-blocked)",cursor:"pointer",fontWeight:"600",fontSize:"0.75rem",transition:"all var(--transition-normal)"},onMouseEnter:e=>{e.target.style.background="var(--status-blocked)",e.target.style.color="white"},onMouseLeave:e=>{e.target.style.background="rgba(239, 68, 68, 0.1)",e.target.style.color="var(--status-blocked)"},children:"Delete"})]})})]},e.id))})]})})]}),A&&(0,a.jsxs)("div",{style:{background:"var(--surface)",borderRadius:"var(--radius-2xl)",border:"2px solid var(--border)",overflow:"hidden",boxShadow:"var(--shadow-lg)",animation:"slideUp 0.4s ease-out"},children:[(0,a.jsx)("div",{style:{background:"linear-gradient(135deg, var(--primary), var(--primary-light))",padding:"var(--spacing-lg)",borderBottom:"2px solid var(--border)"},children:(0,a.jsxs)("h4",{style:{margin:0,textAlign:"center",color:"white",fontSize:"1.25rem",fontWeight:"600",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:[new Date(_).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," - Class Attendance"]})}),W?(0,a.jsx)("div",{style:{padding:"var(--spacing-2xl)",textAlign:"center",color:"var(--text-secondary)"},children:"Loading attendance records..."}):(0,a.jsx)("div",{style:{overflow:"auto"},children:(0,a.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:[(0,a.jsx)("thead",{style:{background:"var(--surface-dark)"},children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{style:{padding:"var(--spacing-lg)",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.025em"},children:"Student Name"}),(0,a.jsx)("th",{style:{padding:"var(--spacing-lg)",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.025em"},children:"Current Status"}),(0,a.jsx)("th",{style:{padding:"var(--spacing-lg)",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.025em"},children:"Update Status"})]})}),(0,a.jsx)("tbody",{children:M.map((e,r)=>(0,a.jsxs)("tr",{style:{borderBottom:r<M.length-1?"1px solid var(--border)":"none",transition:"background-color var(--transition-normal)",animation:"fadeIn 0.4s ease-out ".concat(.05*r,"s both")},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--surface-light)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,a.jsx)("td",{style:{padding:"var(--spacing-lg)",fontSize:"1rem",fontWeight:"500",color:"var(--text-primary)"},children:e.student_name}),(0,a.jsx)("td",{style:{padding:"var(--spacing-lg)",textAlign:"center"},children:(0,a.jsx)("span",{style:{padding:"var(--spacing-sm) var(--spacing-md)",borderRadius:"var(--radius-full)",border:"2px solid",background:"present"===e.status?"rgba(16, 185, 129, 0.1)":"late"===e.status?"rgba(255, 179, 51, 0.1)":"rgba(239, 68, 68, 0.1)",borderColor:"present"===e.status?"var(--status-completed)":"late"===e.status?"var(--status-in-progress)":"var(--status-blocked)",color:"present"===e.status?"var(--status-completed)":"late"===e.status?"var(--status-in-progress)":"var(--status-blocked)",fontWeight:"600",fontSize:"0.875rem",textTransform:"uppercase",letterSpacing:"0.025em"},children:e.status})}),(0,a.jsxs)("td",{style:{padding:"var(--spacing-lg)",textAlign:"center"},children:[(0,a.jsxs)("select",{value:e.status,onChange:r=>{r.preventDefault(),G(e.id,r.target.value)},disabled:F===e.id,style:{padding:"var(--spacing-sm) var(--spacing-md)",borderRadius:"var(--radius-lg)",border:"2px solid var(--border)",background:F===e.id?"var(--surface-dark)":"var(--surface)",color:F===e.id?"var(--text-muted)":"var(--text-primary)",cursor:F===e.id?"wait":"pointer",fontWeight:"600",fontSize:"0.875rem",fontFamily:"'Mabry Pro', 'Inter', sans-serif",transition:"all var(--transition-normal)",boxShadow:"var(--shadow-sm)",minWidth:"100px",opacity:F===e.id?.7:1},onFocus:r=>{F!==e.id&&(r.target.style.borderColor="var(--primary)",r.target.style.boxShadow="0 0 0 3px rgba(255, 179, 51, 0.1), var(--shadow-md)")},onBlur:e=>{e.target.style.borderColor="var(--border)",e.target.style.boxShadow="var(--shadow-sm)"},children:[(0,a.jsx)("option",{value:"present",children:"Present"}),(0,a.jsx)("option",{value:"late",children:"Late"}),(0,a.jsx)("option",{value:"absent",children:"Absent"})]}),F===e.id&&(0,a.jsx)("div",{style:{position:"absolute",marginLeft:"var(--spacing-sm)",fontSize:"0.75rem",color:"var(--primary)",fontWeight:"500"},children:"Updating..."})]})]},e.id))})]})})]})]}),"kpi"===x&&(0,a.jsxs)("div",{style:{animation:"fadeIn 0.4s ease-out"},children:[(0,a.jsxs)("div",{style:{background:"linear-gradient(135deg, var(--primary), var(--primary-light))",borderRadius:"var(--radius-2xl)",padding:"var(--spacing-xl)",marginBottom:"var(--spacing-xl)",boxShadow:"var(--shadow-lg)",border:"1px solid var(--border)"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-md)",marginBottom:"var(--spacing-sm)"},children:[(0,a.jsx)(m.Z,{style:{height:"2rem",width:"2rem",color:"white"}}),(0,a.jsx)("h3",{style:{fontSize:"1.75rem",fontWeight:"700",color:"white",margin:0,fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:"Student Performance Analytics"})]}),(0,a.jsx)("p",{style:{fontSize:"1rem",color:"rgba(255, 255, 255, 0.9)",margin:0,fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:"Individual student attendance tracking with automated grading and certificate eligibility"})]}),(0,a.jsxs)("div",{style:{background:"var(--surface)",border:"2px solid var(--border)",borderRadius:"var(--radius-xl)",padding:"var(--spacing-lg)",marginBottom:"var(--spacing-xl)",boxShadow:"var(--shadow-sm)"},children:[(0,a.jsx)("h4",{style:{fontSize:"1.125rem",fontWeight:"600",color:"var(--text-primary)",marginBottom:"var(--spacing-md)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:"Grading Criteria"}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"var(--spacing-md)"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-sm)",padding:"var(--spacing-sm)",borderRadius:"var(--radius-lg)",background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)"},children:[(0,a.jsx)("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"var(--status-completed)"}}),(0,a.jsx)("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:"var(--status-completed)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:"Present = 1.0 point"})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-sm)",padding:"var(--spacing-sm)",borderRadius:"var(--radius-lg)",background:"rgba(255, 179, 51, 0.1)",border:"1px solid rgba(255, 179, 51, 0.3)"},children:[(0,a.jsx)("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"var(--status-in-progress)"}}),(0,a.jsx)("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:"var(--status-in-progress)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:"Late = 0.5 points"})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-sm)",padding:"var(--spacing-sm)",borderRadius:"var(--radius-lg)",background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)"},children:[(0,a.jsx)("div",{style:{width:"12px",height:"12px",borderRadius:"50%",background:"var(--status-blocked)"}}),(0,a.jsx)("span",{style:{fontSize:"0.875rem",fontWeight:"600",color:"var(--status-blocked)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:"Absent = 0.0 points"})]})]})]}),W?(0,a.jsx)("div",{style:{background:"var(--surface)",borderRadius:"var(--radius-2xl)",border:"2px solid var(--border)",padding:"var(--spacing-2xl)",textAlign:"center",boxShadow:"var(--shadow-lg)"},children:(0,a.jsx)("div",{style:{fontSize:"1.125rem",color:"var(--text-secondary)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:"Loading student performance data..."})}):0===R.length?(0,a.jsxs)("div",{style:{background:"var(--surface)",border:"2px dashed var(--border)",borderRadius:"var(--radius-2xl)",padding:"var(--spacing-2xl)",textAlign:"center",color:"var(--text-muted)"},children:[(0,a.jsx)(m.Z,{style:{height:"4rem",width:"4rem",margin:"0 auto var(--spacing-md)",color:"var(--text-muted)"}}),(0,a.jsx)("p",{style:{fontSize:"1.125rem",fontWeight:"500",marginBottom:"var(--spacing-sm)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:"No attendance data available"}),(0,a.jsx)("p",{style:{fontSize:"0.875rem",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:"Create attendance days to start tracking student performance."})]}):(0,a.jsxs)("div",{style:{background:"var(--surface)",borderRadius:"var(--radius-2xl)",border:"2px solid var(--border)",overflow:"hidden",boxShadow:"var(--shadow-lg)"},children:[(0,a.jsx)("div",{style:{background:"var(--surface-dark)",padding:"var(--spacing-lg)",borderBottom:"2px solid var(--border)"},children:(0,a.jsx)("h4",{style:{margin:0,textAlign:"center",fontSize:"1.25rem",fontWeight:"600",color:"var(--text-primary)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:"Individual Student Performance Report"})}),(0,a.jsx)("div",{style:{overflow:"auto"},children:(0,a.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:[(0,a.jsx)("thead",{style:{background:"var(--surface-light)"},children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{style:{padding:"var(--spacing-lg)",textAlign:"left",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.025em",borderBottom:"1px solid var(--border)",borderRight:"1px solid var(--border)"},children:"Student Name"}),(0,a.jsx)("th",{style:{padding:"var(--spacing-lg)",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.025em",borderBottom:"1px solid var(--border)",borderRight:"1px solid var(--border)"},children:"Total Days"}),(0,a.jsx)("th",{style:{padding:"var(--spacing-lg)",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.025em",borderBottom:"1px solid var(--border)",borderRight:"1px solid var(--border)"},children:"Present"}),(0,a.jsx)("th",{style:{padding:"var(--spacing-lg)",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.025em",borderBottom:"1px solid var(--border)",borderRight:"1px solid var(--border)"},children:"Late"}),(0,a.jsx)("th",{style:{padding:"var(--spacing-lg)",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.025em",borderBottom:"1px solid var(--border)",borderRight:"1px solid var(--border)"},children:"Absent"}),(0,a.jsx)("th",{style:{padding:"var(--spacing-lg)",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.025em",borderBottom:"1px solid var(--border)",borderRight:"1px solid var(--border)"},children:"Score"}),(0,a.jsx)("th",{style:{padding:"var(--spacing-lg)",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.025em",borderBottom:"1px solid var(--border)",borderRight:"1px solid var(--border)"},children:"Percentage"}),(0,a.jsx)("th",{style:{padding:"var(--spacing-lg)",textAlign:"center",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-secondary)",textTransform:"uppercase",letterSpacing:"0.025em",borderBottom:"1px solid var(--border)"},children:"Actions"})]})}),(0,a.jsx)("tbody",{children:R.map((e,r)=>(0,a.jsxs)("tr",{style:{borderBottom:r<R.length-1?"1px solid var(--border)":"none",transition:"background-color var(--transition-normal)",animation:"fadeIn 0.4s ease-out ".concat(.05*r,"s both")},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="var(--surface-light)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="transparent"},children:[(0,a.jsx)("td",{style:{padding:"var(--spacing-lg)",fontSize:"1rem",fontWeight:"500",color:"var(--text-primary)",borderRight:"1px solid var(--border)"},children:e.student_name}),(0,a.jsx)("td",{style:{padding:"var(--spacing-lg)",textAlign:"center",borderRight:"1px solid var(--border)",fontSize:"0.875rem",color:"var(--text-secondary)"},children:e.total_classes}),(0,a.jsx)("td",{style:{padding:"var(--spacing-lg)",textAlign:"center",borderRight:"1px solid var(--border)"},children:(0,a.jsx)("span",{style:{padding:"var(--spacing-xs) var(--spacing-sm)",borderRadius:"var(--radius-full)",background:"rgba(16, 185, 129, 0.1)",color:"var(--status-completed)",fontWeight:"600",fontSize:"0.875rem"},children:e.attended_classes})}),(0,a.jsx)("td",{style:{padding:"var(--spacing-lg)",textAlign:"center",borderRight:"1px solid var(--border)"},children:(0,a.jsx)("span",{style:{padding:"var(--spacing-xs) var(--spacing-sm)",borderRadius:"var(--radius-full)",background:"rgba(255, 179, 51, 0.1)",color:"var(--status-in-progress)",fontWeight:"600",fontSize:"0.875rem"},children:e.late_classes||0})}),(0,a.jsx)("td",{style:{padding:"var(--spacing-lg)",textAlign:"center",borderRight:"1px solid var(--border)"},children:(0,a.jsx)("span",{style:{padding:"var(--spacing-xs) var(--spacing-sm)",borderRadius:"var(--radius-full)",background:"rgba(239, 68, 68, 0.1)",color:"var(--status-blocked)",fontWeight:"600",fontSize:"0.875rem"},children:e.absent_classes||0})}),(0,a.jsxs)("td",{style:{padding:"var(--spacing-lg)",textAlign:"center",borderRight:"1px solid var(--border)",fontSize:"0.875rem",fontWeight:"600",color:"var(--text-primary)"},children:[e.attendance_score||0," / ",e.total_classes]}),(0,a.jsx)("td",{style:{padding:"var(--spacing-lg)",textAlign:"center",borderRight:"1px solid var(--border)"},children:(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"var(--spacing-xs)"},children:[(0,a.jsxs)("span",{style:{fontSize:"1.125rem",fontWeight:"700",color:e.attendance_rate>=85?"var(--status-completed)":e.attendance_rate>=70?"var(--status-in-progress)":"var(--status-blocked)"},children:[e.attendance_rate.toFixed(1),"%"]}),(0,a.jsx)("div",{style:{width:"60px",height:"6px",borderRadius:"var(--radius-full)",background:"var(--border-light)",overflow:"hidden"},children:(0,a.jsx)("div",{style:{width:"".concat(Math.min(e.attendance_rate,100),"%"),height:"100%",background:e.attendance_rate>=85?"var(--status-completed)":e.attendance_rate>=70?"var(--status-in-progress)":"var(--status-blocked)",transition:"width var(--transition-normal)"}})})]})}),(0,a.jsx)("td",{style:{padding:"var(--spacing-lg)",textAlign:"center"},children:e.attendance_rate>=85?(0,a.jsxs)("button",{onClick:()=>$(e),style:{padding:"var(--spacing-sm) var(--spacing-md)",borderRadius:"var(--radius-lg)",border:"1px solid var(--status-completed)",background:"rgba(16, 185, 129, 0.1)",color:"var(--status-completed)",cursor:"pointer",fontWeight:"600",fontSize:"0.75rem",transition:"all var(--transition-normal)",display:"flex",alignItems:"center",gap:"var(--spacing-xs)"},onMouseEnter:e=>{e.target.style.background="var(--status-completed)",e.target.style.color="white"},onMouseLeave:e=>{e.target.style.background="rgba(16, 185, 129, 0.1)",e.target.style.color="var(--status-completed)"},children:[(0,a.jsx)(v.Z,{style:{height:"1rem",width:"1rem"}}),"Certificate"]}):(0,a.jsx)("span",{style:{padding:"var(--spacing-sm) var(--spacing-md)",borderRadius:"var(--radius-lg)",background:"var(--surface-dark)",color:"var(--text-muted)",fontSize:"0.75rem",fontWeight:"500"},children:"Need 85%+"})})]},e.student_id))})]})})]})]})]}):(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{style:{fontSize:"1.75rem",fontWeight:"600",color:"var(--text-primary)",marginBottom:"var(--spacing-lg)",fontFamily:"'Mabry Pro', 'Inter', sans-serif",letterSpacing:"-0.025em"},children:"My Classes"}),W?(0,a.jsx)("div",{style:{textAlign:"center",padding:"var(--spacing-xl) 0",fontFamily:"'Mabry Pro', 'Inter', sans-serif",color:"var(--text-secondary)"},children:"Loading classes..."}):0===r.length?(0,a.jsxs)("div",{style:{textAlign:"center",padding:"var(--spacing-2xl) 0",color:"var(--text-muted)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:[(0,a.jsx)("div",{style:{fontSize:"3rem",marginBottom:"var(--spacing-md)"},children:"\uD83D\uDCDA"}),(0,a.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"var(--spacing-sm)",color:"var(--text-primary)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:"No Classes Assigned"}),(0,a.jsx)("p",{children:"You don't have any classes assigned yet. Contact your administrator."})]}):(0,a.jsx)("div",{className:"grid-responsive-3",style:{gap:"var(--spacing-lg)"},children:r.map(e=>(0,a.jsxs)("div",{onClick:()=>f(e),className:"card-hover",style:{background:"var(--surface)",border:"1px solid var(--border)",borderRadius:"var(--radius-xl)",padding:"var(--spacing-lg)",boxShadow:"var(--shadow-sm)",cursor:"pointer",transition:"all var(--transition-normal)",fontFamily:"'Mabry Pro', 'Inter', sans-serif",position:"relative",overflow:"hidden"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"flex-start",justifyContent:"space-between",marginBottom:"var(--spacing-sm)"},children:[(0,a.jsx)("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"var(--text-primary)",lineHeight:"1.25",flex:"1",marginRight:"var(--spacing-sm)",fontFamily:"'Mabry Pro', 'Inter', sans-serif",letterSpacing:"-0.025em"},children:e.class_title}),(0,a.jsx)("span",{className:"status-badge",style:{fontSize:"0.75rem",fontWeight:"600",color:"var(--text-secondary)",backgroundColor:"var(--surface-dark)",padding:"var(--spacing-xs) var(--spacing-sm)",borderRadius:"var(--radius-full)",border:"1px solid var(--border)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:e.status})]}),(0,a.jsxs)("div",{style:{marginBottom:"var(--spacing-md)"},children:[(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"var(--spacing-sm)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:[(0,a.jsx)(i.Z,{style:{height:"1rem",width:"1rem",marginRight:"var(--spacing-sm)"}}),e.class_date]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"var(--spacing-sm)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:[(0,a.jsx)(l.Z,{style:{height:"1rem",width:"1rem",marginRight:"var(--spacing-sm)"}}),e.start_time," - ",e.end_time]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"var(--spacing-sm)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:[(0,a.jsx)(d,{style:{height:"1rem",width:"1rem",marginRight:"var(--spacing-sm)"}}),e.location]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",fontSize:"0.875rem",color:"var(--text-secondary)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:[(0,a.jsx)(c.Z,{style:{height:"1rem",width:"1rem",marginRight:"var(--spacing-sm)"}}),e.folder_name]})]}),(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,a.jsxs)("div",{style:{fontSize:"0.875rem",color:"var(--text-primary)",fontFamily:"'Mabry Pro', 'Inter', sans-serif"},children:[(0,a.jsx)("span",{style:{fontWeight:"600"},children:e.current_participants}),(0,a.jsxs)("span",{style:{color:"var(--text-muted)"},children:[" / ",e.max_participants," students"]})]}),(0,a.jsx)("button",{className:"btn-primary-solid",style:{background:"var(--primary)",color:"var(--text-inverse)",padding:"var(--spacing-sm) var(--spacing-md)",borderRadius:"var(--radius-lg)",fontSize:"0.875rem",fontWeight:"600",border:"none",cursor:"pointer",transition:"all var(--transition-normal)",fontFamily:"'Mabry Pro', 'Inter', sans-serif",boxShadow:"var(--shadow-sm)"},children:"Manage"})]})]},e.id))})]})]})}):(0,a.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:"Loading..."})}},3549:function(e,r,t){"use strict";t.r(r),t.d(r,{AuthProvider:function(){return l},useAuth:function(){return i}});var a=t(7437),n=t(2265),s=t(8411);let o=(0,n.createContext)(void 0),i=()=>{let e=(0,n.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},l=e=>{let{children:r}=e,[t,i]=(0,n.useState)(null),[l,d]=(0,n.useState)(!0),[c,g]=(0,n.useState)(!1);(0,n.useEffect)(()=>{g(!0)},[]),(0,n.useEffect)(()=>{if(!c)return;let e=async()=>{try{console.log("Starting auth initialization..."),await new Promise(e=>setTimeout(e,50));let{user:n,error:o}=await s.supabaseAuth.getUser();if(console.log("Auth result:",{currentUser:n,error:o}),n&&!o){var e,r,t,a;let s={id:n.id,email:n.email,name:(null===(e=n.user_metadata)||void 0===e?void 0:e.name)||n.email,phone:(null===(r=n.user_metadata)||void 0===r?void 0:r.phone)||"",role:(null===(t=n.user_metadata)||void 0===t?void 0:t.role)||"member",position:(null===(a=n.user_metadata)||void 0===a?void 0:a.position)||"",date_joined:new Date().toISOString()};i(s),console.log("User set:",s)}else console.log("No user found or error occurred")}catch(e){console.error("Auth initialization error:",e)}finally{console.log("Setting isLoading to false"),d(!1)}},r=setTimeout(()=>{console.warn("Auth initialization timeout, proceeding without auth"),d(!1)},3e3),t=setTimeout(()=>{e().finally(()=>{clearTimeout(r)})},100);return()=>{clearTimeout(r),clearTimeout(t)}},[c]);let u=async(e,r)=>{try{console.log("Attempting login for:",e);let{user:l,error:d}=await s.supabaseAuth.signIn(e,r);if(d)throw console.error("Login error:",d),Error(d instanceof Error?d.message:"Login failed");if(l){var t,a,n,o;let e={id:l.id,email:l.email,name:(null===(t=l.user_metadata)||void 0===t?void 0:t.name)||l.email,phone:(null===(a=l.user_metadata)||void 0===a?void 0:a.phone)||"",role:(null===(n=l.user_metadata)||void 0===n?void 0:n.role)||"member",position:(null===(o=l.user_metadata)||void 0===o?void 0:o.position)||"",date_joined:new Date().toISOString()};i(e),console.log("Login successful:",e)}}catch(e){throw console.error("Login failed:",e),Error(e.message||"Login failed")}},m=async e=>{throw Error("Registration is disabled. Please contact an administrator.")},p=async()=>{try{await s.supabaseAuth.signOut(),i(null)}catch(e){console.error("Logout error:",e),i(null)}};return(0,a.jsx)(o.Provider,{value:{user:t,isLoading:l,login:u,register:m,logout:p,isAuthenticated:!!t},children:r})}},622:function(e,r,t){"use strict";var a=t(2265),n=Symbol.for("react.element"),s=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function d(e,r,t){var a,s={},d=null,c=null;for(a in void 0!==t&&(d=""+t),void 0!==r.key&&(d=""+r.key),void 0!==r.ref&&(c=r.ref),r)o.call(r,a)&&!l.hasOwnProperty(a)&&(s[a]=r[a]);if(e&&e.defaultProps)for(a in r=e.defaultProps)void 0===s[a]&&(s[a]=r[a]);return{$$typeof:n,type:e,key:d,ref:c,props:s,_owner:i.current}}r.Fragment=s,r.jsx=d,r.jsxs=d},7437:function(e,r,t){"use strict";e.exports=t(622)},1253:function(e,r,t){"use strict";var a=t(2265);let n=a.forwardRef(function({title:e,titleId:r,...t},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":r},t),e?a.createElement("title",{id:r},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))});r.Z=n},654:function(e,r,t){"use strict";var a=t(2265);let n=a.forwardRef(function({title:e,titleId:r,...t},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":r},t),e?a.createElement("title",{id:r},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))});r.Z=n},1296:function(e,r,t){"use strict";var a=t(2265);let n=a.forwardRef(function({title:e,titleId:r,...t},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":r},t),e?a.createElement("title",{id:r},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h3.75M9 15h3.75M9 18h3.75m3 .75H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08m-5.801 0c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 0 0 .75-.75 2.25 2.25 0 0 0-.1-.664m-5.8 0A2.251 2.251 0 0 1 13.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m0 0H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V9.375c0-.621-.504-1.125-1.125-1.125H8.25ZM6.75 12h.008v.008H6.75V12Zm0 3h.008v.008H6.75V15Zm0 3h.008v.008H6.75V18Z"}))});r.Z=n},2929:function(e,r,t){"use strict";var a=t(2265);let n=a.forwardRef(function({title:e,titleId:r,...t},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":r},t),e?a.createElement("title",{id:r},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});r.Z=n},6610:function(e,r,t){"use strict";var a=t(2265);let n=a.forwardRef(function({title:e,titleId:r,...t},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":r},t),e?a.createElement("title",{id:r},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))});r.Z=n},1205:function(e,r,t){"use strict";var a=t(2265);let n=a.forwardRef(function({title:e,titleId:r,...t},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":r},t),e?a.createElement("title",{id:r},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))});r.Z=n},5255:function(e,r,t){"use strict";var a=t(2265);let n=a.forwardRef(function({title:e,titleId:r,...t},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":r},t),e?a.createElement("title",{id:r},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});r.Z=n},9649:function(e,r,t){"use strict";var a=t(2265);let n=a.forwardRef(function({title:e,titleId:r,...t},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":r},t),e?a.createElement("title",{id:r},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))});r.Z=n}},function(e){e.O(0,[7708,8411,2971,2472,1744],function(){return e(e.s=5228)}),_N_E=e.O()}]);