(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9617],{1874:function(e,t,r){Promise.resolve().then(r.bind(r,6263))},6263:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var i=r(7437),o=r(2265),n=r(4033),a=r(3549),l=r(2929),s=r(1253),d=r(5255),c=r(3152);function p(){let{user:e,isAuthenticated:t,isLoading:p}=(0,a.useAuth)(),u=(0,n.useRouter)(),[m,g]=(0,o.useState)([]),[f,h]=(0,o.useState)([]),[x,y]=(0,o.useState)([]),[b,v]=(0,o.useState)(new Date),[j,S]=(0,o.useState)(!0),[w,E]=(0,o.useState)(""),[k,_]=(0,o.useState)(""),[B,F]=(0,o.useState)(!1),[D,C]=(0,o.useState)(!1),[z,R]=(0,o.useState)("15min"),[I,W]=(0,o.useState)(null),[T,A]=(0,o.useState)(null),[O,L]=(0,o.useState)({title:"",description:"",priority:"medium",category:"",color:"#3B82F6",start_date:new Date().toISOString().split("T")[0],start_time:"09:00",end_date:new Date().toISOString().split("T")[0],end_time:"10:00"}),[P,H]=(0,o.useState)([]),[M,N]=(0,o.useState)("");(0,o.useEffect)(()=>{let e=()=>{F(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,o.useEffect)(()=>{if(!p){if(!t){u.push("/login");return}U(),Z(),q()}},[t,p,u,b]);let U=async()=>{try{var t,i;S(!0);let o=(await Promise.resolve().then(r.bind(r,8411))).supabase,n=new Date(b);n.setDate(b.getDate()-7);let a=new Date(b);a.setDate(b.getDate()+7);let{data:l,error:s}=await o.from("projects_meeting").select("*").or("created_by_id.eq.".concat(parseInt((null==e?void 0:null===(t=e.id)||void 0===t?void 0:t.toString())||"0"),",attendee_ids.cs.{").concat(parseInt((null==e?void 0:null===(i=e.id)||void 0===i?void 0:i.toString())||"0"),"}")).gte("date",n.toISOString().split("T")[0]).lte("date",a.toISOString().split("T")[0]).order("date",{ascending:!0}).order("time",{ascending:!0});if(s)throw s;let d=(l||[]).map(e=>{let t=new Date("".concat(e.date,"T").concat(e.time)),r=new Date(t.getTime()+6e4*e.duration);return{id:e.id,title:e.title,description:e.description||"",start_datetime:t.toISOString(),end_datetime:r.toISOString(),all_day:e.all_day||!1,location:e.location||"",event_type:e.event_type||"meeting",priority:"medium",status:"confirmed",color:e.color||"#3B82F6",item_type:"task"===e.event_type?"task":"event",completion_percentage:void 0}});g(d)}catch(e){console.error("Error fetching calendar data:",e),E("Failed to load calendar data")}finally{S(!1)}},Z=async()=>{try{var t;console.log("\uD83D\uDD0D Fetching unscheduled tasks for user:",null==e?void 0:e.id);let i=(await Promise.resolve().then(r.bind(r,8411))).supabase,o=parseInt((null==e?void 0:null===(t=e.id)||void 0===t?void 0:t.toString())||"0");console.log("\uD83D\uDD0D Using integer user ID:",o);let{data:n,error:a}=await i.from("projects_meeting").select("*").eq("created_by_id",o).eq("event_type","task").order("created_at",{ascending:!1});if(console.log("\uD83D\uDCCA Supabase response:",{data:n,error:a}),a){console.error("Supabase error:",a);return}let l=(n||[]).map(e=>({id:e.id,title:e.title,description:e.description||"",priority:"medium",status:"todo",color:e.color||"#3B82F6",category:"personal"}));console.log("âœ… Transformed tasks:",l),h(l)}catch(e){console.error("Error fetching unscheduled tasks:",e)}},q=async()=>{try{let e=await c.projectService.getProjects();y(e||[])}catch(e){console.error("Error fetching projects:",e),y([])}},Y=async()=>{try{var t,i;if(!O.title.trim()){E("Please enter a task title");return}let o=(await Promise.resolve().then(r.bind(r,8411))).supabase,n=60*parseInt(O.start_time.split(":")[0])+parseInt(O.start_time.split(":")[1]),a=60*parseInt(O.end_time.split(":")[0])+parseInt(O.end_time.split(":")[1]),l=a-n;l<0&&(l+=1440);let{data:s,error:d}=await o.from("projects_meeting").insert([{title:O.title,description:O.description,date:O.start_date,time:O.start_time,duration:l,event_type:"task",color:O.color,created_by_id:parseInt((null==e?void 0:null===(t=e.id)||void 0===t?void 0:t.toString())||"0"),attendee_ids:[parseInt((null==e?void 0:null===(i=e.id)||void 0===i?void 0:i.toString())||"0")]}]).select().single();if(d)throw d;if(P.length>0&&s){let t=P.map((t,r)=>{var i;return{task_id:s.id,user_id:parseInt((null==e?void 0:null===(i=e.id)||void 0===i?void 0:i.toString())||"0"),item_text:t.item_text,is_completed:t.is_completed,item_order:r}}),{error:r}=await o.from("task_checklist_items").insert(t);r&&console.error("Error saving checklist items:",r)}await U(),await Z(),L({title:"",description:"",priority:"medium",category:"",color:"#3B82F6",start_date:new Date().toISOString().split("T")[0],start_time:"09:00",end_date:new Date().toISOString().split("T")[0],end_time:"10:00"}),H([]),N(""),C(!1),_("Task created successfully!"),E(""),setTimeout(()=>_(""),3e3)}catch(e){console.error("Error creating task:",e),E("Failed to create task: "+e.message)}},V=()=>{M.trim()&&(H([...P,{item_text:M.trim(),is_completed:!1,item_order:P.length}]),N(""))},$=e=>{H(P.filter((t,r)=>r!==e))},K=e=>{H(P.map((t,r)=>r===e?{...t,is_completed:!t.is_completed}:t))},G=e=>{W(e)},J=()=>{W(null),A(null)},Q=function(e,t,r){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;e.preventDefault(),I&&A({date:t,hour:r,minute:i})},X=async function(t,i,o){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(t.preventDefault(),I)try{var a;let t=new Date(i);t.setHours(o,n,0,0);let l=(await Promise.resolve().then(r.bind(r,8411))).supabase;await l.from("projects_meeting").update({date:t.toISOString().split("T")[0],time:t.toISOString().split("T")[1].substring(0,5),duration:60}).eq("id",I.id).eq("created_by_id",parseInt((null==e?void 0:null===(a=e.id)||void 0===a?void 0:a.toString())||"0")),await U(),await Z(),_("Task scheduled successfully!"),setTimeout(()=>_(""),3e3)}catch(e){console.error("Error scheduling task:",e),E("Failed to schedule task: "+e.message)}finally{W(null),A(null)}};return p||j?(0,i.jsx)("div",{style:{padding:B?"1rem":"2rem",background:"#F8FAFC",flex:1,display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:(0,i.jsx)("div",{style:{width:"40px",height:"40px",border:"4px solid #E5E7EB",borderTop:"4px solid #3B82F6",borderRadius:"50%",animation:"spin 1s linear infinite"}})}):t?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n          \n          .task-card {\n            background: white;\n            border-radius: 16px;\n            padding: 20px;\n            margin-bottom: 16px;\n            border-left: 4px solid #3B82F6;\n            box-shadow: 0 4px 12px rgba(0,0,0,0.08);\n            transition: all 0.3s ease;\n            border: 1px solid #E2E8F0;\n            position: relative;\n          }\n          \n          .task-card:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 8px 24px rgba(0,0,0,0.12);\n          }\n          \n          .priority-high { border-left-color: #EF4444; }\n          .priority-medium { border-left-color: #F59E0B; }\n          .priority-low { border-left-color: #10B981; }\n          .priority-urgent { border-left-color: #8B5CF6; }\n          \n          .status-completed { opacity: 0.7; }\n          .status-completed .task-title { text-decoration: line-through; }\n        "}}),(0,i.jsxs)("div",{style:{padding:B?"1rem":"2rem",background:"#F8FAFC",flex:1,minHeight:"100vh"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",flexWrap:"wrap",gap:"1rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{style:{fontSize:B?"2rem":"2.5rem",fontWeight:"700",margin:"0",color:"#1F2937",letterSpacing:"-0.02em"},children:"Personal Task Management"}),(0,i.jsx)("p",{style:{fontSize:"1.1rem",color:"#6B7280",margin:"0.5rem 0 0 0",lineHeight:"1.5"},children:"Manage your personal tasks with 15-minute timeblocking - Build 2024"})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},children:[(0,i.jsx)("div",{style:{display:"flex",background:"#ffffff",borderRadius:"12px",padding:"4px",boxShadow:"0 2px 8px rgba(0,0,0,0.08)"},children:[{type:"list",icon:"",label:"List"},{type:"calendar",icon:"",label:"Calendar"},{type:"15min",icon:"",label:"15 Min"}].map(e=>{let{type:t,icon:r,label:o}=e;return(0,i.jsxs)("button",{onClick:()=>R(t),style:{padding:"0.5rem 1rem",background:z===t?"#3B82F6":"transparent",color:z===t?"#ffffff":"#6B7280",border:"none",borderRadius:"8px",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.25rem"},children:[(0,i.jsx)("span",{children:r}),!B&&(0,i.jsx)("span",{children:o})]},t)})}),(0,i.jsxs)("button",{onClick:()=>C(!0),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:"#3B82F6",color:"#ffffff",border:"none",borderRadius:"12px",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)"},children:[(0,i.jsx)(d.Z,{style:{width:"16px",height:"16px"}}),!B&&"New Task"]})]})]}),w&&(0,i.jsx)("div",{style:{background:"#FEE2E2",border:"1px solid #FECACA",color:"#DC2626",padding:"1rem",borderRadius:"12px",marginBottom:"1rem",fontSize:"0.875rem",fontWeight:"500"},children:w}),k&&(0,i.jsx)("div",{style:{background:"#D1FAE5",border:"1px solid #A7F3D0",color:"#065F46",padding:"1rem",borderRadius:"12px",marginBottom:"1rem",fontSize:"0.875rem",fontWeight:"500"},children:k}),"15min"===z&&(()=>{let e=[];for(let t=0;t<=23;t++)for(let r=0;r<60;r+=15)e.push({hour:t,minute:r});return(0,i.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,i.jsxs)("div",{style:{width:B?"100%":"300px",background:"#ffffff",border:"1px solid #E5E7EB",borderRadius:"16px",padding:"1rem",boxShadow:"0 4px 12px rgba(0,0,0,0.08)",maxHeight:"600px",overflowY:"auto"},children:[(0,i.jsx)("h3",{style:{margin:"0 0 1rem 0",fontSize:"1.1rem",fontWeight:"600",color:"#1F2937"},children:"Unscheduled Tasks"}),0===f.length?(0,i.jsx)("p",{style:{color:"#6B7280",fontSize:"0.9rem",fontStyle:"italic",textAlign:"center",margin:"2rem 0"},children:"No unscheduled tasks"}):(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:f.map(e=>(0,i.jsxs)("div",{draggable:!0,onDragStart:()=>G(e),onDragEnd:J,style:{padding:"0.75rem",background:e.color||"#3B82F6",color:"#ffffff",borderRadius:"8px",cursor:"grab",fontSize:"0.85rem",fontWeight:"500",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease",userSelect:"none"},children:[(0,i.jsx)("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:e.title}),e.priority&&(0,i.jsxs)("div",{style:{fontSize:"0.7rem",opacity:.8,marginTop:"0.25rem"},children:["Priority: ",e.priority]})]},e.id))})]}),(!B||"15min"===z)&&(0,i.jsx)("div",{style:{background:"#ffffff",border:"1px solid #E5E7EB",borderRadius:"16px",overflow:"hidden",boxShadow:"0 4px 12px rgba(0,0,0,0.08)",flex:1,maxHeight:"600px",overflowY:"auto"},children:(0,i.jsxs)("div",{style:{display:"flex"},children:[(0,i.jsxs)("div",{style:{width:"80px",borderRight:"1px solid #E5E7EB",background:"#F9FAFB"},children:[(0,i.jsx)("div",{style:{height:"".concat(100,"px"),borderBottom:"2px solid #D1D5DB",display:"flex",alignItems:"center",justifyContent:"center",background:"#F3F4F6"},children:(0,i.jsx)("span",{style:{fontSize:"0.8rem",fontWeight:"600",color:"#374151"},children:"Time"})}),e.map((e,t)=>(0,i.jsx)("div",{style:{height:"".concat(40,"px"),borderBottom:0===e.minute?"2px solid #D1D5DB":"1px solid #E5E7EB",display:"flex",alignItems:"center",justifyContent:"center",fontSize:0===e.minute?"0.8rem":"0.7rem",color:0===e.minute?"#1F2937":"#6B7280",fontWeight:0===e.minute?"700":"600",background:0===e.minute?"rgba(59, 130, 246, 0.05)":"transparent"},children:(0,i.jsx)("div",{style:{textAlign:"center"},children:0===e.minute?"".concat(e.hour,":00"):":".concat(e.minute.toString().padStart(2,"0"))})},"".concat(e.hour,"-").concat(e.minute)))]}),(0,i.jsxs)("div",{style:{flex:1,position:"relative"},children:[(0,i.jsx)("div",{style:{height:"".concat(100,"px"),borderBottom:"2px solid #D1D5DB",display:"flex",alignItems:"center",justifyContent:"center",background:"#F3F4F6"},children:(0,i.jsx)("span",{style:{fontSize:"1rem",fontWeight:"600",color:"#374151"},children:b.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})}),e.map((e,t)=>{let r=e.hour>=9&&e.hour<=17;return(0,i.jsx)("div",{onDragOver:t=>Q(t,b,e.hour,e.minute),onDrop:t=>X(t,b,e.hour,e.minute),style:{height:"".concat(40,"px"),borderBottom:0===e.minute?"2px solid #E5E7EB":"1px solid #F3F4F6",borderRight:"1px solid #E5E7EB",position:"relative",background:T&&T.date.toDateString()===b.toDateString()&&T.hour===e.hour&&T.minute===e.minute?"rgba(59, 130, 246, 0.2)":r?"rgba(16, 185, 129, 0.02)":"#ffffff",transition:"all 0.2s ease",userSelect:"none",cursor:I?"copy":"default"}},"main-".concat(e.hour,"-").concat(e.minute))}),m.map(e=>{let t=new Date(e.start_datetime),r=new Date(e.end_datetime);if(t.toDateString()!==b.toDateString())return null;let o=60*t.getHours()+t.getMinutes(),n=60*r.getHours()+r.getMinutes();return(0,i.jsxs)("div",{style:{position:"absolute",top:"".concat(100+o/15*40,"px"),left:"4px",right:"4px",height:"".concat((n-o)/15*40,"px"),background:e.color,color:"#ffffff",borderRadius:"4px",padding:"4px 8px",fontSize:"0.75rem",fontWeight:"500",overflow:"hidden",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.2)",zIndex:10},children:[(0,i.jsx)("div",{style:{fontWeight:"600"},children:e.title}),e.description&&(0,i.jsx)("div",{style:{fontSize:"0.7rem",opacity:.9,marginTop:"2px"},children:e.description})]},e.id)})]})]})})]})})(),"list"===z&&(0,i.jsxs)("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"1.5rem",boxShadow:"0 4px 12px rgba(0,0,0,0.08)"},children:[(0,i.jsxs)("h2",{style:{margin:"0 0 1.5rem 0",fontSize:"1.25rem",fontWeight:"600",color:"#1F2937"},children:["All Tasks (",f.length,")"]}),0===f.length?(0,i.jsxs)("div",{style:{textAlign:"center",padding:"3rem",color:"#6B7280"},children:[(0,i.jsx)(l.Z,{style:{width:"48px",height:"48px",margin:"0 auto 1rem",opacity:.5}}),(0,i.jsx)("p",{style:{fontSize:"1.1rem",fontWeight:"500"},children:"No tasks found"}),(0,i.jsx)("p",{style:{fontSize:"0.9rem"},children:"Create your first task to get started"})]}):(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:f.map(e=>(0,i.jsx)("div",{className:"task-card priority-".concat(e.priority," status-").concat(e.status),style:{background:"#ffffff",borderRadius:"12px",padding:"1rem",border:"2px solid ".concat(e.color),boxShadow:"0 2px 8px rgba(0,0,0,0.08)",transition:"all 0.2s ease"},children:(0,i.jsx)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:(0,i.jsxs)("div",{style:{flex:1},children:[(0,i.jsx)("h3",{className:"task-title",style:{margin:"0 0 0.5rem 0",fontSize:"1.1rem",fontWeight:"600",color:"#1F2937"},children:e.title}),e.description&&(0,i.jsx)("p",{style:{margin:"0 0 0.75rem 0",color:"#6B7280",fontSize:"0.9rem",lineHeight:"1.4"},children:e.description}),(0,i.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center",flexWrap:"wrap"},children:[(0,i.jsx)("span",{style:{background:e.color,color:"#ffffff",padding:"0.25rem 0.5rem",borderRadius:"6px",fontSize:"0.75rem",fontWeight:"500"},children:e.priority}),(0,i.jsx)("span",{style:{background:"#F3F4F6",color:"#6B7280",padding:"0.25rem 0.5rem",borderRadius:"6px",fontSize:"0.75rem",fontWeight:"500"},children:e.status})]})]})})},e.id))})]}),"calendar"===z&&(0,i.jsxs)("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"1.5rem",boxShadow:"0 4px 12px rgba(0,0,0,0.08)"},children:[(0,i.jsx)("h2",{style:{margin:"0 0 1.5rem 0",fontSize:"1.25rem",fontWeight:"600",color:"#1F2937"},children:"Calendar View"}),(0,i.jsxs)("div",{style:{textAlign:"center",padding:"3rem",color:"#6B7280"},children:[(0,i.jsx)(s.Z,{style:{width:"48px",height:"48px",margin:"0 auto 1rem",opacity:.5}}),(0,i.jsx)("p",{style:{fontSize:"1.1rem",fontWeight:"500"},children:"Calendar view coming soon"}),(0,i.jsx)("p",{style:{fontSize:"0.9rem"},children:"Use 15 Min view for timeblocking"})]})]}),D&&(0,i.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,i.jsxs)("div",{style:{background:"#ffffff",borderRadius:"16px",padding:"2rem",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflow:"auto",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:[(0,i.jsx)("h2",{style:{margin:"0 0 1.5rem 0",fontSize:"1.5rem",fontWeight:"700",color:"#1F2937"},children:"Create New Task"}),(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),Y()},children:[(0,i.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#374151"},children:"Task Title *"}),(0,i.jsx)("input",{type:"text",required:!0,style:{width:"100%",padding:"0.75rem",border:"2px solid #E5E7EB",borderRadius:"8px",fontSize:"1rem",transition:"border-color 0.2s ease"},placeholder:"Enter task title",value:O.title,onChange:e=>L({...O,title:e.target.value}),onFocus:e=>e.target.style.borderColor="#3B82F6",onBlur:e=>e.target.style.borderColor="#E5E7EB"})]}),(0,i.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#374151"},children:"Description"}),(0,i.jsx)("textarea",{style:{width:"100%",padding:"0.75rem",border:"2px solid #E5E7EB",borderRadius:"8px",fontSize:"1rem",minHeight:"80px",transition:"border-color 0.2s ease",resize:"vertical"},placeholder:"Enter task description",value:O.description,onChange:e=>L({...O,description:e.target.value}),onFocus:e=>e.target.style.borderColor="#3B82F6",onBlur:e=>e.target.style.borderColor="#E5E7EB"})]}),(0,i.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#374151"},children:"Priority"}),(0,i.jsxs)("select",{style:{width:"100%",padding:"0.75rem",border:"2px solid #E5E7EB",borderRadius:"8px",fontSize:"1rem",background:"#ffffff"},value:O.priority,onChange:e=>L({...O,priority:e.target.value}),children:[(0,i.jsx)("option",{value:"low",children:"Low"}),(0,i.jsx)("option",{value:"medium",children:"Medium"}),(0,i.jsx)("option",{value:"high",children:"High"})]})]}),(0,i.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#374151"},children:"Color"}),(0,i.jsx)("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:["#3B82F6","#EF4444","#F59E0B","#10B981","#8B5CF6","#EC4899"].map(e=>(0,i.jsx)("button",{type:"button",onClick:()=>L({...O,color:e}),style:{width:"32px",height:"32px",borderRadius:"50%",background:e,border:O.color===e?"3px solid #1F2937":"2px solid #E5E7EB",cursor:"pointer",transition:"all 0.2s ease"}},e))})]}),(0,i.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#374151"},children:"Start Date"}),(0,i.jsx)("input",{type:"date",style:{width:"100%",padding:"0.75rem",border:"2px solid #E5E7EB",borderRadius:"8px",fontSize:"1rem"},value:O.start_date,onChange:e=>L({...O,start_date:e.target.value})})]}),(0,i.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#374151"},children:"Start Time"}),(0,i.jsx)("input",{type:"time",style:{width:"100%",padding:"0.75rem",border:"2px solid #E5E7EB",borderRadius:"8px",fontSize:"1rem"},value:O.start_time,onChange:e=>L({...O,start_time:e.target.value})})]}),(0,i.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#374151"},children:"End Date"}),(0,i.jsx)("input",{type:"date",style:{width:"100%",padding:"0.75rem",border:"2px solid #E5E7EB",borderRadius:"8px",fontSize:"1rem"},value:O.end_date,onChange:e=>L({...O,end_date:e.target.value})})]}),(0,i.jsxs)("div",{style:{marginBottom:"1rem"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#374151"},children:"End Time"}),(0,i.jsx)("input",{type:"time",style:{width:"100%",padding:"0.75rem",border:"2px solid #E5E7EB",borderRadius:"8px",fontSize:"1rem"},value:O.end_time,onChange:e=>L({...O,end_time:e.target.value})})]}),(0,i.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[(0,i.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"600",color:"#374151"},children:"To-Do List (Optional)"}),(0,i.jsx)("div",{style:{marginBottom:"0.5rem"},children:(0,i.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,i.jsx)("input",{type:"text",value:M,onChange:e=>N(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),V())},placeholder:"Add a checklist item...",style:{flex:1,padding:"0.5rem",border:"2px solid #E5E7EB",borderRadius:"6px",fontSize:"0.875rem"}}),(0,i.jsx)("button",{type:"button",onClick:V,style:{padding:"0.5rem 1rem",background:"#10B981",color:"#ffffff",border:"none",borderRadius:"6px",fontSize:"0.875rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Add"})]})}),P.length>0&&(0,i.jsx)("div",{style:{background:"#F9FAFB",borderRadius:"8px",padding:"0.75rem",maxHeight:"200px",overflowY:"auto"},children:P.map((e,t)=>(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",background:"#ffffff",borderRadius:"6px",marginBottom:t<P.length-1?"0.5rem":"0",border:"1px solid #E5E7EB"},children:[(0,i.jsx)("input",{type:"checkbox",checked:e.is_completed,onChange:()=>K(t),style:{width:"16px",height:"16px",cursor:"pointer"}}),(0,i.jsx)("span",{style:{flex:1,fontSize:"0.875rem",color:e.is_completed?"#9CA3AF":"#1F2937",textDecoration:e.is_completed?"line-through":"none"},children:e.item_text}),(0,i.jsx)("button",{type:"button",onClick:()=>$(t),style:{padding:"0.25rem 0.5rem",background:"#FEE2E2",color:"#DC2626",border:"none",borderRadius:"4px",fontSize:"0.75rem",cursor:"pointer",fontWeight:"500"},children:"Remove"})]},t))})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[(0,i.jsx)("button",{type:"button",onClick:()=>C(!1),style:{padding:"0.75rem 1.5rem",background:"#F3F4F6",color:"#374151",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},children:"Cancel"}),(0,i.jsx)("button",{type:"submit",style:{padding:"0.75rem 1.5rem",background:"#3B82F6",color:"#ffffff",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)"},children:"Create Task"})]})]})]})})]})]}):null}},3549:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return s},useAuth:function(){return l}});var i=r(7437),o=r(2265),n=r(8411);let a=(0,o.createContext)(void 0),l=()=>{let e=(0,o.useContext)(a);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},s=e=>{let{children:t}=e,[r,l]=(0,o.useState)(null),[s,d]=(0,o.useState)(!0),[c,p]=(0,o.useState)(!1);(0,o.useEffect)(()=>{p(!0)},[]),(0,o.useEffect)(()=>{if(!c)return;let e=async()=>{try{console.log("Starting auth initialization..."),await new Promise(e=>setTimeout(e,50));let{user:o,error:a}=await n.supabaseAuth.getUser();if(console.log("Auth result:",{currentUser:o,error:a}),o&&!a){var e,t,r,i;let n={id:o.id,email:o.email,name:(null===(e=o.user_metadata)||void 0===e?void 0:e.name)||o.email,phone:(null===(t=o.user_metadata)||void 0===t?void 0:t.phone)||"",role:(null===(r=o.user_metadata)||void 0===r?void 0:r.role)||"member",position:(null===(i=o.user_metadata)||void 0===i?void 0:i.position)||"",date_joined:new Date().toISOString()};l(n),console.log("User set:",n)}else console.log("No user found or error occurred")}catch(e){console.error("Auth initialization error:",e)}finally{console.log("Setting isLoading to false"),d(!1)}},t=setTimeout(()=>{console.warn("Auth initialization timeout, proceeding without auth"),d(!1)},3e3),r=setTimeout(()=>{e().finally(()=>{clearTimeout(t)})},100);return()=>{clearTimeout(t),clearTimeout(r)}},[c]);let u=async(e,t)=>{try{console.log("Attempting login for:",e);let{user:s,error:d}=await n.supabaseAuth.signIn(e,t);if(d)throw console.error("Login error:",d),Error(d instanceof Error?d.message:"Login failed");if(s){var r,i,o,a;let e={id:s.id,email:s.email,name:(null===(r=s.user_metadata)||void 0===r?void 0:r.name)||s.email,phone:(null===(i=s.user_metadata)||void 0===i?void 0:i.phone)||"",role:(null===(o=s.user_metadata)||void 0===o?void 0:o.role)||"member",position:(null===(a=s.user_metadata)||void 0===a?void 0:a.position)||"",date_joined:new Date().toISOString()};l(e),console.log("Login successful:",e)}}catch(e){throw console.error("Login failed:",e),Error(e.message||"Login failed")}},m=async e=>{throw Error("Registration is disabled. Please contact an administrator.")},g=async()=>{try{await n.supabaseAuth.signOut(),l(null)}catch(e){console.error("Logout error:",e),l(null)}};return(0,i.jsx)(a.Provider,{value:{user:r,isLoading:s,login:u,register:m,logout:g,isAuthenticated:!!r},children:t})}},622:function(e,t,r){"use strict";var i=r(2265),o=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,r){var i,n={},d=null,c=null;for(i in void 0!==r&&(d=""+r),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,i)&&!s.hasOwnProperty(i)&&(n[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===n[i]&&(n[i]=t[i]);return{$$typeof:o,type:e,key:d,ref:c,props:n,_owner:l.current}}t.Fragment=n,t.jsx=d,t.jsxs=d},7437:function(e,t,r){"use strict";e.exports=r(622)},4033:function(e,t,r){e.exports=r(94)},1253:function(e,t,r){"use strict";var i=r(2265);let o=i.forwardRef(function({title:e,titleId:t,...r},o){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},r),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))});t.Z=o},2929:function(e,t,r){"use strict";var i=r(2265);let o=i.forwardRef(function({title:e,titleId:t,...r},o){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},r),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))});t.Z=o},5255:function(e,t,r){"use strict";var i=r(2265);let o=i.forwardRef(function({title:e,titleId:t,...r},o){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":t},r),e?i.createElement("title",{id:t},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))});t.Z=o}},function(e){e.O(0,[7708,8411,3152,2971,2472,1744],function(){return e(e.s=1874)}),_N_E=e.O()}]);