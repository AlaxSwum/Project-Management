(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3237],{14285:function(n,e,t){Promise.resolve().then(t.bind(t,52855))},52855:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return Y}});var r=t(57437),a=t(2265),i=t(24033),o=t(3549),s=t(3152),l=t(80640),d=t(81253),c=t(49186),m=t(82929),p=t(74020),g=t(19367),h=t(51809),u=t(72469),x=t(40013),f=t(3217),b=t(68714),v=t(54887),y=t(53298),k=t(10887),w=t(62125),j=t(77227),F=t(96689),D=t(67805),N=t(71550),S=t(45946),C=t(31205),z=t(55856),A=t(97514);function _(n){var e;let{task:t}=n,{user:i}=(0,o.useAuth)(),[l,d]=(0,a.useState)([]),[c,m]=(0,a.useState)(""),[p,g]=(0,a.useState)(!1),[h,u]=(0,a.useState)(!1),[x,f]=(0,a.useState)(!1),[b,v]=(0,a.useState)(null),[k,_]=(0,a.useState)(""),[T,I]=(0,a.useState)([]),[M,B]=(0,a.useState)([]),[E,L]=(0,a.useState)(!1);(0,a.useEffect)(()=>{(null==t?void 0:t.id)&&R()},[null==t?void 0:t.id]);let R=async()=>{if(null==t?void 0:t.id){g(!0);try{let[n,e]=await Promise.all([s.taskService.getTaskComments(t.id),s.taskService.getTaskAttachments(t.id)]);d(n||[])}catch(n){console.error("Failed to fetch task comments/attachments:",n),d([])}finally{g(!1)}}},Y=async()=>{if((c.trim()||0!==T.length||0!==M.length)&&(null==t?void 0:t.id)){L(!0);try{let e=await s.taskService.createTaskComment(t.id,{comment:c.trim()||"Shared files"}),r=[];for(let e of T)try{let a=await s.taskService.uploadTaskAttachment(t.id,e);if(a){var n;let e={...a,source:"upload",name:a.filename,size:a.file_size,url:a.file,uploaded_by:(null===(n=a.user)||void 0===n?void 0:n.name)||"Unknown",uploaded_at:a.created_at};r.push(e)}}catch(n){console.error("Failed to upload file:",e.name,n)}for(let n of M)try{let e={id:Date.now()+Math.random(),file:n.webViewLink||n.webContentLink||"",filename:n.name,user:{id:(null==i?void 0:i.id)||0,name:(null==i?void 0:i.name)||"Unknown",email:(null==i?void 0:i.email)||"Unknown",role:(null==i?void 0:i.role)||"user"},created_at:new Date().toISOString(),file_size:n.size||0,name:n.name,size:n.size||0,type:n.mimeType||"application/octet-stream",uploaded_by:(null==i?void 0:i.name)||(null==i?void 0:i.email)||"Unknown",uploaded_at:new Date().toISOString(),task_id:t.id,url:n.webViewLink||n.webContentLink,source:"drive",drive_file_id:n.id};r.push(e)}catch(e){console.error("Failed to attach Drive file:",n.name,e)}if(e){let n={...e,attachments:r};d([...l,n]),m(""),I([]),B([]),u(!1),f(!1)}}catch(n){console.error("Failed to add comment:",n)}finally{L(!1)}}},P=n=>{I(T.filter((e,t)=>t!==n))},W=n=>{B(M.filter((e,t)=>t!==n))},Z=async n=>{try{await s.taskService.deleteTaskComment(n),d(l.filter(e=>e.id!==n))}catch(n){console.error("Failed to delete comment:",n)}},U=async n=>{if(k.trim())try{await s.taskService.updateTaskComment(n,k.trim()),d(l.map(e=>e.id===n?{...e,comment:k.trim()}:e)),v(null),_("")}catch(n){console.error("Failed to edit comment:",n)}},H=async(n,e)=>{try{await s.taskService.deleteTaskAttachment(e),d(l.map(t=>t.id===n&&t.attachments?{...t,attachments:t.attachments.filter(n=>n.id!==e)}:t))}catch(n){console.error("Failed to delete attachment:",n)}},O=n=>{if(0===n)return"0 Bytes";let e=Math.floor(Math.log(n)/Math.log(1024));return parseFloat((n/Math.pow(1024,e)).toFixed(2))+" "+["Bytes","KB","MB","GB"][e]};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n          .task-interaction-section {\n            flex: 1;\n            display: flex;\n            flex-direction: column;\n            height: 100%;\n            background: #1F1F1F;\n            width: 100%;\n            max-width: 100%;\n            box-sizing: border-box;\n            overflow: hidden;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n          }\n\n          .comments-section {\n            flex: 1;\n            display: flex;\n            flex-direction: column;\n            height: 100%;\n            width: 100%;\n            max-width: 100%;\n            box-sizing: border-box;\n            overflow: hidden;\n            gap: 0;\n          }\n          \n          .comments-list {\n            flex: 1;\n            padding: 1rem;\n            overflow-y: auto;\n            min-height: 200px;\n            max-height: calc(100% - 200px);\n            scrollbar-width: thin;\n            scrollbar-color: rgba(55, 65, 81, 0.3) transparent;\n          }\n          \n          .comments-list::-webkit-scrollbar {\n            width: 6px;\n          }\n          \n          .comments-list::-webkit-scrollbar-track {\n            background: rgba(55, 65, 81, 0.1);\n            border-radius: 3px;\n          }\n          \n          .comments-list::-webkit-scrollbar-thumb {\n            background: rgba(55, 65, 81, 0.3);\n            border-radius: 3px;\n          }\n          \n          .comments-list::-webkit-scrollbar-thumb:hover {\n            background: rgba(55, 65, 81, 0.5);\n          }\n          \n          .empty-comments {\n            text-align: center;\n            padding: 2rem 1rem;\n            color: #71717A;\n            background: #1A1A1A;\n            border-radius: 8px;\n            border: 1px solid #2D2D2D;\n            margin: 1rem;\n            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n          }\n          \n          .empty-comments p {\n            margin: 0.5rem 0;\n            font-weight: 500;\n          }\n          \n          .empty-comments p:first-of-type {\n            font-weight: 600;\n            color: #FFFFFF;\n            font-size: 1rem;\n          }\n          \n          .comment-item {\n            margin-bottom: 1rem;\n            padding: 1rem;\n            background: #1A1A1A;\n            border-radius: 8px;\n            border: 1px solid #2D2D2D;\n            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);\n            transition: all 0.2s ease;\n          }\n          \n          .comment-item:hover {\n            border-color: #3D3D3D;\n            transform: translateY(-1px);\n            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.4);\n          }\n          \n          .comment-item:last-child {\n            margin-bottom: 0;\n          }\n          \n          .comment-header {\n            display: flex;\n            align-items: center;\n            gap: 0.75rem;\n            margin-bottom: 0.75rem;\n          }\n          \n          .author-avatar, .current-user-avatar {\n            width: 36px;\n            height: 36px;\n            background: #111827;\n            border: 1px solid #2D2D2D;\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 0.875rem;\n            font-weight: 600;\n            color: #ffffff;\n            flex-shrink: 0;\n          }\n          \n          .comment-meta {\n            display: flex;\n            flex-direction: column;\n            gap: 0.125rem;\n          }\n          \n          .author-name {\n            font-weight: 600;\n            color: #FFFFFF;\n            font-size: 0.875rem;\n          }\n          \n          .comment-time {\n            font-size: 0.75rem;\n            color: #71717A;\n            font-weight: 500;\n          }\n          \n          .comment-content {\n            margin-left: 0;\n            font-size: 0.875rem;\n            color: #A1A1AA;\n            line-height: 1.5;\n            font-weight: 500;\n            margin-bottom: 0.75rem;\n          }\n\n          .comment-attachments {\n            margin-top: 0.75rem;\n          }\n\n          .attachment-item {\n            display: flex;\n            align-items: center;\n            gap: 0.75rem;\n            padding: 0.75rem;\n            background: #141414;\n            border: 1px solid #2D2D2D;\n            border-radius: 6px;\n            margin-bottom: 0.5rem;\n            transition: all 0.2s ease;\n          }\n\n          .attachment-item:hover {\n            background: #1F1F1F;\n            border-color: #3D3D3D;\n          }\n\n          .attachment-icon {\n            width: 20px;\n            height: 20px;\n            color: #71717A;\n            flex-shrink: 0;\n          }\n\n          .attachment-info {\n            flex: 1;\n          }\n\n          .attachment-name {\n            font-size: 0.875rem;\n            font-weight: 500;\n            color: #A1A1AA;\n            margin-bottom: 0.25rem;\n          }\n\n          .attachment-meta {\n            font-size: 0.75rem;\n            color: #71717A;\n          }\n          \n          .add-comment {\n            border-top: 1px solid #2D2D2D;\n            padding: 1rem;\n            background: #1A1A1A;\n            width: 100%;\n            max-width: 100%;\n            box-sizing: border-box;\n            flex-shrink: 0;\n          }\n          \n          .comment-input-container {\n            display: flex;\n            flex-direction: column;\n            gap: 0.75rem;\n            width: 100%;\n            max-width: 100%;\n            box-sizing: border-box;\n          }\n\n          .comment-input-row {\n            display: flex;\n            align-items: flex-start;\n            gap: 0.75rem;\n            width: 100%;\n          }\n          \n          .comment-input {\n            flex: 1;\n            padding: 0.875rem 1rem;\n            border: 1px solid #3D3D3D;\n            border-radius: 8px;\n            font-size: 0.875rem;\n            line-height: 1.5;\n            resize: vertical;\n            min-height: 80px;\n            max-width: 100%;\n            width: 100%;\n            box-sizing: border-box;\n            transition: all 0.2s ease;\n            background: #1A1A1A;\n            color: #A1A1AA;\n            font-weight: 500;\n            font-family: inherit;\n          }\n          \n          .comment-input:focus {\n            outline: none;\n            border-color: #2D2D2D;\n            box-shadow: 0 0 0 3px rgba(45, 45, 45, 0.3);\n          }\n          \n          .comment-input::placeholder {\n            color: #71717A;\n            font-weight: 500;\n          }\n\n          .comment-actions {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            gap: 0.75rem;\n          }\n\n          .file-actions {\n            display: flex;\n            gap: 0.5rem;\n          }\n\n          .file-action-btn {\n            padding: 0.5rem;\n            background: #1A1A1A;\n            border: 1px solid #3D3D3D;\n            border-radius: 6px;\n            cursor: pointer;\n            transition: all 0.2s ease;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            color: #71717A;\n          }\n\n          .file-action-btn:hover {\n            background: #141414;\n            border-color: #2D2D2D;\n            color: #A1A1AA;\n          }\n\n          .file-action-btn.active {\n            background: #1F1F1F;\n            border-color: #2D2D2D;\n            color: #A1A1AA;\n          }\n          \n          .send-comment-btn {\n            background: #111827;\n            color: #ffffff;\n            border: none;\n            padding: 0.875rem 1rem;\n            border-radius: 6px;\n            cursor: pointer;\n            display: flex;\n            align-items: center;\n            transition: all 0.2s ease;\n            font-weight: 500;\n            font-size: 0.875rem;\n          }\n          \n          .send-comment-btn:hover:not(:disabled) {\n            background: #1f2937;\n          }\n          \n          .send-comment-btn:disabled {\n            background: #9ca3af;\n            cursor: not-allowed;\n          }\n\n          .selected-files {\n            margin-top: 0.75rem;\n          }\n\n          .selected-files-title {\n            font-size: 0.875rem;\n            font-weight: 600;\n            color: #FFFFFF;\n            margin-bottom: 0.5rem;\n          }\n\n          .selected-file-item {\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            padding: 0.5rem;\n            background: #141414;\n            border: 1px solid #2D2D2D;\n            border-radius: 6px;\n            margin-bottom: 0.5rem;\n          }\n\n          .file-info {\n            display: flex;\n            align-items: center;\n            gap: 0.5rem;\n            flex: 1;\n          }\n\n          .file-name {\n            font-size: 0.875rem;\n            font-weight: 500;\n            color: #A1A1AA;\n          }\n\n          .file-size {\n            font-size: 0.75rem;\n            color: #71717A;\n          }\n\n          .remove-file-btn {\n            padding: 0.25rem;\n            background: none;\n            border: none;\n            cursor: pointer;\n            color: #ef4444;\n            border-radius: 4px;\n            transition: all 0.2s ease;\n          }\n\n          .remove-file-btn:hover {\n            background: #fee2e2;\n          }\n\n          .drive-explorer-modal {\n            position: fixed;\n            inset: 0;\n            background: rgba(0, 0, 0, 0.5);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            padding: 1rem;\n            z-index: 1000;\n          }\n\n          .drive-explorer-content {\n            background: #1A1A1A;\n            border-radius: 12px;\n            width: 100%;\n            max-width: 800px;\n            height: 600px;\n            display: flex;\n            flex-direction: column;\n            overflow: hidden;\n            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);\n          }\n\n          .drive-explorer-header {\n            padding: 1rem 1.5rem;\n            border-bottom: 1px solid #2D2D2D;\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n          }\n\n          .drive-explorer-title {\n            font-size: 1.125rem;\n            font-weight: 600;\n            color: #FFFFFF;\n          }\n\n          .close-explorer-btn {\n            padding: 0.5rem;\n            background: none;\n            border: none;\n            cursor: pointer;\n            color: #71717A;\n            border-radius: 6px;\n            transition: all 0.2s ease;\n          }\n\n          .close-explorer-btn:hover {\n            background: #1F1F1F;\n            color: #A1A1AA;\n          }\n\n          .drive-explorer-body {\n            flex: 1;\n            overflow: hidden;\n          }\n\n          .file-input-hidden {\n            display: none;\n          }\n\n          .loading-state {\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            padding: 3rem;\n            color: #71717A;\n            font-weight: 500;\n            background: #1A1A1A;\n            border-radius: 8px;\n            border: 1px solid #2D2D2D;\n            margin: 1rem;\n          }\n          \n          @media (max-width: 768px) {\n            .comments-list {\n              padding: 0.75rem;\n            }\n            \n            .comment-item {\n              padding: 0.75rem;\n            }\n            \n            .add-comment {\n              padding: 0.75rem;\n            }\n            \n            .comment-input {\n              min-height: 60px;\n              font-size: 0.875rem;\n            }\n            \n            .author-avatar, .current-user-avatar {\n              width: 32px;\n              height: 32px;\n              font-size: 0.75rem;\n            }\n\n            .comment-actions {\n              flex-direction: column;\n              align-items: stretch;\n              gap: 0.75rem;\n            }\n\n            .file-actions {\n              justify-content: center;\n            }\n\n            .drive-explorer-content {\n              max-width: 95vw;\n              height: 80vh;\n            }\n          }\n        "}}),(0,r.jsx)("div",{className:"task-interaction-section",children:(0,r.jsxs)("div",{className:"comments-section",children:[(0,r.jsx)("div",{className:"comments-list",children:p?(0,r.jsx)("div",{className:"loading-state",children:"Loading comments..."}):0===l.length?(0,r.jsxs)("div",{className:"empty-comments",children:[(0,r.jsx)(y.Z,{style:{width:"48px",height:"48px",margin:"0 auto 1rem",color:"#3D3D3D"}}),(0,r.jsx)("p",{children:"No comments yet"}),(0,r.jsx)("p",{children:"Be the first to add a comment or share files!"})]}):l.map(n=>(0,r.jsxs)("div",{className:"comment-item",children:[(0,r.jsxs)("div",{className:"comment-header",children:[(0,r.jsx)("div",{className:"author-avatar",children:n.author.charAt(0).toUpperCase()}),(0,r.jsxs)("div",{className:"comment-meta",children:[(0,r.jsx)("div",{className:"author-name",children:n.author}),(0,r.jsx)("div",{className:"comment-time",children:new Date(n.created_at).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),n.author_email===(null==i?void 0:i.email)&&(0,r.jsxs)("div",{style:{display:"flex",gap:"4px",marginLeft:"auto"},children:[(0,r.jsx)("button",{onClick:()=>{v(n.id),_(n.comment)},style:{padding:"4px",background:"none",border:"none",cursor:"pointer",color:"#71717A",borderRadius:"4px",minHeight:"auto",minWidth:"auto"},title:"Edit comment",children:(0,r.jsx)(w.Z,{style:{width:"14px",height:"14px"}})}),(0,r.jsx)("button",{onClick:()=>Z(n.id),style:{padding:"4px",background:"none",border:"none",cursor:"pointer",color:"#EF4444",borderRadius:"4px",minHeight:"auto",minWidth:"auto"},title:"Delete comment",children:(0,r.jsx)(j.Z,{style:{width:"14px",height:"14px"}})})]})]}),b===n.id?(0,r.jsxs)("div",{style:{display:"flex",gap:"8px",alignItems:"flex-start",marginTop:"8px"},children:[(0,r.jsx)("textarea",{value:k,onChange:n=>_(n.target.value),style:{flex:1,padding:"8px",background:"#141414",border:"1px solid #3D3D3D",borderRadius:"6px",color:"#FFFFFF",fontSize:"0.875rem",resize:"vertical",minHeight:"60px",fontFamily:"inherit"}}),(0,r.jsx)("button",{onClick:()=>U(n.id),style:{padding:"6px",background:"#10B981",border:"none",borderRadius:"6px",cursor:"pointer",color:"#FFFFFF",minHeight:"auto",minWidth:"auto"},title:"Save",children:(0,r.jsx)(D.Z,{style:{width:"16px",height:"16px"}})}),(0,r.jsx)("button",{onClick:()=>{v(null),_("")},style:{padding:"6px",background:"#2D2D2D",border:"none",borderRadius:"6px",cursor:"pointer",color:"#A1A1AA",minHeight:"auto",minWidth:"auto"},title:"Cancel",children:(0,r.jsx)(F.Z,{style:{width:"16px",height:"16px"}})})]}):(0,r.jsx)("div",{className:"comment-content",children:n.comment}),n.attachments&&n.attachments.length>0&&(0,r.jsx)("div",{className:"comment-attachments",children:n.attachments.map((e,t)=>(0,r.jsxs)("div",{className:"attachment-item",children:[(0,r.jsx)(N.Z,{className:"attachment-icon"}),(0,r.jsxs)("div",{className:"attachment-info",children:[(0,r.jsx)("div",{className:"attachment-name",children:e.name||e.filename}),(0,r.jsxs)("div",{className:"attachment-meta",children:[O(e.size||e.file_size)," • ","drive"===e.source?"Google Drive":"Uploaded"]})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center",flexShrink:0},children:[(e.url||e.file)&&(0,r.jsx)("a",{href:e.url||e.file,target:"_blank",rel:"noopener noreferrer",style:{padding:"0.25rem 0.5rem",background:"#1F1F1F",border:"1px solid #3D3D3D",borderRadius:"4px",color:"#A1A1AA",textDecoration:"none",fontSize:"0.75rem",fontWeight:"500"},children:"View"}),(0,r.jsxs)("button",{onClick:()=>H(n.id,e.id),style:{padding:"0.25rem 0.5rem",background:"none",border:"1px solid #3D3D3D",borderRadius:"4px",cursor:"pointer",color:"#EF4444",fontSize:"0.75rem",fontWeight:"500",display:"flex",alignItems:"center",gap:"2px",minHeight:"auto",minWidth:"auto"},title:"Delete attachment",children:[(0,r.jsx)(j.Z,{style:{width:"12px",height:"12px"}}),"Delete"]})]})]},t))})]},n.id))}),(0,r.jsxs)("div",{className:"add-comment",children:[(0,r.jsxs)("div",{className:"comment-input-container",children:[(0,r.jsxs)("div",{className:"comment-input-row",children:[(0,r.jsx)("div",{className:"current-user-avatar",children:(null==i?void 0:null===(e=i.name)||void 0===e?void 0:e.charAt(0).toUpperCase())||"U"}),(0,r.jsx)("textarea",{value:c,onChange:n=>m(n.target.value),placeholder:"Add a comment or share files...",className:"comment-input"})]}),(T.length>0||M.length>0)&&(0,r.jsxs)("div",{className:"selected-files",children:[(0,r.jsx)("div",{className:"selected-files-title",children:"Attached Files:"}),T.map((n,e)=>(0,r.jsxs)("div",{className:"selected-file-item",children:[(0,r.jsxs)("div",{className:"file-info",children:[(0,r.jsx)(N.Z,{style:{width:"16px",height:"16px",color:"#71717A"}}),(0,r.jsx)("span",{className:"file-name",children:n.name}),(0,r.jsxs)("span",{className:"file-size",children:["(",O(n.size),")"]})]}),(0,r.jsx)("button",{onClick:()=>P(e),className:"remove-file-btn",type:"button",children:"✕"})]},"file-".concat(e))),M.map((n,e)=>(0,r.jsxs)("div",{className:"selected-file-item",children:[(0,r.jsxs)("div",{className:"file-info",children:[(0,r.jsx)(N.Z,{style:{width:"16px",height:"16px",color:"#71717A"}}),(0,r.jsx)("span",{className:"file-name",children:n.name}),(0,r.jsx)("span",{className:"file-size",children:"(Google Drive)"})]}),(0,r.jsx)("button",{onClick:()=>W(e),className:"remove-file-btn",type:"button",children:"✕"})]},"drive-".concat(e)))]}),(0,r.jsxs)("div",{className:"comment-actions",children:[(0,r.jsxs)("div",{className:"file-actions",children:[(0,r.jsx)("button",{onClick:()=>{var n;return null===(n=document.getElementById("file-input"))||void 0===n?void 0:n.click()},className:"file-action-btn",type:"button",title:"Upload files",children:(0,r.jsx)(S.Z,{style:{width:"18px",height:"18px"}})}),(0,r.jsx)("button",{onClick:()=>f(!0),className:"file-action-btn",type:"button",title:"Choose from Google Drive",children:(0,r.jsx)(C.Z,{style:{width:"18px",height:"18px"}})})]}),(0,r.jsx)("button",{onClick:Y,disabled:!c.trim()&&0===T.length&&0===M.length||E,className:"send-comment-btn",children:E?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{style:{width:"16px",height:"16px",border:"2px solid transparent",borderTop:"2px solid #ffffff",borderRadius:"50%",animation:"spin 1s linear infinite",marginRight:"0.5rem"}}),"Uploading..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.Z,{style:{width:"16px",height:"16px",marginRight:"0.5rem"}}),"Send"]})})]})]}),(0,r.jsx)("input",{id:"file-input",type:"file",multiple:!0,onChange:n=>{let e=Array.from(n.target.files||[]);I([...T,...e])},className:"file-input-hidden"})]})]})}),x&&(0,r.jsx)("div",{className:"drive-explorer-modal",onClick:()=>f(!1),children:(0,r.jsxs)("div",{className:"drive-explorer-content",onClick:n=>n.stopPropagation(),children:[(0,r.jsxs)("div",{className:"drive-explorer-header",children:[(0,r.jsx)("h3",{className:"drive-explorer-title",children:"Choose from Google Drive"}),(0,r.jsx)("button",{onClick:()=>f(!1),className:"close-explorer-btn",children:"✕"})]}),(0,r.jsx)("div",{className:"drive-explorer-body",children:(0,r.jsx)(A.default,{onFileSelect:n=>{B([...M,n])},onFolderSelect:()=>{},allowFileSelection:!0,allowFolderSelection:!1,showCreateFolder:!1,mode:"select"})})]})}),(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        "}})]})}let T=[{value:"low",label:"Low",icon:"",color:"#10b981"},{value:"medium",label:"Medium",icon:"",color:"#f59e0b"},{value:"high",label:"High",icon:"",color:"#ef4444"},{value:"urgent",label:"Urgent",icon:"",color:"#dc2626"}],I=[{value:"todo",label:"To Do",icon:"",color:"#e5e7eb"},{value:"in_progress",label:"In Progress",icon:"",color:"#dbeafe"},{value:"review",label:"Review",icon:"",color:"#fef3c7"},{value:"done",label:"Done",icon:"",color:"#d1fae5"}];function M(n){var e,t,i,o,s;let{task:l,users:p,onClose:g,onSave:x,onStatusChange:f,onDelete:b}=n,[D,N]=(0,a.useState)(!1),[S,C]=(0,a.useState)(!1),[z,A]=(0,a.useState)("task"),M=(0,a.useCallback)(n=>{if(!n)return"";if(/^\d{4}-\d{2}-\d{2}$/.test(n))return n;if(n.includes("T"))return n.split("T")[0];let e=new Date(n);return isNaN(e.getTime())?"":e.toISOString().split("T")[0]},[]),[B,E]=(0,a.useState)({name:l.name,description:l.description,priority:l.priority,due_date:M(l.due_date),start_date:M(l.start_date),assignee_ids:l.assignees?l.assignees.map(n=>n.id):l.assignee?[l.assignee.id]:[],tags:l.tags_list.join(", ")});(0,a.useEffect)(()=>{E({name:l.name,description:l.description,priority:l.priority,due_date:M(l.due_date),start_date:M(l.start_date),assignee_ids:l.assignees?l.assignees.map(n=>n.id):l.assignee?[l.assignee.id]:[],tags:l.tags_list.join(", ")})},[l,M]);let L=n=>n?new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Not set",R=n=>new Date(n).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),Y=async()=>{try{let n=n=>{if(!n)return null;if(/^\d{4}-\d{2}-\d{2}$/.test(n))return n;if(n.includes("T"))return n.split("T")[0];let e=new Date(n);return isNaN(e.getTime())?null:e.toISOString().split("T")[0]},e={...B,tags:B.tags,assignee_ids:B.assignee_ids&&B.assignee_ids.length>0?B.assignee_ids:[],due_date:n(B.due_date),start_date:n(B.start_date)};console.log("Saving task with assignee_ids:",e.assignee_ids),console.log("Saving task with formatted dates:",{due_date:e.due_date,start_date:e.start_date}),await x(e),N(!1)}catch(n){console.error("Failed to save task:",n)}},P=async n=>{f&&await f(l.id,n)},W=async()=>{if(b)try{await b(l.id),g()}catch(n){console.error("Failed to delete task:",n)}},Z=(i=l.priority,T.find(n=>n.value===i)||T[1]),U=(o=l.status,I.find(n=>n.value===o)||I[0]),H=!!(s=l.due_date)&&new Date(s)<new Date,O=[{id:"task",label:"Task",icon:(0,r.jsx)(c.Z,{style:{width:"16px",height:"16px"}})},{id:"comments",label:"Comments & Files",icon:(0,r.jsx)(y.Z,{style:{width:"16px",height:"16px"}})}],V=(0,r.jsxs)("div",{className:"task-modal-overlay",onClick:g,children:[(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n          @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap');\n          \n          @keyframes fadeIn {\n            from { opacity: 0; }\n            to { opacity: 1; }\n          }\n          \n          @keyframes slideUp {\n            from { \n              opacity: 0;\n              transform: translateY(20px) scale(0.95);\n            }\n            to { \n              opacity: 1;\n              transform: translateY(0) scale(1);\n            }\n          }\n          \n          @keyframes shimmer {\n            0% { background-position: -200px 0; }\n            100% { background-position: calc(200px + 100%) 0; }\n          }\n          \n          .task-modal-overlay {\n            position: fixed;\n            inset: 0;\n            background: rgba(0, 0, 0, 0.85);\n            backdrop-filter: blur(12px);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            padding: 1rem;\n            z-index: 100000;\n            animation: fadeIn 0.4s cubic-bezier(0.23, 1, 0.32, 1);\n            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;\n          }\n          \n          .task-modal-content {\n            background: #1A1A1A;\n            border: 2px solid #FFB333;\n            border-radius: 20px;\n            width: 100%;\n            max-width: min(1200px, calc(100vw - 2rem));\n            height: 85vh;\n            max-height: 85vh;\n            display: flex;\n            flex-direction: column;\n            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.5);\n            backdrop-filter: blur(20px);\n            animation: slideUp 0.5s cubic-bezier(0.23, 1, 0.32, 1);\n            position: relative;\n            overflow: hidden;\n            margin: 0 auto;\n            z-index: 100001;\n          }\n          \n          .task-modal-content::before {\n            content: '';\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            height: 4px;\n            background: linear-gradient(90deg, #FFB333, #F87239, #C483D9, #5884FD);\n            border-radius: 20px 20px 0 0;\n          }\n          \n          .task-modal-header {\n            padding: 2rem 2.5rem 1.5rem 2.5rem;\n            border-bottom: 2px solid rgba(255, 179, 51, 0.2);\n            display: flex;\n            justify-content: space-between;\n            align-items: flex-start;\n            gap: 1.5rem;\n            flex-shrink: 0;\n            background: linear-gradient(135deg, #141414 0%, #1F1F1F 100%);\n            position: relative;\n            z-index: 1;\n          }\n          \n          .task-modal-body {\n            flex: 1;\n            display: flex;\n            flex-direction: column;\n            min-height: 0;\n            background: #1A1A1A;\n          }\n          \n          .tab-navigation {\n            display: flex;\n            background: #141414;\n            flex-shrink: 0;\n            border-bottom: 2px solid rgba(255, 179, 51, 0.1);\n            backdrop-filter: blur(10px);\n          }\n          \n          .tab-button {\n            flex: 1;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            gap: 0.75rem;\n            padding: 1.25rem 1.5rem;\n            background: transparent;\n            border: none;\n            cursor: pointer;\n            font-weight: 600;\n            color: #71717A;\n            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);\n            border-right: 1px solid rgba(255, 179, 51, 0.2);\n            position: relative;\n            overflow: hidden;\n          }\n          \n          .tab-button:last-child {\n            border-right: none;\n          }\n          \n          .tab-button::before {\n            content: '';\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background: rgba(255, 179, 51, 0.05);\n            opacity: 0;\n            transition: opacity 0.3s ease;\n          }\n          \n          .tab-button:hover {\n            color: #FFB333;\n            transform: translateY(-2px);\n          }\n          \n          .tab-button:hover::before {\n            opacity: 1;\n          }\n          \n          .tab-button.active {\n            background: #FFB333;\n            color: #FFFFFF;\n            transform: translateY(-2px);\n            box-shadow: 0 8px 24px rgba(255, 179, 51, 0.3);\n          }\n          \n          .tab-button.active svg {\n            color: #FFFFFF;\n          }\n          \n          .tab-content {\n            flex: 1;\n            overflow-y: auto;\n            padding: 2rem 2.5rem;\n            background: linear-gradient(135deg, #1A1A1A 0%, #141414 100%);\n          }\n          \n          .task-title-section {\n            flex: 1;\n          }\n          \n          .task-title {\n            font-size: 1.875rem;\n            font-weight: 700;\n            color: #FFFFFF;\n            margin-bottom: 1rem;\n            line-height: 1.3;\n            letter-spacing: -0.025em;\n          }\n          \n          .task-meta-badges {\n            display: flex;\n            gap: 1rem;\n            flex-wrap: wrap;\n          }\n          \n          .task-badge {\n            display: flex;\n            align-items: center;\n            gap: 0.5rem;\n            padding: 0.5rem 1rem;\n            border-radius: 12px;\n            font-size: 0.875rem;\n            font-weight: 600;\n            backdrop-filter: blur(10px);\n            transition: all 0.3s ease;\n          }\n          \n          .task-badge.priority {\n            background: rgba(255, 179, 51, 0.15);\n            border: 2px solid #FFB333;\n            color: #F87239;\n          }\n          \n          .task-badge.status {\n            background: rgba(88, 132, 253, 0.15);\n            border: 2px solid #5884FD;\n            color: #5884FD;\n          }\n          \n          .task-badge.overdue {\n            background: rgba(239, 68, 68, 0.15);\n            border: 2px solid #EF4444;\n            color: #EF4444;\n            animation: pulse 2s infinite;\n          }\n          \n          .task-header-actions {\n            display: flex;\n            gap: 0.75rem;\n          }\n          \n          .task-action-btn {\n            padding: 0.75rem;\n            border: 2px solid transparent;\n            border-radius: 12px;\n            background: #141414;\n            cursor: pointer;\n            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            backdrop-filter: blur(10px);\n          }\n          \n          .task-action-btn:hover {\n            transform: translateY(-4px);\n            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.5);\n          }\n          \n          .task-action-btn.edit {\n            border-color: #5884FD;\n            color: #5884FD;\n          }\n          \n          .task-action-btn.edit:hover {\n            background: #5884FD;\n            color: #FFFFFF;\n          }\n          \n          .task-action-btn.delete {\n            border-color: #EF4444;\n            color: #EF4444;\n          }\n          \n          .task-action-btn.delete:hover {\n            background: #EF4444;\n            color: #FFFFFF;\n          }\n          \n          .task-action-btn.close {\n            border-color: #C483D9;\n            color: #C483D9;\n          }\n          \n          .task-action-btn.close:hover {\n            background: #C483D9;\n            color: #FFFFFF;\n          }\n          \n          .task-description {\n            background: #141414;\n            padding: 1.5rem;\n            border: 2px solid rgba(255, 179, 51, 0.2);\n            border-radius: 12px;\n            margin-bottom: 2rem;\n            line-height: 1.6;\n            color: #FFFFFF;\n            white-space: pre-wrap;\n            backdrop-filter: blur(10px);\n            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.5);\n          }\n          \n          .task-description.empty {\n            color: #52525B;\n            font-style: italic;\n            text-align: center;\n          }\n          \n          .task-details-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(min(280px, 100%), 1fr));\n            gap: 1.5rem;\n            margin-bottom: 2rem;\n          }\n          \n          .task-detail-item {\n            display: flex;\n            align-items: center;\n            gap: 1rem;\n            padding: 1.25rem;\n            border: 2px solid rgba(255, 179, 51, 0.2);\n            border-radius: 12px;\n            background: #141414;\n            backdrop-filter: blur(10px);\n            transition: all 0.3s ease;\n            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.5);\n          }\n          \n          .task-detail-item:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.5);\n            border-color: #FFB333;\n          }\n          \n          .task-detail-icon {\n            flex-shrink: 0;\n            color: #FFB333;\n            width: 20px;\n            height: 20px;\n          }\n          \n          .task-detail-content {\n            flex: 1;\n          }\n          \n          .task-detail-label {\n            font-size: 0.875rem;\n            font-weight: 600;\n            color: #71717A;\n            margin-bottom: 0.25rem;\n            text-transform: uppercase;\n            letter-spacing: 0.05em;\n          }\n          \n          .task-detail-value {\n            font-weight: 600;\n            color: #FFFFFF;\n            font-size: 0.925rem;\n          }\n          \n          .task-status-actions-inline {\n            background: #141414;\n            border: 2px solid rgba(255, 179, 51, 0.2);\n            border-radius: 12px;\n            padding: 1.5rem;\n            margin-top: 2rem;\n            backdrop-filter: blur(10px);\n            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.5);\n          }\n          \n          .status-actions-title {\n            font-weight: 700;\n            color: #FFFFFF;\n            margin-bottom: 1rem;\n            font-size: 1rem;\n            letter-spacing: -0.025em;\n          }\n          \n          .status-buttons {\n            display: flex;\n            gap: 0.75rem;\n            flex-wrap: wrap;\n          }\n          \n          .status-btn {\n            display: flex;\n            align-items: center;\n            gap: 0.5rem;\n            padding: 0.75rem 1.25rem;\n            border: 2px solid #FFB333;\n            border-radius: 12px;\n            background: #141414;\n            cursor: pointer;\n            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);\n            font-weight: 600;\n            font-size: 0.875rem;\n            flex: 1;\n            min-width: auto;\n            justify-content: center;\n            color: #FFB333;\n          }\n          \n          .status-btn:hover {\n            transform: translateY(-3px);\n            box-shadow: 0 8px 24px rgba(255, 179, 51, 0.3);\n            background: #FFB333;\n            color: #FFFFFF;\n          }\n          \n          .status-btn.current {\n            background: #FFB333;\n            color: #FFFFFF;\n            transform: translateY(-2px);\n            box-shadow: 0 8px 24px rgba(255, 179, 51, 0.3);\n          }\n          \n          .status-btn:disabled {\n            opacity: 0.6;\n            cursor: not-allowed;\n            transform: none;\n          }\n          \n          .edit-form {\n            display: flex;\n            flex-direction: column;\n            gap: 2rem;\n          }\n          \n          .form-group {\n            display: flex;\n            flex-direction: column;\n            gap: 0.75rem;\n          }\n          \n          .form-label {\n            font-weight: 700;\n            color: #FFFFFF;\n            font-size: 0.925rem;\n            letter-spacing: 0.025em;\n          }\n          \n          .form-input, .form-textarea, .form-select {\n            padding: 1rem 1.25rem;\n            border: 2px solid rgba(255, 179, 51, 0.3);\n            border-radius: 12px;\n            font-size: 0.925rem;\n            background: #141414;\n            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);\n            backdrop-filter: blur(10px);\n            color: #FFFFFF;\n            font-weight: 500;\n          }\n          \n          .form-input:focus, .form-textarea:focus, .form-select:focus {\n            outline: none;\n            border-color: #FFB333;\n            box-shadow: 0 0 0 3px rgba(255, 179, 51, 0.1);\n            background: #1A1A1A;\n          }\n          \n          .form-textarea {\n            resize: vertical;\n            min-height: 120px;\n            font-family: inherit;\n            line-height: 1.6;\n          }\n          \n          .form-actions {\n            display: flex;\n            gap: 1.25rem;\n            margin-top: 1rem;\n            padding-top: 1.5rem;\n            border-top: 2px solid rgba(255, 179, 51, 0.2);\n          }\n          \n          .btn {\n            flex: 1;\n            padding: 1rem 2rem;\n            border-radius: 12px;\n            font-weight: 600;\n            cursor: pointer;\n            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);\n            border: 2px solid;\n            font-size: 0.925rem;\n            letter-spacing: 0.025em;\n          }\n          \n          .btn-primary {\n            background: #FFB333;\n            color: #FFFFFF;\n            border-color: #FFB333;\n          }\n          \n          .btn-primary:hover {\n            background: #F87239;\n            border-color: #F87239;\n            transform: translateY(-3px);\n            box-shadow: 0 12px 32px rgba(255, 179, 51, 0.4);\n          }\n          \n          .btn-secondary {\n            background: #141414;\n            color: #71717A;\n            border-color: #2D2D2D;\n          }\n          \n          .btn-secondary:hover {\n            background: #1F1F1F;\n            color: #FFFFFF;\n            border-color: #3D3D3D;\n            transform: translateY(-3px);\n          }\n          \n          .confirm-modal-overlay {\n            position: fixed;\n            inset: 0;\n            background: rgba(0, 0, 0, 0.9);\n            backdrop-filter: blur(8px);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            padding: 1rem;\n            z-index: 100002;\n            animation: fadeIn 0.3s ease-out;\n          }\n          \n          .confirm-modal-content {\n            background: #1A1A1A;\n            border: 2px solid #EF4444;\n            border-radius: 16px;\n            padding: 2rem;\n            max-width: 400px;\n            width: 100%;\n            text-align: center;\n            animation: slideUp 0.4s cubic-bezier(0.23, 1, 0.32, 1);\n            backdrop-filter: blur(20px);\n            box-shadow: 0 4px 24px rgba(0, 0, 0, 0.5);\n          }\n          \n          .confirm-modal-title {\n            font-size: 1.375rem;\n            font-weight: 700;\n            color: #EF4444;\n            margin-bottom: 1rem;\n            letter-spacing: -0.025em;\n          }\n          \n          .confirm-modal-text {\n            color: #71717A;\n            margin-bottom: 2rem;\n            line-height: 1.6;\n            font-weight: 500;\n          }\n          \n          .confirm-modal-actions {\n            display: flex;\n            gap: 1rem;\n          }\n          \n          .btn-danger {\n            flex: 1;\n            background: #EF4444;\n            color: #FFFFFF;\n            border: 2px solid #EF4444;\n            padding: 1rem 2rem;\n            border-radius: 12px;\n            font-weight: 600;\n            cursor: pointer;\n            transition: all 0.4s cubic-bezier(0.23, 1, 0.32, 1);\n          }\n          \n          .btn-danger:hover {\n            background: #DC2626;\n            border-color: #DC2626;\n            transform: translateY(-3px);\n            box-shadow: 0 12px 32px rgba(239, 68, 68, 0.4);\n          }\n          \n          @keyframes pulse {\n            0%, 100% { opacity: 1; }\n            50% { opacity: 0.7; }\n          }\n          \n          /* TABLET optimizations (max-width: 1024px) */\n          @media (max-width: 1024px) {\n            .task-modal-content {\n              max-width: calc(100vw - 2rem) !important;\n              height: 90vh !important;\n              max-height: 90vh !important;\n              border-radius: 16px !important;\n            }\n            .task-modal-header {\n              padding: 1.25rem 1.5rem !important;\n            }\n            .task-title {\n              font-size: 1.5rem !important;\n            }\n            .tab-content {\n              padding: 1.25rem 1.5rem !important;\n            }\n          }\n\n          /* MOBILE optimizations (max-width: 768px) */\n          @media (max-width: 768px) {\n            .task-modal-overlay {\n              padding: 0 !important;\n              align-items: flex-end !important;\n            }\n            .task-modal-content {\n              max-width: 100vw !important;\n              width: 100vw !important;\n              height: 95vh !important;\n              max-height: 95vh !important;\n              border-radius: 16px 16px 0 0 !important;\n              border-bottom: none !important;\n              margin: 0 !important;\n            }\n            .task-modal-header {\n              padding: 1rem !important;\n              flex-direction: column !important;\n              align-items: stretch !important;\n              gap: 0.75rem !important;\n            }\n            .task-title {\n              font-size: 1.25rem !important;\n              margin-bottom: 0.5rem !important;\n            }\n            .task-meta-badges {\n              gap: 0.5rem !important;\n            }\n            .task-badge {\n              padding: 0.375rem 0.75rem !important;\n              font-size: 0.75rem !important;\n              border-radius: 8px !important;\n              border-width: 1px !important;\n            }\n            .task-header-actions {\n              justify-content: flex-end !important;\n              gap: 0.5rem !important;\n            }\n            .task-action-btn {\n              padding: 0.625rem !important;\n              min-height: auto !important;\n              min-width: auto !important;\n              border-radius: 10px !important;\n            }\n            .tab-navigation {\n              flex-shrink: 0 !important;\n            }\n            .tab-button {\n              padding: 0.875rem 0.75rem !important;\n              font-size: 0.8rem !important;\n              gap: 0.5rem !important;\n              min-height: auto !important;\n              min-width: auto !important;\n            }\n            .tab-button:hover {\n              transform: none !important;\n            }\n            .tab-button.active {\n              transform: none !important;\n            }\n            .tab-content {\n              padding: 1rem !important;\n            }\n            .task-description {\n              padding: 1rem !important;\n              font-size: 0.875rem !important;\n              margin-bottom: 1rem !important;\n              border-width: 1px !important;\n            }\n            .task-details-grid {\n              grid-template-columns: 1fr !important;\n              gap: 0.75rem !important;\n              margin-bottom: 1rem !important;\n            }\n            .task-detail-item {\n              padding: 0.875rem !important;\n              gap: 0.75rem !important;\n              border-width: 1px !important;\n            }\n            .task-detail-item:hover {\n              transform: none !important;\n            }\n            .task-detail-label {\n              font-size: 0.75rem !important;\n            }\n            .task-detail-value {\n              font-size: 0.85rem !important;\n            }\n            .task-status-actions-inline {\n              padding: 1rem !important;\n              margin-top: 1rem !important;\n              border-width: 1px !important;\n            }\n            .status-buttons {\n              gap: 0.5rem !important;\n              flex-wrap: wrap !important;\n            }\n            .status-btn {\n              padding: 0.625rem 0.875rem !important;\n              font-size: 0.8rem !important;\n              border-radius: 10px !important;\n              border-width: 1px !important;\n              min-height: auto !important;\n              min-width: auto !important;\n              flex: 1 1 45% !important;\n            }\n            .status-btn:hover {\n              transform: none !important;\n            }\n            .edit-form {\n              gap: 1.25rem !important;\n            }\n            .edit-form div[style*=\"grid\"] {\n              grid-template-columns: 1fr !important;\n            }\n            .form-input, .form-textarea, .form-select {\n              padding: 0.875rem 1rem !important;\n              font-size: 16px !important;\n              border-width: 1px !important;\n            }\n            .form-actions {\n              flex-direction: column !important;\n              gap: 0.75rem !important;\n            }\n            .btn {\n              padding: 1rem !important;\n              font-size: 0.9rem !important;\n              min-height: auto !important;\n              min-width: auto !important;\n            }\n            .confirm-modal-content {\n              max-width: calc(100vw - 2rem) !important;\n              padding: 1.5rem !important;\n            }\n            .confirm-modal-actions {\n              flex-direction: column !important;\n              gap: 0.75rem !important;\n            }\n            .btn-danger {\n              min-height: auto !important;\n              min-width: auto !important;\n            }\n          }\n\n          /* SMALL MOBILE (max-width: 480px) */\n          @media (max-width: 480px) {\n            .task-modal-content {\n              height: 100vh !important;\n              max-height: 100vh !important;\n              border-radius: 0 !important;\n            }\n            .task-title {\n              font-size: 1.125rem !important;\n            }\n            .task-modal-header {\n              padding: 0.75rem !important;\n            }\n            .tab-content {\n              padding: 0.75rem !important;\n            }\n            .task-badge {\n              padding: 0.25rem 0.5rem !important;\n              font-size: 0.7rem !important;\n            }\n          }\n        "}}),(0,r.jsxs)("div",{className:"task-modal-content",onClick:n=>n.stopPropagation(),children:[(0,r.jsxs)("div",{className:"task-modal-header",children:[(0,r.jsxs)("div",{className:"task-title-section",children:[D?(0,r.jsx)("input",{type:"text",value:B.name,onChange:n=>E({...B,name:n.target.value}),className:"form-input",style:{fontSize:"1.5rem",fontWeight:"bold",marginBottom:"1rem"}}):(0,r.jsx)("h2",{className:"task-title",children:l.name}),(0,r.jsxs)("div",{className:"task-meta-badges",children:[(0,r.jsxs)("div",{className:"task-badge priority",children:[(0,r.jsx)("span",{children:Z.icon}),(0,r.jsxs)("span",{children:[Z.label," Priority"]})]}),(0,r.jsxs)("div",{className:"task-badge status",children:[(0,r.jsx)("span",{children:U.icon}),(0,r.jsx)("span",{children:U.label})]}),H&&(0,r.jsxs)("div",{className:"task-badge overdue",children:[(0,r.jsx)(k.Z,{style:{width:"16px",height:"16px"}}),(0,r.jsx)("span",{children:"Overdue"})]})]})]}),(0,r.jsxs)("div",{className:"task-header-actions",children:[(0,r.jsx)("button",{onClick:()=>N(!D),className:"task-action-btn edit",title:D?"Cancel Edit":"Edit Task",children:(0,r.jsx)(w.Z,{style:{width:"18px",height:"18px"}})}),b&&(0,r.jsx)("button",{onClick:()=>C(!0),className:"task-action-btn delete",title:"Delete Task",children:(0,r.jsx)(j.Z,{style:{width:"18px",height:"18px"}})}),(0,r.jsx)("button",{onClick:g,className:"task-action-btn close",title:"Close",children:(0,r.jsx)(F.Z,{style:{width:"18px",height:"18px"}})})]})]}),(0,r.jsxs)("div",{className:"task-modal-body",children:[(0,r.jsx)("div",{className:"tab-navigation",children:O.map(n=>(0,r.jsxs)("button",{onClick:()=>A(n.id),className:"tab-button ".concat(z===n.id?"active":""),children:[n.icon,(0,r.jsx)("span",{children:n.label})]},n.id))}),(0,r.jsxs)("div",{className:"tab-content ".concat(D?"editing":""),children:["task"===z&&(0,r.jsx)(r.Fragment,{children:D?(0,r.jsxs)("div",{className:"edit-form",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Description"}),(0,r.jsx)("textarea",{value:B.description,onChange:n=>E({...B,description:n.target.value}),className:"form-textarea",placeholder:"Describe what needs to be done..."})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(200px, 100%), 1fr))",gap:"1rem"},children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Priority"}),(0,r.jsx)("select",{value:B.priority,onChange:n=>E({...B,priority:n.target.value}),className:"form-select",children:T.map(n=>(0,r.jsxs)("option",{value:n.value,children:[n.icon," ",n.label]},n.value))})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Assignees"}),(0,r.jsx)("div",{style:{border:"2px solid #2D2D2D",borderRadius:"8px",padding:"0.75rem",background:"#141414",minHeight:"100px",maxHeight:"150px",overflowY:"auto"},children:0===p.length?(0,r.jsx)("div",{style:{color:"#71717A",fontStyle:"italic",textAlign:"center",padding:"1rem"},children:"No team members available"}):p.map(n=>(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.4rem",cursor:"pointer",borderRadius:"4px",transition:"background-color 0.2s ease",marginBottom:"0.2rem"},onMouseOver:n=>n.currentTarget.style.backgroundColor="#1F1F1F",onMouseOut:n=>n.currentTarget.style.backgroundColor="transparent",children:[(0,r.jsx)("input",{type:"checkbox",checked:B.assignee_ids.includes(n.id),onChange:e=>{e.target.checked?E({...B,assignee_ids:[...B.assignee_ids,n.id]}):E({...B,assignee_ids:B.assignee_ids.filter(e=>e!==n.id)})},style:{marginRight:"0.5rem",accentColor:"#FFFFFF"}}),(0,r.jsx)("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:B.assignee_ids.includes(n.id)?"#FFFFFF":"#1F1F1F",color:B.assignee_ids.includes(n.id)?"#000000":"#FFFFFF",border:"2px solid #FFFFFF",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.8rem",fontWeight:"600"},children:n.name.charAt(0).toUpperCase()}),(0,r.jsx)("span",{style:{fontSize:"0.85rem",fontWeight:"500",color:(B.assignee_ids.includes(n.id),"#FFFFFF")},children:n.name})]},n.id))}),B.assignee_ids.length>0&&(0,r.jsx)("div",{style:{marginTop:"0.5rem",padding:"0.4rem",background:"#1A1A1A",border:"1px solid #3b82f6",borderRadius:"4px",fontSize:"0.8rem",color:"#FFFFFF"},children:(0,r.jsxs)("strong",{children:[B.assignee_ids.length," assignee",1===B.assignee_ids.length?"":"s"," selected"]})})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Created by"}),(0,r.jsx)("input",{type:"text",value:(null===(e=l.created_by)||void 0===e?void 0:e.name)||"Unknown User",className:"form-input",disabled:!0,style:{backgroundColor:"#141414",color:"#71717A",cursor:"not-allowed"}})]})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(min(250px, 100%), 1fr))",gap:"1rem"},children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Start Date"}),(0,r.jsx)("input",{type:"date",value:B.start_date,onChange:n=>E({...B,start_date:n.target.value}),className:"form-input"})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Due Date"}),(0,r.jsx)("input",{type:"date",value:B.due_date,onChange:n=>E({...B,due_date:n.target.value}),className:"form-input"})]})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Tags"}),(0,r.jsx)("input",{type:"text",value:B.tags,onChange:n=>E({...B,tags:n.target.value}),className:"form-input",placeholder:"frontend, urgent, bug (comma-separated)"})]}),(0,r.jsxs)("div",{className:"form-actions",children:[(0,r.jsx)("button",{onClick:()=>N(!1),className:"btn btn-secondary",children:"Cancel"}),(0,r.jsx)("button",{onClick:Y,className:"btn btn-primary",children:"Save Changes"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"task-description ".concat(l.description?"":"empty"),children:l.description||"No description provided."}),(0,r.jsxs)("div",{className:"task-details-grid",children:[(0,r.jsxs)("div",{className:"task-detail-item",children:[(0,r.jsx)(h.Z,{className:"task-detail-icon",style:{width:"20px",height:"20px"}}),(0,r.jsxs)("div",{className:"task-detail-content",children:[(0,r.jsx)("div",{className:"task-detail-label",children:l.assignees&&l.assignees.length>1?"Assignees":"Assignee"}),(0,r.jsx)("div",{className:"task-detail-value",children:l.assignees&&l.assignees.length>0?(0,r.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flexWrap:"wrap"},children:l.assignees.map((n,e)=>(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.25rem"},children:[(0,r.jsx)("div",{style:{width:"24px",height:"24px",borderRadius:"50%",background:"#FFFFFF",color:"#000000",border:"2px solid #2D2D2D",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.7rem",fontWeight:"600",marginLeft:e>0?"-8px":"0",zIndex:l.assignees.length-e,position:"relative"},children:n.name.charAt(0).toUpperCase()}),(0,r.jsx)("span",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#FFFFFF"},children:n.name}),e<l.assignees.length-1&&l.assignees.length>1&&(0,r.jsx)("span",{style:{color:"#71717A"},children:","})]},n.id))}):l.assignee?l.assignee.name:"Unassigned"})]})]}),(0,r.jsxs)("div",{className:"task-detail-item",children:[(0,r.jsx)(d.Z,{className:"task-detail-icon",style:{width:"20px",height:"20px"}}),(0,r.jsxs)("div",{className:"task-detail-content",children:[(0,r.jsx)("div",{className:"task-detail-label",children:"Due Date"}),(0,r.jsx)("div",{className:"task-detail-value",children:L(l.due_date)})]})]}),(0,r.jsxs)("div",{className:"task-detail-item",children:[(0,r.jsx)(m.Z,{className:"task-detail-icon",style:{width:"20px",height:"20px"}}),(0,r.jsxs)("div",{className:"task-detail-content",children:[(0,r.jsx)("div",{className:"task-detail-label",children:"Start Date"}),(0,r.jsx)("div",{className:"task-detail-value",children:L(l.start_date)})]})]}),(0,r.jsxs)("div",{className:"task-detail-item",children:[(0,r.jsx)(m.Z,{className:"task-detail-icon",style:{width:"20px",height:"20px"}}),(0,r.jsxs)("div",{className:"task-detail-content",children:[(0,r.jsx)("div",{className:"task-detail-label",children:"Estimated Hours"}),(0,r.jsx)("div",{className:"task-detail-value",children:l.estimated_hours?"".concat(l.estimated_hours,"h"):"Not set"})]})]}),l.tags_list&&l.tags_list.length>0&&(0,r.jsxs)("div",{className:"task-detail-item",children:[(0,r.jsx)(u.Z,{className:"task-detail-icon",style:{width:"20px",height:"20px"}}),(0,r.jsxs)("div",{className:"task-detail-content",children:[(0,r.jsx)("div",{className:"task-detail-label",children:"Tags"}),(0,r.jsx)("div",{className:"task-detail-value",children:l.tags_list.join(", ")})]})]}),(0,r.jsxs)("div",{className:"task-detail-item",children:[(0,r.jsx)(h.Z,{className:"task-detail-icon",style:{width:"20px",height:"20px"}}),(0,r.jsxs)("div",{className:"task-detail-content",children:[(0,r.jsx)("div",{className:"task-detail-label",children:"Created by"}),(0,r.jsx)("div",{className:"task-detail-value",children:(null===(t=l.created_by)||void 0===t?void 0:t.name)||"Unknown User"})]})]}),(0,r.jsxs)("div",{className:"task-detail-item",children:[(0,r.jsx)(d.Z,{className:"task-detail-icon",style:{width:"20px",height:"20px"}}),(0,r.jsxs)("div",{className:"task-detail-content",children:[(0,r.jsx)("div",{className:"task-detail-label",children:"Created"}),(0,r.jsx)("div",{className:"task-detail-value",children:R(l.created_at)})]})]}),(0,r.jsxs)("div",{className:"task-detail-item",children:[(0,r.jsx)(d.Z,{className:"task-detail-icon",style:{width:"20px",height:"20px"}}),(0,r.jsxs)("div",{className:"task-detail-content",children:[(0,r.jsx)("div",{className:"task-detail-label",children:"Last Updated"}),(0,r.jsx)("div",{className:"task-detail-value",children:R(l.updated_at)})]})]})]}),!D&&f&&(0,r.jsxs)("div",{className:"task-status-actions-inline",children:[(0,r.jsx)("div",{className:"status-actions-title",children:"Change Status"}),(0,r.jsx)("div",{className:"status-buttons",children:I.map(n=>(0,r.jsxs)("button",{onClick:()=>P(n.value),className:"status-btn ".concat(n.value===l.status?"current":""),disabled:n.value===l.status,children:[(0,r.jsx)("span",{children:n.icon}),(0,r.jsx)("span",{children:n.label})]},n.value))})]})]})}),"comments"===z&&(0,r.jsx)("div",{style:{height:"100%"},children:(0,r.jsx)(_,{task:l})})]})]})]}),S&&(0,r.jsx)("div",{className:"confirm-modal-overlay",onClick:()=>C(!1),children:(0,r.jsxs)("div",{className:"confirm-modal-content",onClick:n=>n.stopPropagation(),children:[(0,r.jsx)("h3",{className:"confirm-modal-title",children:"Delete Task"}),(0,r.jsxs)("p",{className:"confirm-modal-text",children:['Are you sure you want to delete "',l.name,'"? This action cannot be undone.']}),(0,r.jsxs)("div",{className:"confirm-modal-actions",children:[(0,r.jsx)("button",{onClick:()=>C(!1),className:"btn btn-secondary",children:"Cancel"}),(0,r.jsx)("button",{onClick:W,className:"btn-danger",children:"Delete Task"})]})]})})]});return(0,v.createPortal)(V,document.body)}var B=t(33617);let E=[{value:"todo",label:"To Do",color:"#f3f4f6",icon:""},{value:"in_progress",label:"In Progress",color:"#dbeafe",icon:""},{value:"review",label:"Review",color:"#fef3c7",icon:""},{value:"done",label:"Done",color:"#d1fae5",icon:""}],L=[{value:"low",label:"Low",color:"#10b981",icon:""},{value:"medium",label:"Medium",color:"#f59e0b",icon:""},{value:"high",label:"High",color:"#ef4444",icon:""},{value:"urgent",label:"Urgent",color:"#dc2626",icon:""}],R=[{value:"all",label:"All Tasks"},{value:"todo",label:"To Do"},{value:"in_progress",label:"In Progress"},{value:"in_review",label:"In Review"},{value:"done",label:"Done"},{value:"overdue",label:"Overdue"},{value:"today",label:"Due Today"},{value:"this_week",label:"Due This Week"}];function Y(){let n=(0,i.useRouter)(),{user:e,isAuthenticated:t,isLoading:v}=(0,o.useAuth)(),[y,k]=(0,a.useState)([]),[w,j]=(0,a.useState)([]),[F,D]=(0,a.useState)([]),[N,S]=(0,a.useState)([]),[C,z]=(0,a.useState)(!0),[A,_]=(0,a.useState)(""),[T,I]=(0,a.useState)(""),[Y,P]=(0,a.useState)("all"),[W,Z]=(0,a.useState)("all"),[U,H]=(0,a.useState)(null),[O,V]=(0,a.useState)(!1),[G,J]=(0,a.useState)([]),[q,$]=(0,a.useState)([]),[K,X]=(0,a.useState)(""),[Q,nn]=(0,a.useState)(!1),[ne,nt]=(0,a.useState)(!1),[nr,na]=(0,a.useState)(null),[ni,no]=(0,a.useState)(!1),[ns,nl]=(0,a.useState)("details"),[nd,nc]=(0,a.useState)(!1),[nm,np]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let n=()=>{nc(window.innerWidth<768)};n(),window.addEventListener("resize",n);let e=n=>{np(n.detail.isCollapsed)};window.addEventListener("sidebarCollapsedChange",e);let t=localStorage.getItem("sidebarCollapsed");return"true"===t&&np(!0),()=>{window.removeEventListener("resize",n),window.removeEventListener("sidebarCollapsedChange",e)}},[]);let[ng,nh]=(0,a.useState)("list"),[nu,nx]=(0,a.useState)(new Date),nf=n=>new Date(n.getFullYear(),n.getMonth()+1,0).getDate(),nb=n=>new Date(n.getFullYear(),n.getMonth(),1).getDay(),nv=()=>{nx(new Date(nu.getFullYear(),nu.getMonth()-1))},ny=()=>{nx(new Date(nu.getFullYear(),nu.getMonth()+1))},nk=n=>{let e=n.toISOString().split("T")[0];return w.filter(n=>{if(!n.due_date)return!1;let t=new Date(n.due_date).toISOString().split("T")[0];return t===e})};(0,a.useEffect)(()=>{if(!v){if(!t){n.push("/login");return}nw(),nj(),nF()}},[t,v,n]),(0,a.useEffect)(()=>{nD()},[y,T,Y,W]);let nw=async()=>{try{let n=await s.taskService.getUserTasks();k(n)}catch(n){console.error("Failed to fetch tasks:",n),_("Failed to fetch your tasks")}finally{z(!1)}},nj=async()=>{try{let n=await s.projectService.getProjects();D(n)}catch(n){console.error("Failed to fetch projects:",n)}},nF=async()=>{try{let n=await s.projectService.getUsers();S(n)}catch(n){console.error("Failed to fetch users:",n)}},nD=()=>{let n=[...y];T.trim()&&(n=n.filter(n=>n.name.toLowerCase().includes(T.toLowerCase())||n.description.toLowerCase().includes(T.toLowerCase())||n.project.name.toLowerCase().includes(T.toLowerCase())||n.tags_list.some(n=>n.toLowerCase().includes(T.toLowerCase())))),"overdue"===Y?n=n.filter(n=>n_(n.due_date)):"today"===Y?n=n.filter(n=>nT(n.due_date)):"this_week"===Y?n=n.filter(n=>nI(n.due_date)):"all"!==Y&&(n=n.filter(n=>n.status===Y)),"all"!==W&&(n=n.filter(n=>n.priority===W)),n.sort((n,e)=>{var t,r;let a={urgent:0,high:1,medium:2,low:3},i=null!==(t=a[n.priority])&&void 0!==t?t:4,o=null!==(r=a[e.priority])&&void 0!==r?r:4;if(i!==o)return i-o;if(n.due_date&&e.due_date){let t=new Date(n.due_date).getTime(),r=new Date(e.due_date).getTime();if(t!==r)return t-r}else if(n.due_date&&!e.due_date)return -1;else if(!n.due_date&&e.due_date)return 1;let s=new Date(n.created_at).getTime(),l=new Date(e.created_at).getTime();return s!==l?s-l:n.name.localeCompare(e.name)}),j(n)},nN=async(n,e)=>{try{await s.taskService.updateTaskStatus(n,e);let t=y.find(e=>e.id===n);k(y.map(t=>t.id===n?{...t,status:e}:t)),U&&U.id===n&&H({...U,status:e}),t&&("done"===e?((0,B.c0)("\uD83C\uDF89 Task Completed!",'"'.concat(t.name,'" has been marked as done'),{urgency:"normal"}),B.Jm.cancelReminder(String(n))):"in_progress"===e&&(0,B.c0)("\uD83D\uDCDD Task Started",'"'.concat(t.name,'" is now in progress')))}catch(n){_("Failed to update task status")}},nS=async n=>{nn(!0),nt(!0);try{let[e,t]=await Promise.all([s.taskService.getTaskComments(n),s.taskService.getTaskAttachments(n).catch(()=>[])]);J(e||[]),$(t||[])}catch(n){console.error("Failed to fetch task details:",n)}finally{nn(!1),nt(!1)}},nC=async n=>{if(U)try{let e=await s.taskService.updateTask(U.id,n);k(y.map(n=>n.id===U.id?e:n)),H(e),_("")}catch(n){throw _("Failed to update task"),n}},nz=async n=>{H(n),V(!0),await nS(n.id)},nA=async n=>{try{await s.taskService.deleteTask(n),k(y.filter(e=>e.id!==n)),_("")}catch(n){throw _("Failed to delete task"),n}},n_=n=>{if(!n)return!1;let e=new Date;return e.setHours(0,0,0,0),new Date(n)<e},nT=n=>{if(!n)return!1;let e=new Date,t=new Date(n);return e.toDateString()===t.toDateString()},nI=n=>{if(!n)return!1;let e=new Date,t=new Date(n),r=new Date;return r.setDate(e.getDate()+7),t>=e&&t<=r},nM=n=>{if(!n)return null;let e=new Date,t=new Date(n),r=t.getTime()-e.getTime();return Math.ceil(r/864e5)},nB=n=>{if(!n)return"";let e=new Date(n);return e.toLocaleDateString("en-US",{month:"short",day:"numeric",year:e.getFullYear()!==new Date().getFullYear()?"numeric":void 0})},nE=n=>L.find(e=>e.value===n)||L[1],nL=n=>E.find(e=>e.value===n)||E[0],nR=(()=>{let n=y.length,e=y.filter(n=>"done"===n.status).length,t=y.filter(n=>n_(n.due_date)).length,r=y.filter(n=>nT(n.due_date)).length;return{total:n,completed:e,overdue:t,dueToday:r}})();return v?(0,r.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#F5F5ED"},children:(0,r.jsx)("div",{style:{width:"32px",height:"32px",border:"3px solid #C483D9",borderTop:"3px solid #5884FD",borderRadius:"50%",animation:"spin 1s linear infinite"}})}):t?C?(0,r.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#F5F5ED"},children:(0,r.jsx)("div",{style:{width:"32px",height:"32px",border:"3px solid #C483D9",borderTop:"3px solid #5884FD",borderRadius:"50%",animation:"spin 1s linear infinite"}})}):(0,r.jsxs)("div",{children:[(0,r.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n          @keyframes spin {\n            to { transform: rotate(360deg); }\n          }\n          @keyframes pulse {\n            0%, 100% { opacity: 1; }\n            50% { opacity: 0.7; }\n          }\n          @keyframes fadeIn {\n            from { opacity: 0; }\n            to { opacity: 1; }\n          }\n          @keyframes slideIn {\n            from { transform: translateY(-20px); opacity: 0; }\n            to { transform: translateY(0); opacity: 1; }\n          }\n          body {\n            margin: 0;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;\n            background: #F5F5ED;\n          }\n          .my-tasks-container {\n            min-height: 100vh;\n            display: flex;\n            background: #F5F5ED;\n          }\n          .main-content {\n            flex: 1;\n            margin-left: ".concat(nd?"0":nm?"72px":"256px",";\n            background: transparent;\n            padding-top: ").concat(nd?"70px":"0",";\n            padding-left: ").concat(nd?"12px":"0",";\n            padding-right: ").concat(nd?"12px":"0",";\n            transition: margin-left 0.3s ease;\n          }\n          .header {\n            background: transparent;\n            padding: 2rem;\n            margin-bottom: 3rem;\n          }\n          .header-content {\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            margin-bottom: 2rem;\n            padding-bottom: 1.5rem;\n          }\n          .header-title {\n            font-size: 2.5rem;\n            font-weight: 300;\n            color: #1a1a1a;\n            margin: 0;\n            letter-spacing: -0.02em;\n          }\n          .header-subtitle {\n            color: #666666;\n            font-size: 1.1rem;\n            font-weight: 400;\n            line-height: 1.5;\n            margin: 0.5rem 0 0 0;\n          }\n          .stats-grid {\n            display: grid;\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\n            gap: 1.5rem;\n            margin-bottom: 0;\n          }\n          .stat-card {\n            background: #ffffff;\n            border: 1px solid #e8e8e8;\n            border-radius: 16px;\n            padding: 1.5rem;\n            text-align: left;\n            transition: all 0.2s ease;\n            box-shadow: 0 2px 16px rgba(0, 0, 0, 0.04);\n          }\n          .stat-card:hover {\n            transform: translateY(-2px);\n          }\n          .stat-number {\n            font-size: 2rem;\n            font-weight: 700;\n            margin-bottom: 0.25rem;\n            line-height: 1;\n          }\n          .stat-label {\n            font-size: 0.875rem;\n            font-weight: 500;\n            margin: 0;\n          }\n          .filters-section {\n            background: #ffffff;\n            border: 1px solid #e8e8e8;\n            border-radius: 16px;\n            padding: 2rem;\n            margin: 0 2rem 2rem 2rem;\n            box-shadow: 0 2px 16px rgba(0, 0, 0, 0.04);\n          }\n          .filters-grid {\n            display: grid;\n            grid-template-columns: 2fr 1fr 1fr;\n            gap: 2rem;\n            align-items: end;\n          }\n          .filter-group {\n            display: flex;\n            flex-direction: column;\n            gap: 0.75rem;\n          }\n          .filter-label {\n            font-weight: 600;\n            color: #1a1a1a;\n            font-size: 1rem;\n            letter-spacing: -0.01em;\n            margin-bottom: 0.75rem;\n            display: block;\n          }\n          .search-input {\n            width: 100%;\n            padding: 0.9rem 3rem 0.9rem 1rem;\n            border: 2px solid #e8e8e8;\n            border-radius: 16px;\n            font-size: 0.95rem;\n            box-sizing: border-box;\n            background: #ffffff;\n            color: #1a1a1a;\n            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n            font-weight: 500;\n            letter-spacing: -0.01em;\n            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\n          }\n          .search-input:hover {\n            border-color: #C483D9;\n            background: #fafafa;\n            transform: translateY(-1px);\n            box-shadow: 0 4px 16px rgba(196, 131, 217, 0.15);\n          }\n          .search-input:focus {\n            outline: none;\n            border-color: #5884FD;\n            background: #ffffff;\n            box-shadow: 0 0 0 4px rgba(88, 132, 253, 0.1), 0 4px 16px rgba(88, 132, 253, 0.2);\n            transform: translateY(-2px);\n          }\n          .search-input:active {\n            transform: translateY(0);\n          }\n          .filter-select {\n            width: 100%;\n            padding: 0.9rem 1rem;\n            border: 2px solid #e8e8e8;\n            border-radius: 16px;\n            font-size: 0.95rem;\n            box-sizing: border-box;\n            background: #ffffff;\n            color: #1a1a1a;\n            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n            font-weight: 500;\n            letter-spacing: -0.01em;\n            cursor: pointer;\n            appearance: none;\n            background-image: url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e\");\n            background-position: right 1rem center;\n            background-repeat: no-repeat;\n            background-size: 1rem;\n            padding-right: 3rem;\n            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\n          }\n          .filter-select:hover {\n            border-color: #C483D9;\n            background: #fafafa;\n            transform: translateY(-1px);\n            box-shadow: 0 4px 16px rgba(196, 131, 217, 0.15);\n          }\n          .filter-select:focus {\n            outline: none;\n            border-color: #5884FD;\n            background: #ffffff;\n            box-shadow: 0 0 0 4px rgba(88, 132, 253, 0.1), 0 4px 16px rgba(88, 132, 253, 0.2);\n            transform: translateY(-2px);\n          }\n          .filter-select:active {\n            transform: translateY(0);\n          }\n          .tasks-section {\n            padding: 0 2rem 2rem 2rem;\n          }\n          .tasks-list {\n            display: flex;\n            flex-direction: column;\n            gap: 1rem;\n          }\n          .task-item {\n            background: #ffffff;\n            border: 1px solid #e8e8e8;\n            border-radius: 16px;\n            padding: 2rem;\n            transition: all 0.3s ease;\n            cursor: pointer;\n            position: relative;\n            overflow: hidden;\n            box-shadow: 0 2px 16px rgba(0, 0, 0, 0.04);\n          }\n          .task-item:hover {\n            transform: translateY(-2px);\n            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\n            border-color: #C483D9;\n          }\n          .task-item.overdue {\n            border-color: #ef4444;\n            background: linear-gradient(135deg, #ffffff 0%, #fef2f2 100%);\n          }\n          .task-item.urgent {\n            border-color: #f59e0b;\n            background: linear-gradient(135deg, #ffffff 0%, #fff7ed 100%);\n          }\n          .task-header {\n            display: flex;\n            align-items: start;\n            justify-content: space-between;\n            margin-bottom: 1rem;\n          }\n          .task-title-section {\n            flex: 1;\n          }\n          .task-title {\n            font-weight: 500;\n            color: #1a1a1a;\n            font-size: 1.2rem;\n            line-height: 1.4;\n            margin-bottom: 0.5rem;\n            letter-spacing: -0.01em;\n          }\n          .task-project {\n            font-size: 0.85rem;\n            color: #666666;\n            font-weight: 500;\n            margin: 0 0.5rem;\n          }\n          .task-actions {\n            display: flex;\n            align-items: center;\n            gap: 0.75rem;\n          }\n          .priority-badge {\n            display: flex;\n            align-items: center;\n            gap: 0.25rem;\n            padding: 0.25rem 0.75rem;\n            border-radius: 20px;\n            font-size: 0.75rem;\n            font-weight: 600;\n            border: 1px solid;\n          }\n          .status-badge {\n            display: flex;\n            align-items: center;\n            gap: 0.25rem;\n            padding: 0.25rem 0.75rem;\n            border-radius: 20px;\n            font-size: 0.75rem;\n            font-weight: 600;\n            border: 1px solid;\n          }\n          .task-description {\n            font-size: 0.9rem;\n            color: #6b7280;\n            margin-bottom: 1rem;\n            line-height: 1.5;\n          }\n          .task-meta {\n            display: flex;\n            flex-wrap: wrap;\n            gap: 1rem;\n            margin-bottom: 1rem;\n          }\n          .task-meta-item {\n            display: flex;\n            align-items: center;\n            gap: 0.5rem;\n            font-size: 0.8rem;\n            color: #6b7280;\n            background: #f9fafb;\n            padding: 0.5rem 0.75rem;\n            border-radius: 6px;\n            border: 1px solid #e5e7eb;\n          }\n          .task-meta-item.overdue {\n            background: #fef2f2;\n            border-color: #fecaca;\n            color: #dc2626;\n            animation: pulse 2s infinite;\n          }\n          .task-actions-row {\n            display: flex;\n            gap: 0.5rem;\n            flex-wrap: wrap;\n          }\n          .status-btn {\n            padding: 0.5rem 1rem;\n            border: 1px solid #e0e0e0;\n            border-radius: 8px;\n            font-size: 0.8rem;\n            cursor: pointer;\n            transition: all 0.2s ease;\n            background: #ffffff;\n            color: #666666;\n            font-weight: 500;\n          }\n          .status-btn:hover {\n            background: #5884FD;\n            color: #ffffff;\n            border-color: #5884FD;\n            transform: translateY(-1px);\n            box-shadow: 0 2px 8px rgba(88, 132, 253, 0.3);\n          }\n          .view-btn {\n            padding: 0.5rem;\n            border: 1px solid #e0e0e0;\n            border-radius: 8px;\n            background: #ffffff;\n            color: #666666;\n            cursor: pointer;\n            transition: all 0.2s ease;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n          }\n          .view-btn:hover {\n            background: #5884FD;\n            color: #ffffff;\n            border-color: #5884FD;\n            transform: translateY(-1px);\n          }\n          .empty-state {\n            display: flex;\n            flex-direction: column;\n            align-items: center;\n            justify-content: center;\n            padding: 4rem 2rem;\n            text-align: center;\n            color: #9ca3af;\n          }\n          .empty-state-icon {\n            font-size: 4rem;\n            margin-bottom: 1rem;\n            opacity: 0.5;\n          }\n          .empty-state-title {\n            font-size: 1.25rem;\n            font-weight: 600;\n            margin-bottom: 0.5rem;\n          }\n          .empty-state-text {\n            font-size: 0.95rem;\n            line-height: 1.5;\n          }\n          .error-message {\n            background: #ffffff;\n            border: 1px solid #F87239;\n            color: #F87239;\n            padding: 1rem;\n            border-radius: 12px;\n            margin: 0 2rem 2rem 2rem;\n            font-weight: 500;\n            box-shadow: 0 2px 8px rgba(248, 114, 57, 0.1);\n          }\n          .modal-overlay {\n            position: fixed;\n            inset: 0;\n            background: rgba(0, 0, 0, 0.8);\n            backdrop-filter: blur(4px);\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            padding: 1rem;\n            z-index: 50;\n            animation: fadeIn 0.3s ease-out;\n          }\n          .modal-content {\n            background: #ffffff;\n            border: 2px solid #000000;\n            padding: 0;\n            width: 100%;\n            max-width: 900px;\n            border-radius: 12px;\n            max-height: 90vh;\n            overflow: hidden;\n            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n            animation: slideIn 0.3s ease-out;\n            display: flex;\n            flex-direction: column;\n          }\n          .modal-header {\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            padding: 1.5rem 2rem;\n            border-bottom: 2px solid #f3f4f6;\n            flex-shrink: 0;\n          }\n          .modal-body {\n            flex: 1;\n            overflow-y: auto;\n            padding: 2rem;\n          }\n          .modal-tabs {\n            display: flex;\n            border-bottom: 2px solid #f3f4f6;\n            margin-bottom: 1.5rem;\n          }\n          .modal-tab {\n            padding: 0.75rem 1.5rem;\n            border: none;\n            background: none;\n            cursor: pointer;\n            font-weight: 500;\n            color: #666666;\n            border-bottom: 2px solid transparent;\n            transition: all 0.2s ease;\n          }\n          .modal-tab.active {\n            color: #000000;\n            border-bottom-color: #000000;\n          }\n          .modal-tab:hover {\n            color: #000000;\n          }\n          .tab-content {\n            display: none;\n          }\n          .tab-content.active {\n            display: block;\n          }\n          .comments-section {\n            max-height: 400px;\n            overflow-y: auto;\n            margin-bottom: 1rem;\n          }\n          .comment-item {\n            display: flex;\n            gap: 0.75rem;\n            margin-bottom: 1rem;\n            padding: 1rem;\n            background: #f9fafb;\n            border-radius: 8px;\n            border: 1px solid #e5e7eb;\n          }\n          .comment-avatar {\n            width: 32px;\n            height: 32px;\n            background: #e5e7eb;\n            border: 1px solid #000000;\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 0.8rem;\n            font-weight: 600;\n            color: #000000;\n            flex-shrink: 0;\n          }\n          .comment-content {\n            flex: 1;\n          }\n          .comment-header {\n            display: flex;\n            align-items: center;\n            gap: 0.5rem;\n            margin-bottom: 0.5rem;\n          }\n          .comment-author {\n            font-weight: 600;\n            color: #000000;\n            font-size: 0.9rem;\n          }\n          .comment-date {\n            font-size: 0.75rem;\n            color: #666666;\n          }\n          .comment-text {\n            color: #374151;\n            line-height: 1.5;\n            font-size: 0.9rem;\n          }\n          .comment-form {\n            display: flex;\n            gap: 0.75rem;\n            align-items: end;\n          }\n          .comment-input {\n            flex: 1;\n            padding: 0.75rem;\n            border: 2px solid #e5e7eb;\n            border-radius: 8px;\n            font-size: 0.9rem;\n            resize: vertical;\n            min-height: 80px;\n            font-family: inherit;\n          }\n          .comment-input:focus {\n            outline: none;\n            border-color: #000000;\n          }\n          .comment-btn {\n            padding: 0.75rem 1.5rem;\n            background: #000000;\n            color: #ffffff;\n            border: none;\n            border-radius: 8px;\n            font-weight: 600;\n            cursor: pointer;\n            transition: all 0.2s ease;\n            white-space: nowrap;\n          }\n          .comment-btn:hover {\n            background: #333333;\n          }\n          .attachments-section {\n            margin-bottom: 1.5rem;\n          }\n          .attachment-item {\n            display: flex;\n            align-items: center;\n            gap: 0.75rem;\n            padding: 0.75rem;\n            background: #f9fafb;\n            border-radius: 8px;\n            border: 1px solid #e5e7eb;\n            margin-bottom: 0.5rem;\n          }\n          .attachment-icon {\n            width: 32px;\n            height: 32px;\n            background: #e5e7eb;\n            border-radius: 4px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            color: #666666;\n          }\n          .attachment-info {\n            flex: 1;\n          }\n          .attachment-name {\n            font-weight: 500;\n            color: #000000;\n            font-size: 0.9rem;\n            margin-bottom: 0.25rem;\n          }\n          .attachment-meta {\n            font-size: 0.75rem;\n            color: #666666;\n          }\n          .attachment-download {\n            padding: 0.5rem;\n            background: none;\n            border: 1px solid #000000;\n            border-radius: 4px;\n            cursor: pointer;\n            color: #000000;\n            transition: all 0.2s ease;\n          }\n          .attachment-download:hover {\n            background: #f3f4f6;\n          }\n          .file-upload-section {\n            border: 2px dashed #e5e7eb;\n            border-radius: 8px;\n            padding: 1.5rem;\n            text-align: center;\n            transition: all 0.2s ease;\n          }\n          .file-upload-section:hover {\n            border-color: #000000;\n            background: #f9fafb;\n          }\n          .file-upload-input {\n            display: none;\n          }\n          .file-upload-btn {\n            padding: 0.75rem 1.5rem;\n            background: #ffffff;\n            color: #000000;\n            border: 2px solid #000000;\n            border-radius: 8px;\n            font-weight: 600;\n            cursor: pointer;\n            transition: all 0.2s ease;\n            display: inline-flex;\n            align-items: center;\n            gap: 0.5rem;\n          }\n          .file-upload-btn:hover {\n            background: #f3f4f6;\n          }\n          .selected-file {\n            margin-top: 1rem;\n            padding: 0.75rem;\n            background: #f0f9ff;\n            border: 1px solid #0ea5e9;\n            border-radius: 8px;\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n          }\n          .upload-btn {\n            padding: 0.5rem 1rem;\n            background: #000000;\n            color: #ffffff;\n            border: none;\n            border-radius: 4px;\n            font-weight: 500;\n            cursor: pointer;\n            transition: all 0.2s ease;\n            display: flex;\n            align-items: center;\n            gap: 0.5rem;\n          }\n          .upload-btn:hover {\n            background: #333333;\n          }\n          .upload-btn:disabled {\n            background: #cccccc;\n            cursor: not-allowed;\n          }\n          \n          /* Calendar View Styles */\n          .calendar-day-cell {\n            position: relative;\n            transition: all 0.2s ease;\n          }\n          .calendar-day-cell:hover {\n            background: #f8fafc !important;\n          }\n          .calendar-grid {\n            border-collapse: separate;\n            border-spacing: 1px;\n          }\n          .loading-spinner {\n            width: 16px;\n            height: 16px;\n            border: 2px solid #ffffff;\n            border-top: 2px solid transparent;\n            border-radius: 50%;\n            animation: spin 1s linear infinite;\n          }\n          .modal-title {\n            font-size: 1.5rem;\n            font-weight: bold;\n            color: #000000;\n            margin: 0;\n          }\n          .close-btn {\n            background: none;\n            border: none;\n            padding: 0.5rem;\n            border-radius: 4px;\n            cursor: pointer;\n            color: #666666;\n            transition: all 0.2s ease;\n          }\n          .close-btn:hover {\n            background: #f3f4f6;\n            color: #000000;\n          }\n          /* Tablet styles */\n          @media (max-width: 1024px) {\n            .main-content {\n              margin-left: 0;\n            }\n            .filters-grid {\n              grid-template-columns: 1fr 1fr;\n            }\n            .header {\n              padding: 1rem 1.5rem;\n            }\n            .filters-section {\n              margin: 1.5rem;\n              padding: 1.25rem;\n            }\n            .tasks-section {\n              padding: 0 1.5rem 1.5rem 1.5rem;\n            }\n          }\n\n          /* Mobile styles */\n          @media (max-width: 768px) {\n            .main-content {\n              margin-left: 0;\n            }\n            .header {\n              padding: 1rem;\n              position: relative;\n              border-bottom: 1px solid #e5e7eb;\n            }\n            .header-content {\n              flex-direction: column;\n              gap: 1rem;\n              align-items: stretch;\n            }\n            .header-title {\n              font-size: 1.5rem;\n            }\n            .header-subtitle {\n              font-size: 0.9rem;\n            }\n            .stats-grid {\n              grid-template-columns: repeat(2, 1fr);\n              gap: 0.75rem;\n            }\n            .stat-card {\n              padding: 0.75rem;\n            }\n            .stat-number {\n              font-size: 1.25rem;\n            }\n            .stat-label {\n              font-size: 0.75rem;\n            }\n            .filters-section {\n              margin: 1rem;\n              padding: 1rem;\n              border-radius: 8px;\n            }\n            .filters-grid {\n              grid-template-columns: 1fr;\n              gap: 1rem;\n            }\n            .search-input {\n              padding: 0.875rem 3rem 0.875rem 1rem;\n              font-size: 1rem;\n              border-radius: 12px;\n            }\n            .filter-select {\n              padding: 0.875rem 3rem 0.875rem 1rem;\n              font-size: 1rem;\n              border-radius: 12px;\n            }\n            .tasks-section {\n              padding: 0 1rem 1rem 1rem;\n            }\n            .task-item {\n              padding: 1rem;\n              border-radius: 8px;\n            }\n            .task-header {\n              flex-direction: column;\n              align-items: start;\n              gap: 0.75rem;\n            }\n            .task-title {\n              font-size: 1rem;\n              margin-bottom: 0.25rem;\n            }\n            .task-project {\n              font-size: 0.8rem;\n            }\n            .task-actions {\n              align-self: stretch;\n              justify-content: flex-start;\n              flex-wrap: wrap;\n              gap: 0.5rem;\n            }\n            .priority-badge, .status-badge {\n              font-size: 0.7rem;\n              padding: 0.25rem 0.5rem;\n            }\n            .task-description {\n              font-size: 0.85rem;\n              margin-bottom: 0.75rem;\n            }\n            .task-meta {\n              gap: 0.5rem;\n              margin-bottom: 0.75rem;\n            }\n            .task-meta-item {\n              font-size: 0.75rem;\n              padding: 0.375rem 0.5rem;\n            }\n            .task-actions-row {\n              gap: 0.375rem;\n            }\n            .status-btn {\n              padding: 0.5rem 0.75rem;\n              font-size: 0.75rem;\n              flex: 1;\n              min-width: fit-content;\n            }\n            .view-btn {\n              padding: 0.5rem;\n              min-width: 40px;\n              height: 40px;\n            }\n            .empty-state {\n              padding: 2rem 1rem;\n            }\n            .empty-state-icon {\n              font-size: 3rem;\n            }\n            .empty-state-title {\n              font-size: 1.1rem;\n            }\n            .empty-state-text {\n              font-size: 0.9rem;\n            }\n            .error-message {\n              margin: 1rem;\n              padding: 0.875rem;\n              font-size: 0.9rem;\n            }\n          }\n\n          /* Small mobile styles */\n          @media (max-width: 480px) {\n            .header {\n              padding: 0.75rem;\n            }\n            .header-title {\n              font-size: 1.375rem;\n            }\n            .stats-grid {\n              gap: 0.5rem;\n            }\n            .stat-card {\n              padding: 0.625rem;\n            }\n            .stat-number {\n              font-size: 1.125rem;\n            }\n            .filters-section {\n              margin: 0.75rem;\n              padding: 0.875rem;\n            }\n            .tasks-section {\n              padding: 0 0.75rem 0.75rem 0.75rem;\n            }\n            .task-item {\n              padding: 0.875rem;\n            }\n            .task-actions {\n              gap: 0.375rem;\n            }\n            .priority-badge, .status-badge {\n              font-size: 0.65rem;\n              padding: 0.2rem 0.4rem;\n            }\n            .task-actions-row {\n              flex-direction: column;\n            }\n            .status-btn {\n              width: 100%;\n              text-align: center;\n            }\n            .view-btn {\n              align-self: flex-end;\n              position: absolute;\n              top: 0.875rem;\n              right: 0.875rem;\n            }\n            .task-header {\n              position: relative;\n              padding-right: 3rem;\n            }\n          }\n\n          /* Mobile modal styles */\n          @media (max-width: 768px) {\n            .modal-overlay {\n              padding: 0.5rem;\n              align-items: flex-end;\n            }\n            .modal-content {\n              max-width: 100%;\n              max-height: 95vh;\n              border-radius: 12px 12px 0 0;\n              margin-bottom: 0;\n            }\n            .modal-header {\n              padding: 1rem 1.25rem;\n            }\n            .modal-title {\n              font-size: 1.25rem;\n            }\n            .modal-body {\n              padding: 1.25rem;\n            }\n            .modal-tabs {\n              margin-bottom: 1rem;\n              overflow-x: auto;\n              white-space: nowrap;\n            }\n            .modal-tab {\n              padding: 0.625rem 1rem;\n              font-size: 0.9rem;\n            }\n            .comment-form {\n              flex-direction: column;\n              gap: 0.75rem;\n            }\n            .comment-input {\n              min-height: 70px;\n              font-size: 1rem;\n            }\n            .comment-btn {\n              align-self: stretch;\n              padding: 0.875rem;\n            }\n            .file-upload-section {\n              padding: 1rem;\n            }\n            .file-upload-btn {\n              padding: 0.875rem 1.25rem;\n              width: 100%;\n              justify-content: center;\n            }\n            .selected-file {\n              flex-direction: column;\n              gap: 0.75rem;\n              text-align: center;\n            }\n            .upload-btn {\n              align-self: stretch;\n              justify-content: center;\n              padding: 0.75rem;\n            }\n            .attachment-item {\n              padding: 0.875rem;\n            }\n            .comment-item {\n              padding: 0.875rem;\n            }\n            .comment-avatar {\n              width: 28px;\n              height: 28px;\n              font-size: 0.75rem;\n            }\n          }\n\n          /* Landscape mobile */\n          @media (max-width: 896px) and (orientation: landscape) {\n            .modal-overlay {\n              align-items: center;\n            }\n            .modal-content {\n              max-height: 90vh;\n              border-radius: 12px;\n            }\n          }\n        ")}}),(0,r.jsxs)("div",{className:"my-tasks-container",children:[(0,r.jsx)(b.Z,{projects:F,onCreateProject:()=>{},onCollapsedChange:np}),(0,r.jsxs)("div",{className:"main-content",children:[(0,r.jsxs)("header",{className:"header",children:[(0,r.jsxs)("div",{className:"header-content",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"header-title",children:"My Tasks"}),(0,r.jsx)("p",{className:"header-subtitle",children:"Manage all your assigned tasks"})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,r.jsxs)("button",{onClick:()=>nh("list"),style:{padding:"0.75rem 1.25rem",background:"list"===ng?"#5884FD":"#ffffff",color:"list"===ng?"#ffffff":"#666666",border:"2px solid #e8e8e8",borderRadius:"12px",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",letterSpacing:"-0.01em",boxShadow:"list"===ng?"0 4px 12px rgba(88, 132, 253, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.04)"},onMouseEnter:n=>{"list"!==ng&&(n.currentTarget.style.borderColor="#C483D9",n.currentTarget.style.transform="translateY(-1px)",n.currentTarget.style.boxShadow="0 4px 16px rgba(196, 131, 217, 0.15)")},onMouseLeave:n=>{"list"!==ng&&(n.currentTarget.style.borderColor="#e8e8e8",n.currentTarget.style.transform="translateY(0)",n.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)")},children:[(0,r.jsx)(l.Z,{style:{width:"16px",height:"16px"}}),"List"]}),(0,r.jsxs)("button",{onClick:()=>nh("calendar"),style:{padding:"0.75rem 1.25rem",background:"calendar"===ng?"#5884FD":"#ffffff",color:"calendar"===ng?"#ffffff":"#666666",border:"2px solid #e8e8e8",borderRadius:"12px",fontSize:"0.9rem",fontWeight:"600",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",letterSpacing:"-0.01em",boxShadow:"calendar"===ng?"0 4px 12px rgba(88, 132, 253, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.04)"},onMouseEnter:n=>{"calendar"!==ng&&(n.currentTarget.style.borderColor="#C483D9",n.currentTarget.style.transform="translateY(-1px)",n.currentTarget.style.boxShadow="0 4px 16px rgba(196, 131, 217, 0.15)")},onMouseLeave:n=>{"calendar"!==ng&&(n.currentTarget.style.borderColor="#e8e8e8",n.currentTarget.style.transform="translateY(0)",n.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)")},children:[(0,r.jsx)(d.Z,{style:{width:"16px",height:"16px"}}),"Calendar"]})]})]}),(0,r.jsxs)("div",{className:"stats-grid",children:[(0,r.jsxs)("div",{className:"stat-card",children:[(0,r.jsx)("div",{style:{width:"48px",height:"48px",background:"#f0f0f0",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"},children:(0,r.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{color:"#FFB333"},children:[(0,r.jsx)("rect",{x:"3",y:"3",width:"8",height:"8",rx:"1",stroke:"currentColor",strokeWidth:"2"}),(0,r.jsx)("rect",{x:"13",y:"3",width:"8",height:"8",rx:"1",stroke:"currentColor",strokeWidth:"2"}),(0,r.jsx)("rect",{x:"3",y:"13",width:"8",height:"8",rx:"1",stroke:"currentColor",strokeWidth:"2"}),(0,r.jsx)("rect",{x:"13",y:"13",width:"8",height:"8",rx:"1",stroke:"currentColor",strokeWidth:"2"})]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"stat-number",style:{color:"#FFB333"},children:nR.total}),(0,r.jsx)("div",{className:"stat-label",style:{color:"#666666"},children:"Total Tasks"})]})]}),(0,r.jsxs)("div",{className:"stat-card",children:[(0,r.jsx)("div",{style:{width:"48px",height:"48px",background:"#f0f0f0",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"},children:(0,r.jsx)(c.Z,{style:{width:"20px",height:"20px",color:"#10B981"}})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"stat-number",style:{color:"#10B981"},children:nR.completed}),(0,r.jsx)("div",{className:"stat-label",style:{color:"#666666"},children:"Completed"})]})]}),(0,r.jsxs)("div",{className:"stat-card",children:[(0,r.jsx)("div",{style:{width:"48px",height:"48px",background:"#f0f0f0",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"},children:(0,r.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{color:"#F87239"},children:[(0,r.jsx)("circle",{cx:"12",cy:"12",r:"9",stroke:"currentColor",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M12 7v6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}),(0,r.jsx)("path",{d:"M12 17h.01",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"stat-number",style:{color:"#F87239"},children:nR.overdue}),(0,r.jsx)("div",{className:"stat-label",style:{color:"#666666"},children:"Overdue"})]})]}),(0,r.jsxs)("div",{className:"stat-card",children:[(0,r.jsx)("div",{style:{width:"48px",height:"48px",background:"#f0f0f0",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem"},children:(0,r.jsx)(m.Z,{style:{width:"20px",height:"20px",color:"#5884FD"}})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"stat-number",style:{color:"#5884FD"},children:nR.dueToday}),(0,r.jsx)("div",{className:"stat-label",style:{color:"#666666"},children:"Due Today"})]})]})]})]}),A&&(0,r.jsx)("div",{className:"error-message",children:A}),(0,r.jsx)("div",{className:"filters-section",children:(0,r.jsxs)("div",{className:"filters-grid",children:[(0,r.jsxs)("div",{className:"filter-group",children:[(0,r.jsx)("label",{className:"filter-label",children:"Search Tasks"}),(0,r.jsxs)("div",{style:{position:"relative"},children:[(0,r.jsx)("input",{type:"text",className:"search-input",placeholder:"Search by name, description, project, or tags...",value:T,onChange:n=>I(n.target.value)}),(0,r.jsx)(p.Z,{style:{position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)",width:"18px",height:"18px",color:"#666666",pointerEvents:"none"}})]})]}),(0,r.jsxs)("div",{className:"filter-group",children:[(0,r.jsx)("label",{className:"filter-label",children:"Filter by Status"}),(0,r.jsx)("select",{className:"filter-select",value:Y,onChange:n=>P(n.target.value),children:R.map(n=>(0,r.jsx)("option",{value:n.value,children:n.label},n.value))})]}),(0,r.jsxs)("div",{className:"filter-group",children:[(0,r.jsx)("label",{className:"filter-label",children:"Filter by Priority"}),(0,r.jsxs)("select",{className:"filter-select",value:W,onChange:n=>Z(n.target.value),children:[(0,r.jsx)("option",{value:"all",children:"All Priorities"}),L.map(n=>(0,r.jsx)("option",{value:n.value,children:n.label},n.value))]})]})]})}),(0,r.jsx)("div",{className:"tasks-section",children:"list"===ng?0===w.length?(0,r.jsxs)("div",{style:{background:"#ffffff",border:"1px solid #e8e8e8",borderRadius:"16px",padding:"4rem",textAlign:"center",color:"#666666",boxShadow:"0 2px 16px rgba(0, 0, 0, 0.04)"},children:[(0,r.jsx)("div",{style:{width:"64px",height:"64px",background:"#f0f0f0",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 2rem"},children:(0,r.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{color:"#999999"},children:[(0,r.jsx)("rect",{x:"3",y:"3",width:"8",height:"8",rx:"1",stroke:"currentColor",strokeWidth:"2"}),(0,r.jsx)("rect",{x:"13",y:"3",width:"8",height:"8",rx:"1",stroke:"currentColor",strokeWidth:"2"}),(0,r.jsx)("rect",{x:"3",y:"13",width:"8",height:"8",rx:"1",stroke:"currentColor",strokeWidth:"2"}),(0,r.jsx)("rect",{x:"13",y:"13",width:"8",height:"8",rx:"1",stroke:"currentColor",strokeWidth:"2"})]})}),(0,r.jsx)("h3",{style:{fontSize:"1.5rem",fontWeight:"400",margin:"0 0 1rem 0",color:"#1a1a1a",letterSpacing:"-0.01em"},children:"No tasks found"}),(0,r.jsx)("p",{style:{fontSize:"1.1rem",margin:"0",lineHeight:"1.5",color:"#999999"},children:0===y.length?"You don't have any assigned tasks yet.":"No tasks match your current filters. Try adjusting your search or filters."})]}):(0,r.jsx)("div",{className:"tasks-list",children:w.map(n=>{let e=nE(n.priority),t=nL(n.status),a=nM(n.due_date),i=n_(n.due_date),o=null!==a&&a<=3&&a>0;return(0,r.jsxs)("div",{className:"task-item ".concat(i?"overdue":o?"urgent":""),onClick:()=>nz(n),children:[(0,r.jsxs)("div",{className:"task-header",children:[(0,r.jsxs)("div",{className:"task-title-section",children:[(0,r.jsx)("h3",{className:"task-title",children:n.name}),(0,r.jsx)("p",{className:"task-project",children:n.project.name})]}),(0,r.jsxs)("div",{className:"task-actions",children:[(0,r.jsxs)("div",{className:"priority-badge",style:{backgroundColor:e.color+"20",borderColor:e.color,color:e.color},children:[(0,r.jsx)("span",{children:e.icon}),(0,r.jsx)("span",{children:e.label})]}),(0,r.jsxs)("div",{className:"status-badge",style:{backgroundColor:t.color,borderColor:"#000000",color:"#000000"},children:[(0,r.jsx)("span",{children:t.icon}),(0,r.jsx)("span",{children:t.label})]}),(0,r.jsx)("button",{className:"view-btn",onClick:e=>{e.stopPropagation(),nz(n)},title:"View Details",children:(0,r.jsx)(g.Z,{style:{width:"16px",height:"16px"}})})]})]}),n.description&&(0,r.jsx)("p",{className:"task-description",children:n.description}),(0,r.jsxs)("div",{className:"task-meta",children:[n.due_date&&(0,r.jsxs)("div",{className:"task-meta-item ".concat(i?"overdue":""),children:[(0,r.jsx)(d.Z,{style:{width:"14px",height:"14px"}}),(0,r.jsx)("span",{children:nB(n.due_date)}),i&&(0,r.jsx)("span",{style:{fontWeight:"bold"},children:"(Overdue)"}),o&&(0,r.jsxs)("span",{style:{fontWeight:"bold"},children:["(",a,"d left)"]})]}),(0,r.jsxs)("div",{className:"task-meta-item",children:[(0,r.jsx)(h.Z,{style:{width:"14px",height:"14px"}}),(0,r.jsxs)("span",{children:["Created by ",n.created_by.name]})]}),(n.tags_list||[]).length>0&&(0,r.jsxs)("div",{className:"task-meta-item",children:[(0,r.jsx)(u.Z,{style:{width:"14px",height:"14px"}}),(0,r.jsx)("span",{children:(n.tags_list||[]).slice(0,3).join(", ")}),(n.tags_list||[]).length>3&&(0,r.jsxs)("span",{style:{fontWeight:"bold"},children:["+",(n.tags_list||[]).length-3," more"]})]})]}),(0,r.jsx)("div",{className:"task-actions-row",children:E.filter(e=>e.value!==n.status).map(e=>(0,r.jsxs)("button",{onClick:()=>nN(n.id,e.value),className:"status-btn",title:"Move to ".concat(e.label),children:[e.icon," ",e.label]},e.value))})]},n.id)})}):(0,r.jsxs)("div",{style:{background:"#ffffff",border:"1px solid #e8e8e8",borderRadius:"16px",padding:"2rem",boxShadow:"0 2px 16px rgba(0, 0, 0, 0.04)"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem",padding:"0 1rem"},children:[(0,r.jsx)("button",{onClick:()=>nv(),className:"nav-button",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"44px",height:"44px",background:"#ffffff",border:"2px solid #e8e8e8",borderRadius:"12px",cursor:"pointer",color:"#666666",transition:"all 0.2s ease"},onMouseEnter:n=>{n.currentTarget.style.borderColor="#5884FD",n.currentTarget.style.color="#5884FD"},onMouseLeave:n=>{n.currentTarget.style.borderColor="#e8e8e8",n.currentTarget.style.color="#666666"},children:(0,r.jsx)(x.Z,{style:{width:"20px",height:"20px"}})}),(0,r.jsxs)("h2",{style:{margin:0,fontSize:"1.5rem",fontWeight:"700",color:"#000000",textAlign:"center",flex:1},children:[["January","February","March","April","May","June","July","August","September","October","November","December"][nu.getMonth()]," ",nu.getFullYear()]}),(0,r.jsx)("button",{onClick:()=>ny(),className:"nav-button",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"44px",height:"44px",background:"#ffffff",border:"2px solid #e8e8e8",borderRadius:"12px",cursor:"pointer",color:"#666666",transition:"all 0.2s ease"},onMouseEnter:n=>{n.currentTarget.style.borderColor="#5884FD",n.currentTarget.style.color="#5884FD"},onMouseLeave:n=>{n.currentTarget.style.borderColor="#e8e8e8",n.currentTarget.style.color="#666666"},children:(0,r.jsx)(f.Z,{style:{width:"20px",height:"20px"}})})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)",gap:"1px",border:"1px solid #e5e7eb",borderRadius:"8px",overflow:"hidden",background:"#e5e7eb"},children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(n=>(0,r.jsx)("div",{style:{padding:"1rem",background:"#f8f9fa",fontWeight:"600",textAlign:"center",fontSize:"0.875rem",color:"#374151"},children:n},n)),(()=>{let n=new Date,e=nf(nu),t=nb(nu),a=[];for(let n=0;n<t;n++){let e=new Date(nu.getFullYear(),nu.getMonth()-1),i=nf(e),o=i-t+n+1,s=new Date(nu.getFullYear(),nu.getMonth()-1,o),l=nk(s);a.push((0,r.jsxs)("div",{className:"calendar-day-cell",style:{minHeight:"120px",padding:"0.75rem",background:"#f8f9fa",border:"1px solid #e5e7eb",color:"#9ca3af",opacity:.5},children:[(0,r.jsx)("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem"},children:o}),l.slice(0,2).map((n,e)=>(0,r.jsx)("div",{style:{background:"#e5e7eb",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem",marginBottom:"0.25rem",cursor:"pointer"},children:n.name.length>15?"".concat(n.name.substring(0,15),"..."):n.name},n.id))]},"prev-".concat(o)))}for(let t=1;t<=e;t++){let e=new Date(nu.getFullYear(),nu.getMonth(),t),i=nk(e),o=e.toDateString()===n.toDateString();a.push((0,r.jsxs)("div",{className:"calendar-day-cell",style:{minHeight:"120px",padding:"0.75rem",background:o?"#e3f2fd":"#ffffff",border:o?"2px solid #5884FD":"1px solid #e5e7eb",position:"relative"},children:[(0,r.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:o?"600":"400",color:o?"#5884FD":"#1f2937",marginBottom:"0.5rem"},children:t}),i.slice(0,3).map((n,e)=>{let t=nE(n.priority),a=n_(n.due_date);return(0,r.jsxs)("div",{onClick:()=>nz(n),style:{background:a?"#fef2f2":"#f8fafc",border:"1px solid ".concat(a?"#f87171":t.color),padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem",marginBottom:"0.25rem",cursor:"pointer",color:a?"#dc2626":"#1f2937",transition:"all 0.2s ease"},onMouseEnter:n=>{n.currentTarget.style.transform="translateY(-1px)",n.currentTarget.style.boxShadow="0 2px 4px rgba(0,0,0,0.1)"},onMouseLeave:n=>{n.currentTarget.style.transform="translateY(0)",n.currentTarget.style.boxShadow="none"},children:[(0,r.jsx)("div",{style:{fontWeight:"500"},children:n.name.length>15?"".concat(n.name.substring(0,15),"..."):n.name}),(0,r.jsx)("div",{style:{fontSize:"0.7rem",color:"#6b7280",marginTop:"0.125rem"},children:n.project.name})]},n.id)}),i.length>3&&(0,r.jsxs)("div",{style:{fontSize:"0.7rem",color:"#6b7280",fontWeight:"500",marginTop:"0.25rem"},children:["+",i.length-3," more tasks"]})]},t))}let i=7*Math.ceil((t+e)/7)-(t+e);for(let n=1;n<=i;n++){let e=new Date(nu.getFullYear(),nu.getMonth()+1,n),t=nk(e);a.push((0,r.jsxs)("div",{className:"calendar-day-cell",style:{minHeight:"120px",padding:"0.75rem",background:"#f8f9fa",border:"1px solid #e5e7eb",color:"#9ca3af",opacity:.5},children:[(0,r.jsx)("div",{style:{fontSize:"0.875rem",marginBottom:"0.5rem"},children:n}),t.slice(0,2).map((n,e)=>(0,r.jsx)("div",{style:{background:"#e5e7eb",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem",marginBottom:"0.25rem",cursor:"pointer"},children:n.name.length>15?"".concat(n.name.substring(0,15),"..."):n.name},n.id))]},"next-".concat(n)))}return a})()]})]})}),O&&U&&(0,r.jsx)(M,{task:U,users:N,onClose:()=>{V(!1),H(null)},onSave:nC,onStatusChange:nN,onDelete:nA})]})]})]}):null}},33617:function(n,e,t){"use strict";function r(){var n;return!!(null===(n=window.electronAPI)||void 0===n?void 0:n.isElectron)}function a(){var n,e,t;return r()?(null===(n=window.electronAPI)||void 0===n?void 0:n.isMac)?"mac":(null===(e=window.electronAPI)||void 0===e?void 0:e.isWindows)?"windows":(null===(t=window.electronAPI)||void 0===t?void 0:t.isLinux)?"linux":"web":"web"}async function i(){if(r())return!0;if("Notification"in window){let n=await Notification.requestPermission();return"granted"===n}return!1}async function o(n,e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(console.log("\uD83D\uDD14 showNotification called:",n,e,"isElectron:",r()),r()&&window.electronAPI){console.log("\uD83D\uDD14 Sending to Electron main process...");try{await window.electronAPI.showNotification(n,e,t),console.log("\uD83D\uDD14 Notification sent to Electron")}catch(n){console.error("\uD83D\uDD14 Error sending notification to Electron:",n)}return}if(console.log("\uD83D\uDD14 Using web notification fallback"),"Notification"in window){if("default"===Notification.permission&&(console.log("\uD83D\uDD14 Requesting notification permission..."),await Notification.requestPermission()),"granted"===Notification.permission){console.log("\uD83D\uDD14 Permission granted, showing web notification");let r=new Notification(n,{body:e,silent:t.silent,tag:"critical"===t.urgency?"urgent":void 0,icon:"/favicon.png"});t.url&&(r.onclick=()=>{window.focus(),window.location.href=t.url})}else console.log("\uD83D\uDD14 Notification permission denied")}else console.log("\uD83D\uDD14 Notifications not supported in this browser")}async function s(n){if(r()&&window.electronAPI){await window.electronAPI.taskReminder(n);return}await o("Task Reminder","".concat(n.title," is due soon!"),{urgency:"critical",url:"/my-tasks"})}async function l(n){if(r()&&window.electronAPI){await window.electronAPI.meetingReminder(n);return}await o("Meeting Starting Soon","".concat(n.title," starts in ").concat(n.minutesUntil," minutes"),{urgency:"critical",url:"/calendar"})}async function d(n){r()&&window.electronAPI&&await window.electronAPI.setBadgeCount(n)}async function c(){return r()&&window.electronAPI?window.electronAPI.getSettings():null}async function m(n){return r()&&window.electronAPI?window.electronAPI.updateSettings(n):null}async function p(){return r()&&window.electronAPI?window.electronAPI.getAppVersion():"1.0.0 (Web)"}function g(n){return r()&&window.electronAPI?(window.electronAPI.onShortcut(n),()=>{var n;return null===(n=window.electronAPI)||void 0===n?void 0:n.removeAllListeners("shortcut")}):()=>{}}t.d(e,{IA:function(){return m},Jm:function(){return u},Sf:function(){return p},Xf:function(){return a},c0:function(){return o},d:function(){return r},eO:function(){return d},eV:function(){return i},fq:function(){return g},hO:function(){return c}});class h{scheduleTaskReminder(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,t=new Date(n.dueDate),r=new Date(t.getTime()-6e4*e),a=new Date,i=r.getTime()-a.getTime();if(i>0){let e=setTimeout(()=>{s(n),this.intervals.delete(n.id)},i);this.intervals.set(n.id,e)}}scheduleMeetingReminder(n){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,t=new Date(n.startTime),r=new Date(t.getTime()-6e4*e),a=new Date,i=r.getTime()-a.getTime();if(i>0){let t=setTimeout(()=>{l({...n,minutesUntil:e}),this.intervals.delete(n.id)},i);this.intervals.set(n.id,t)}}cancelReminder(n){let e=this.intervals.get(n);e&&(clearTimeout(e),this.intervals.delete(n))}cancelAll(){this.intervals.forEach(n=>clearTimeout(n)),this.intervals.clear()}constructor(){this.intervals=new Map}}let u=new h}},function(n){n.O(0,[8326,7708,8522,8411,3152,8714,7514,2971,2472,1744],function(){return n(n.s=14285)}),_N_E=n.O()}]);