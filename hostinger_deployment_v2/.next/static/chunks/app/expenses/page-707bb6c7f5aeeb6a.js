(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2299],{67676:function(e,r,t){Promise.resolve().then(t.bind(t,82577))},82577:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return v}});var i=t(57437),n=t(2265),o=t(24033),d=t(3549),l=t(95255),s=t(31205),a=t(61095),c=t(96497),m=t(61447),f=t(40013),p=t(3217),x=t(66610),h=t(19367),g=t(62125),u=t(96689),b=t(51809),y=t(77227),j=t(68714);function v(){let{user:e,isAuthenticated:r,isLoading:v}=(0,d.useAuth)(),w=(0,o.useRouter)(),[S,_]=(0,n.useState)([]),[k,z]=(0,n.useState)(null),[C,R]=(0,n.useState)([]),[W,E]=(0,n.useState)([]),[I,B]=(0,n.useState)([]),[P,T]=(0,n.useState)(!0),[D,F]=(0,n.useState)(""),[q,M]=(0,n.useState)(!1),[A,Z]=(0,n.useState)(!1),[U,L]=(0,n.useState)(!1),[N,O]=(0,n.useState)(!1),[H,Q]=(0,n.useState)(new Set),[V,G]=(0,n.useState)(new Date),[K,Y]=(0,n.useState)({}),[J,X]=(0,n.useState)(!1),[$,ee]=(0,n.useState)(""),[er,et]=(0,n.useState)("viewer"),[ei,en]=(0,n.useState)([]),[eo,ed]=(0,n.useState)([]),[el,es]=(0,n.useState)(!1),[ea,ec]=(0,n.useState)({name:"",description:"",color:"#3B82F6",folder_type:"expense",budget_limit:"",currency:"USD"}),[em,ef]=(0,n.useState)({item_name:"",description:"",category:"",price:"",quantity:"1",currency:"USD",expense_date:new Date().toISOString().split("T")[0],receipt_url:"",notes:""});(0,n.useEffect)(()=>{if(!v){if(!r){w.push("/login");return}ep()}},[r,v,w,e]),(0,n.useEffect)(()=>{let e=()=>{X(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,n.useEffect)(()=>{let e=e=>{let r=e.target;r.closest(".user-suggestions-container")||es(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,n.useEffect)(()=>{eh()},[W]);let ep=async()=>{try{T(!0);let r=(await Promise.resolve().then(t.bind(t,78411))).supabase,{data:i,error:n}=await r.from("expense_folders").select("id").limit(1);if(n&&"42P01"===n.code){F("Expense system not set up yet. Please deploy the database schema first."),_([]),B([]);return}let{data:o,error:d}=await r.from("expense_folder_members").select("\n          *,\n          expense_folders!inner(*)\n        ").eq("user_id",null==e?void 0:e.id);if(d){if(console.error("Error fetching folder members:",d),"42P01"===d.code){F("Expense system not set up yet. Please deploy the database schema first.");return}throw d}let l=(null==o?void 0:o.map(e=>({...e.expense_folders,user_role:e.role})))||[];_(l);let{data:s,error:a}=await r.from("expense_categories").select("*").eq("is_active",!0).order("name");if(a){if(console.error("Error fetching categories:",a),"42P01"===a.code){F("Expense system not set up yet. Please deploy the database schema first.");return}throw a}B(s||[]),k&&await ex(k.id)}catch(e){console.error("Error fetching data:",e),F("Failed to load expense data")}finally{T(!1)}},ex=async e=>{try{let r=(await Promise.resolve().then(t.bind(t,78411))).supabase,{data:i,error:n}=await r.from("expense_items").select("*").eq("folder_id",e).order("expense_date",{ascending:!1});if(n)throw n;E(i||[]);let{data:o,error:d}=await r.from("expense_folder_members").select("\n          id,\n          folder_id,\n          user_id,\n          role,\n          added_by,\n          added_at\n        ").eq("folder_id",e);if(d)throw d;R(o||[])}catch(e){console.error("Error fetching folder expenses:",e),F("Failed to load folder expenses")}},eh=()=>{let e={};W.forEach(r=>{let t=r.month_year;e[t]||(e[t]=[]),e[t].push(r)}),Object.keys(e).forEach(r=>{e[r].sort((e,r)=>new Date(r.expense_date).getTime()-new Date(e.expense_date).getTime())}),Y(e)},eg=async e=>{z(e),await ex(e.id)},eu=async r=>{if(r.preventDefault(),!ea.name.trim()){alert("Please enter a folder name");return}try{let r=(await Promise.resolve().then(t.bind(t,78411))).supabase,{data:i,error:n}=await r.from("expense_folders").insert([{name:ea.name,description:ea.description,color:ea.color,folder_type:ea.folder_type,budget_limit:ea.budget_limit?parseFloat(ea.budget_limit):null,currency:ea.currency,created_by:null==e?void 0:e.id}]).select().single();if(n)throw n;let{error:o}=await r.from("expense_folder_members").insert([{folder_id:i.id,user_id:null==e?void 0:e.id,role:"owner",added_by:null==e?void 0:e.id}]);if(o)throw o;ec({name:"",description:"",color:"#3B82F6",folder_type:"expense",budget_limit:"",currency:"USD"}),M(!1),ep()}catch(e){console.error("Error creating folder:",e),alert("Failed to create folder. Please try again.")}},eb=async r=>{if(r.preventDefault(),!k||!em.item_name.trim()||!em.price){alert("Please fill in the required fields");return}try{var i;let r=(await Promise.resolve().then(t.bind(t,78411))).supabase,{data:n,error:o}=await r.from("expense_items").insert([{folder_id:k.id,created_by:null==e?void 0:e.id,created_by_name:(null==e?void 0:e.name)||(null==e?void 0:null===(i=e.email)||void 0===i?void 0:i.split("@")[0])||"Unknown",created_by_email:null==e?void 0:e.email,item_name:em.item_name,description:em.description,category:em.category,price:parseFloat(em.price),quantity:parseInt(em.quantity)||1,currency:em.currency,expense_date:em.expense_date,receipt_url:em.receipt_url||null,notes:em.notes||null}]).select();if(o)throw o;ef({item_name:"",description:"",category:"",price:"",quantity:"1",currency:"USD",expense_date:new Date().toISOString().split("T")[0],receipt_url:"",notes:""}),Z(!1),await ex(k.id)}catch(e){console.error("Error adding expense:",e),alert("Failed to add expense. Please try again.")}},ey=e=>{let r=new Date(V);"prev"===e?r.setMonth(r.getMonth()-1):r.setMonth(r.getMonth()+1),G(r)},ej=e=>e.toLocaleDateString("en-US",{year:"numeric",month:"long"}),ev=()=>V.toISOString().slice(0,7),ew=e=>{let r=K[e]||[];return r.reduce((e,r)=>e+r.total_amount,0)},eS=async()=>{try{let e=(await Promise.resolve().then(t.bind(t,78411))).supabase,{data:r,error:i}=await e.from("auth_user").select("id, name, email").eq("is_active",!0).order("name");if(i)throw i;en(r||[])}catch(e){console.error("Error fetching users:",e)}},e_=e=>{if(ee(e),e.length>0){let r=ei.filter(r=>r.email.toLowerCase().includes(e.toLowerCase())||r.name&&r.name.toLowerCase().includes(e.toLowerCase())).filter(e=>!C.find(r=>r.user_id===e.id)).slice(0,5);ed(r),es(r.length>0)}else es(!1),ed([])},ek=e=>{ee(e.email),es(!1),ed([])},ez=async()=>{if(!k||!$.trim()){alert("Please enter a valid email address");return}try{let r=(await Promise.resolve().then(t.bind(t,78411))).supabase,{data:i,error:n}=await r.from("auth_user").select("id, name, email").eq("email",$.trim()).single();if(n||!i){alert("User not found with that email address");return}let o=C.find(e=>e.user_id===i.id);if(o){alert("User is already a member of this folder");return}let{error:d}=await r.from("expense_folder_members").insert([{folder_id:k.id,user_id:i.id,role:er,added_by:null==e?void 0:e.id}]);if(d)throw d;ee(""),et("viewer"),await ex(k.id),alert("Successfully added ".concat(i.name||i.email," as ").concat(er))}catch(e){console.error("Error adding member:",e),alert("Failed to add member. Please try again.")}},eC=async(e,r)=>{if(confirm("Remove ".concat(r," from this folder?")))try{let r=(await Promise.resolve().then(t.bind(t,78411))).supabase,{error:i}=await r.from("expense_folder_members").delete().eq("id",e);if(i)throw i;await ex(k.id)}catch(e){console.error("Error removing member:",e),alert("Failed to remove member. Please try again.")}},eR=async(e,r)=>{try{let i=(await Promise.resolve().then(t.bind(t,78411))).supabase,{error:n}=await i.from("expense_folder_members").update({role:r}).eq("id",e);if(n)throw n;await ex(k.id)}catch(e){console.error("Error updating member role:",e),alert("Failed to update member role. Please try again.")}};return r?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("div",{style:{display:"flex",minHeight:"100vh",background:"#f8fafc"},children:[(0,i.jsx)(j.Z,{projects:[],onCreateProject:()=>{}}),(0,i.jsxs)("div",{className:"page-main",style:{marginLeft:J?"0":"256px",padding:J?"1rem":"2rem",background:"#f8fafc",flex:1,minHeight:"100vh",paddingTop:J?"4rem":"2rem"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("h1",{style:{fontSize:"2.5rem",fontWeight:"300",margin:"0",color:"#111827",letterSpacing:"-0.02em"},children:"Expense Management"}),(0,i.jsx)("p",{style:{fontSize:"1.1rem",color:"#6b7280",margin:"0.5rem 0 0 0",lineHeight:"1.5"},children:"Track and manage expenses with folder-based organization and team sharing"})]}),(0,i.jsxs)("button",{onClick:()=>M(!0),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#3b82f6",color:"#ffffff",border:"none",borderRadius:"8px",padding:"0.75rem 1rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[(0,i.jsx)(l.Z,{style:{width:"16px",height:"16px"}}),"Create Folder"]})]}),D&&(0,i.jsx)("div",{style:{background:"#fef2f2",border:"1px solid #fecaca",borderRadius:"8px",padding:"1rem",marginBottom:"2rem",color:"#dc2626",fontWeight:"500",fontSize:"0.875rem"},children:D}),P?(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"400px",flexDirection:"column",gap:"1rem"},children:[(0,i.jsx)("div",{style:{width:"40px",height:"40px",border:"3px solid #f3f4f6",borderTop:"3px solid #3b82f6",borderRadius:"50%",animation:"spin 1s linear infinite"}}),(0,i.jsx)("p",{style:{color:"#6b7280",fontSize:"1rem"},children:"Loading expense data..."})]}):(0,i.jsxs)("div",{style:{display:"flex",gap:J?"1rem":"2rem",flexDirection:J?"column":"row"},children:[(0,i.jsx)("div",{style:{width:J?"100%":"320px",marginBottom:J?"1rem":"0"},children:(0,i.jsxs)("div",{style:{background:"#ffffff",borderRadius:"12px",border:"1px solid #e5e7eb",overflow:"hidden"},children:[(0,i.jsx)("div",{style:{background:"#f9fafb",padding:"1rem",borderBottom:"1px solid #e5e7eb"},children:(0,i.jsx)("h3",{style:{fontSize:"1rem",fontWeight:"600",margin:"0",color:"#111827"},children:"Expense Folders"})}),(0,i.jsx)("div",{style:{padding:"1rem"},children:0===S.length?(0,i.jsxs)("div",{style:{textAlign:"center",padding:"2rem",color:"#6b7280"},children:[(0,i.jsx)(s.Z,{style:{width:"32px",height:"32px",margin:"0 auto 0.5rem",color:"#d1d5db"}}),(0,i.jsx)("p",{style:{fontSize:"0.875rem",margin:"0"},children:"No expense folders yet. Create one to get started."})]}):(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:S.map(e=>(0,i.jsx)("div",{children:(0,i.jsxs)("div",{onClick:()=>eg(e),style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem",borderRadius:"8px",cursor:"pointer",background:(null==k?void 0:k.id)===e.id?"#eff6ff":"transparent",border:(null==k?void 0:k.id)===e.id?"1px solid #3b82f6":"1px solid transparent",transition:"all 0.2s ease"},onMouseEnter:r=>{(null==k?void 0:k.id)!==e.id&&(r.currentTarget.style.background="#f9fafb")},onMouseLeave:r=>{(null==k?void 0:k.id)!==e.id&&(r.currentTarget.style.background="transparent")},children:[(0,i.jsx)("div",{style:{width:"32px",height:"32px",background:e.color,borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(s.Z,{style:{width:"16px",height:"16px",color:"#ffffff"}})}),(0,i.jsxs)("div",{style:{flex:1},children:[(0,i.jsx)("h4",{style:{fontSize:"0.875rem",fontWeight:"600",margin:"0",color:"#111827"},children:e.name}),(0,i.jsxs)("p",{style:{fontSize:"0.75rem",color:"#6b7280",margin:"0"},children:[e.folder_type," • ",e.currency]})]})]})},e.id))})})]})}),(0,i.jsx)("div",{style:{flex:1},children:k?(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{style:{background:"#ffffff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1.5rem",marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,i.jsx)("div",{style:{width:"48px",height:"48px",background:k.color,borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(c.Z,{style:{width:"24px",height:"24px",color:"#ffffff"}})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"600",margin:"0",color:"#111827"},children:k.name}),(0,i.jsxs)("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:[k.description," • ",C.length," member",1!==C.length?"s":""]})]})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[(0,i.jsxs)("button",{onClick:()=>Z(!0),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#10b981",color:"#ffffff",border:"none",borderRadius:"8px",padding:"0.75rem 1rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[(0,i.jsx)(l.Z,{style:{width:"16px",height:"16px"}}),"Add Expense"]}),(0,i.jsxs)("button",{onClick:()=>{O(!0),eS()},style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#f9fafb",color:"#374151",border:"1px solid #d1d5db",borderRadius:"8px",padding:"0.75rem 1rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:[(0,i.jsx)(m.Z,{style:{width:"16px",height:"16px"}}),"Share & Members"]})]})]}),(0,i.jsxs)("div",{style:{background:"#ffffff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"1rem",marginBottom:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsxs)("button",{onClick:()=>ey("prev"),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#f9fafb",border:"1px solid #d1d5db",borderRadius:"6px",padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.875rem",color:"#374151"},children:[(0,i.jsx)(f.Z,{style:{width:"16px",height:"16px"}}),"Previous"]}),(0,i.jsxs)("div",{style:{textAlign:"center"},children:[(0,i.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:"600",margin:"0",color:"#111827"},children:ej(V)}),(0,i.jsxs)("p",{style:{fontSize:"0.875rem",color:"#6b7280",margin:"0.25rem 0 0 0"},children:["Total: ",k.currency," ",ew(ev()).toFixed(2)]})]}),(0,i.jsxs)("button",{onClick:()=>ey("next"),style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#f9fafb",border:"1px solid #d1d5db",borderRadius:"6px",padding:"0.5rem 0.75rem",cursor:"pointer",fontSize:"0.875rem",color:"#374151"},children:["Next",(0,i.jsx)(p.Z,{style:{width:"16px",height:"16px"}})]})]}),(0,i.jsx)("div",{style:{background:"#ffffff",borderRadius:"12px",border:"1px solid #e5e7eb",overflow:"hidden"},children:(()=>{let r=ev(),t=K[r]||[];return(0,i.jsxs)(i.Fragment,{children:[!J&&(0,i.jsxs)("div",{style:{background:"#f9fafb",padding:"1rem",borderBottom:"1px solid #e5e7eb",display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr 100px",gap:"1rem",fontSize:"0.75rem",fontWeight:"600",color:"#6b7280",textTransform:"uppercase",letterSpacing:"0.05em"},children:[(0,i.jsx)("div",{children:"Item & Description"}),(0,i.jsx)("div",{children:"Category"}),(0,i.jsx)("div",{children:"Price"}),(0,i.jsx)("div",{children:"Quantity"}),(0,i.jsx)("div",{children:"Total"}),(0,i.jsx)("div",{children:"Date"}),(0,i.jsx)("div",{children:"Actions"})]}),(0,i.jsx)("div",{style:{maxHeight:"600px",overflow:"auto"},children:0===t.length?(0,i.jsxs)("div",{style:{padding:"3rem",textAlign:"center",color:"#6b7280"},children:[(0,i.jsx)(x.Z,{style:{width:"32px",height:"32px",margin:"0 auto 0.5rem",color:"#d1d5db"}}),(0,i.jsxs)("p",{style:{fontSize:"0.875rem",margin:"0"},children:["No expenses for ",ej(V)]})]}):t.map((r,n)=>{var o;return(0,i.jsxs)("div",{style:{display:J?"block":"grid",gridTemplateColumns:J?"none":"2fr 1fr 1fr 1fr 1fr 1fr 100px",gap:J?"0.5rem":"1rem",padding:"1rem",borderBottom:n<t.length-1?"1px solid #f3f4f6":"none",alignItems:J?"stretch":"center",fontSize:"0.875rem",background:J?"#ffffff":"transparent",border:J?"1px solid #e5e7eb":"none",borderRadius:J?"8px":"0",marginBottom:J?"0.75rem":"0"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontWeight:"600",color:"#111827",marginBottom:"0.25rem"},children:r.item_name}),r.description&&(0,i.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:r.description}),(0,i.jsxs)("div",{style:{fontSize:"0.75rem",color:"#9ca3af",marginTop:"0.25rem"},children:["by ",r.created_by_name]})]}),(0,i.jsx)("div",{style:{background:"#f3f4f6",color:"#374151",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem",textAlign:"center"},children:r.category}),(0,i.jsxs)("div",{style:{color:"#111827",fontWeight:"500"},children:[r.currency," ",r.price.toFixed(2)]}),(0,i.jsx)("div",{style:{color:"#6b7280",textAlign:"center"},children:r.quantity}),(0,i.jsxs)("div",{style:{color:"#111827",fontWeight:"600",fontSize:"0.875rem"},children:[r.currency," ",r.total_amount.toFixed(2)]}),(0,i.jsx)("div",{style:{color:"#6b7280",fontSize:"0.75rem"},children:new Date(r.expense_date).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,i.jsxs)("div",{style:{display:"flex",gap:"0.25rem"},children:[(0,i.jsx)("button",{style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem",borderRadius:"4px",color:"#6b7280"},title:"View Details",children:(0,i.jsx)(h.Z,{style:{width:"14px",height:"14px"}})}),(r.created_by===(null==e?void 0:e.id)||(null===(o=C.find(r=>r.user_id===(null==e?void 0:e.id)))||void 0===o?void 0:o.role)==="owner")&&(0,i.jsx)("button",{style:{background:"none",border:"none",cursor:"pointer",padding:"0.25rem",borderRadius:"4px",color:"#6b7280"},title:"Edit",children:(0,i.jsx)(g.Z,{style:{width:"14px",height:"14px"}})})]})]},r.id)})}),t.length>0&&(0,i.jsxs)("div",{style:{background:"#f9fafb",padding:"1rem",borderTop:"1px solid #e5e7eb",display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr 1fr 1fr 100px",gap:"1rem",fontSize:"0.875rem",fontWeight:"600"},children:[(0,i.jsxs)("div",{style:{color:"#111827"},children:["Total (",t.length," items)"]}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{style:{textAlign:"center",color:"#6b7280"},children:t.reduce((e,r)=>e+r.quantity,0)}),(0,i.jsxs)("div",{style:{color:"#111827"},children:[k.currency," ",ew(r).toFixed(2)]}),(0,i.jsx)("div",{}),(0,i.jsx)("div",{})]})]})})()})]}):(0,i.jsxs)("div",{style:{background:"#ffffff",borderRadius:"12px",border:"1px solid #e5e7eb",padding:"3rem",textAlign:"center",color:"#6b7280"},children:[(0,i.jsx)(a.Z,{style:{width:"48px",height:"48px",margin:"0 auto 1rem",color:"#d1d5db"}}),(0,i.jsx)("p",{style:{fontSize:"1.125rem",fontWeight:"500",margin:"0 0 0.5rem 0"},children:"Select an expense folder"}),(0,i.jsx)("p",{style:{fontSize:"0.875rem",margin:"0"},children:"Choose a folder from the sidebar to view and manage expenses."})]})})]})]})]}),q&&(0,i.jsx)("div",{style:{position:"fixed",inset:"0",background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem",zIndex:1e3},onClick:()=>M(!1),children:(0,i.jsxs)("div",{style:{background:"#ffffff",borderRadius:"12px",width:"100%",maxWidth:"500px",padding:"2rem"},onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,i.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:"600",margin:"0",color:"#111827"},children:"Create Expense Folder"}),(0,i.jsx)("button",{onClick:()=>M(!1),style:{background:"none",border:"none",cursor:"pointer",color:"#6b7280"},children:(0,i.jsx)(u.Z,{style:{width:"20px",height:"20px"}})})]}),(0,i.jsxs)("form",{onSubmit:eu,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Folder Name *"}),(0,i.jsx)("input",{type:"text",required:!0,value:ea.name,onChange:e=>ec({...ea,name:e.target.value}),placeholder:"e.g., Q4 Marketing Expenses",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Description"}),(0,i.jsx)("textarea",{value:ea.description,onChange:e=>ec({...ea,description:e.target.value}),placeholder:"Brief description of this expense folder",rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem",resize:"vertical"}})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Folder Type"}),(0,i.jsxs)("select",{value:ea.folder_type,onChange:e=>ec({...ea,folder_type:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem"},children:[(0,i.jsx)("option",{value:"expense",children:"Expense"}),(0,i.jsx)("option",{value:"budget",children:"Budget"}),(0,i.jsx)("option",{value:"reimbursement",children:"Reimbursement"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Currency"}),(0,i.jsxs)("select",{value:ea.currency,onChange:e=>ec({...ea,currency:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem"},children:[(0,i.jsx)("option",{value:"USD",children:"USD"}),(0,i.jsx)("option",{value:"EUR",children:"EUR"}),(0,i.jsx)("option",{value:"GBP",children:"GBP"}),(0,i.jsx)("option",{value:"MMK",children:"MMK"})]})]})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Budget Limit (Optional)"}),(0,i.jsx)("input",{type:"number",step:"0.01",value:ea.budget_limit,onChange:e=>ec({...ea,budget_limit:e.target.value}),placeholder:"0.00",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Folder Color"}),(0,i.jsx)("input",{type:"color",value:ea.color,onChange:e=>ec({...ea,color:e.target.value}),style:{width:"100%",height:"42px",border:"1px solid #d1d5db",borderRadius:"6px",cursor:"pointer"}})]})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.75rem",marginTop:"1rem"},children:[(0,i.jsx)("button",{type:"button",onClick:()=>M(!1),style:{padding:"0.75rem 1.5rem",border:"1px solid #d1d5db",borderRadius:"6px",background:"#ffffff",color:"#374151",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancel"}),(0,i.jsx)("button",{type:"submit",style:{padding:"0.75rem 1.5rem",border:"none",borderRadius:"6px",background:"#3b82f6",color:"#ffffff",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Create Folder"})]})]})]})}),A&&k&&(0,i.jsx)("div",{style:{position:"fixed",inset:"0",background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem",zIndex:1e3},onClick:()=>Z(!1),children:(0,i.jsxs)("div",{style:{background:"#ffffff",borderRadius:"12px",width:"100%",maxWidth:"600px",padding:"2rem"},onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,i.jsxs)("h2",{style:{fontSize:"1.25rem",fontWeight:"600",margin:"0",color:"#111827"},children:["Add Expense to ",k.name]}),(0,i.jsx)("button",{onClick:()=>Z(!1),style:{background:"none",border:"none",cursor:"pointer",color:"#6b7280"},children:(0,i.jsx)(u.Z,{style:{width:"20px",height:"20px"}})})]}),(0,i.jsxs)("form",{onSubmit:eb,style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Item Name *"}),(0,i.jsx)("input",{type:"text",required:!0,value:em.item_name,onChange:e=>ef({...em,item_name:e.target.value}),placeholder:"e.g., Office Printer",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Description"}),(0,i.jsx)("textarea",{value:em.description,onChange:e=>ef({...em,description:e.target.value}),placeholder:"Additional details about this expense",rows:3,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem",resize:"vertical"}})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Category *"}),(0,i.jsxs)("select",{required:!0,value:em.category,onChange:e=>ef({...em,category:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem"},children:[(0,i.jsx)("option",{value:"",children:"Select category..."}),I.map(e=>(0,i.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Date *"}),(0,i.jsx)("input",{type:"date",required:!0,value:em.expense_date,onChange:e=>ef({...em,expense_date:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem"}})]})]}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"1rem"},children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Price *"}),(0,i.jsx)("input",{type:"number",step:"0.01",required:!0,value:em.price,onChange:e=>ef({...em,price:e.target.value}),placeholder:"0.00",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Quantity *"}),(0,i.jsx)("input",{type:"number",min:"1",required:!0,value:em.quantity,onChange:e=>ef({...em,quantity:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Total"}),(0,i.jsxs)("div",{style:{padding:"0.75rem",background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"6px",fontSize:"0.875rem",fontWeight:"600",color:"#111827"},children:[k.currency," ",(parseFloat(em.price||"0")*parseInt(em.quantity||"1")).toFixed(2)]})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Receipt URL (Optional)"}),(0,i.jsx)("input",{type:"url",value:em.receipt_url,onChange:e=>ef({...em,receipt_url:e.target.value}),placeholder:"https://example.com/receipt.pdf",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem"}})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Notes"}),(0,i.jsx)("textarea",{value:em.notes,onChange:e=>ef({...em,notes:e.target.value}),placeholder:"Additional notes or comments",rows:2,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem",resize:"vertical"}})]}),(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",gap:"0.75rem",marginTop:"1rem"},children:[(0,i.jsx)("button",{type:"button",onClick:()=>Z(!1),style:{padding:"0.75rem 1.5rem",border:"1px solid #d1d5db",borderRadius:"6px",background:"#ffffff",color:"#374151",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Cancel"}),(0,i.jsx)("button",{type:"submit",style:{padding:"0.75rem 1.5rem",border:"none",borderRadius:"6px",background:"#10b981",color:"#ffffff",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Add Expense"})]})]})]})}),N&&k&&(0,i.jsx)("div",{style:{position:"fixed",inset:"0",background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"2rem",zIndex:1e3},onClick:()=>O(!1),children:(0,i.jsxs)("div",{style:{background:"#ffffff",borderRadius:"12px",width:"100%",maxWidth:"600px",maxHeight:"80vh",overflow:"auto",padding:"2rem"},onClick:e=>e.stopPropagation(),children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,i.jsxs)("h2",{style:{fontSize:"1.25rem",fontWeight:"600",margin:"0",color:"#111827"},children:["Manage Members - ",k.name]}),(0,i.jsx)("button",{onClick:()=>O(!1),style:{background:"none",border:"none",cursor:"pointer",color:"#6b7280"},children:(0,i.jsx)(u.Z,{style:{width:"20px",height:"20px"}})})]}),(0,i.jsxs)("div",{style:{background:"#f9fafb",border:"1px solid #e5e7eb",borderRadius:"8px",padding:"1.5rem",marginBottom:"1.5rem"},children:[(0,i.jsx)("h3",{style:{fontSize:"1rem",fontWeight:"600",margin:"0 0 1rem 0",color:"#111827"},children:"Add New Member"}),(0,i.jsxs)("div",{style:{display:"flex",gap:"1rem",alignItems:"flex-end",flexWrap:"wrap"},children:[(0,i.jsxs)("div",{className:"user-suggestions-container",style:{flex:1,minWidth:"200px",position:"relative"},children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Email Address"}),(0,i.jsx)("input",{type:"email",value:$,onChange:e=>e_(e.target.value),onFocus:()=>{eo.length>0&&es(!0)},placeholder:"Start typing name or email...",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem"}}),el&&eo.length>0&&(0,i.jsx)("div",{style:{position:"absolute",top:"100%",left:"0",right:"0",background:"#ffffff",border:"1px solid #d1d5db",borderRadius:"6px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",zIndex:1e3,maxHeight:"200px",overflowY:"auto",marginTop:"2px"},children:eo.map((e,r)=>(0,i.jsxs)("div",{onClick:()=>ek(e),style:{padding:"0.75rem",cursor:"pointer",borderBottom:r<eo.length-1?"1px solid #f3f4f6":"none",display:"flex",alignItems:"center",gap:"0.5rem",transition:"background-color 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background="#f9fafb"},onMouseLeave:e=>{e.currentTarget.style.background="#ffffff"},children:[(0,i.jsx)("div",{style:{width:"24px",height:"24px",background:"#f3f4f6",borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(b.Z,{style:{width:"12px",height:"12px",color:"#6b7280"}})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#111827"},children:e.name||"Unknown User"}),(0,i.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:e.email})]})]},e.id))}),el&&0===eo.length&&$.length>2&&(0,i.jsxs)("div",{style:{position:"absolute",top:"100%",left:"0",right:"0",background:"#ffffff",border:"1px solid #d1d5db",borderRadius:"6px",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",zIndex:1e3,marginTop:"2px",padding:"0.75rem",textAlign:"center",color:"#6b7280",fontSize:"0.875rem"},children:['No users found matching "',$,'"']})]}),(0,i.jsxs)("div",{style:{minWidth:"120px"},children:[(0,i.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Role"}),(0,i.jsxs)("select",{value:er,onChange:e=>et(e.target.value),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem"},children:[(0,i.jsx)("option",{value:"viewer",children:"Viewer"}),(0,i.jsx)("option",{value:"editor",children:"Editor"})]})]}),(0,i.jsx)("button",{onClick:ez,style:{background:"#3b82f6",color:"#ffffff",border:"none",borderRadius:"6px",padding:"0.75rem 1rem",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500",whiteSpace:"nowrap"},children:"Add Member"})]})]}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("h3",{style:{fontSize:"1rem",fontWeight:"600",margin:"0 0 1rem 0",color:"#111827"},children:["Current Members (",C.length,")"]}),0===C.length?(0,i.jsxs)("div",{style:{textAlign:"center",padding:"2rem",color:"#6b7280",background:"#f9fafb",borderRadius:"8px"},children:[(0,i.jsx)(b.Z,{style:{width:"32px",height:"32px",margin:"0 auto 0.5rem",color:"#d1d5db"}}),(0,i.jsx)("p",{style:{fontSize:"0.875rem",margin:"0"},children:"No members yet. Add members to share this expense folder."})]}):(0,i.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.75rem"},children:C.map(r=>(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"1rem",background:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px"},children:[(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[(0,i.jsx)("div",{style:{width:"32px",height:"32px",background:"#f3f4f6",borderRadius:"6px",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,i.jsx)(b.Z,{style:{width:"16px",height:"16px",color:"#6b7280"}})}),(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{style:{fontSize:"0.875rem",fontWeight:"600",color:"#111827"},children:r.user_name||r.user_email||"Unknown User"}),(0,i.jsx)("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:r.user_email})]})]}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:["owner"!==r.role&&(0,i.jsxs)("select",{value:r.role,onChange:e=>eR(r.id,e.target.value),style:{padding:"0.375rem 0.5rem",border:"1px solid #d1d5db",borderRadius:"4px",fontSize:"0.75rem",background:"#ffffff"},children:[(0,i.jsx)("option",{value:"viewer",children:"Viewer"}),(0,i.jsx)("option",{value:"editor",children:"Editor"})]}),(0,i.jsx)("span",{style:{background:"owner"===r.role?"#fef3c7":"editor"===r.role?"#dbeafe":"#f3f4f6",color:"owner"===r.role?"#92400e":"editor"===r.role?"#1e40af":"#374151",padding:"0.25rem 0.5rem",borderRadius:"4px",fontSize:"0.75rem",fontWeight:"500",textTransform:"capitalize"},children:r.role}),"owner"!==r.role&&r.user_id!==(null==e?void 0:e.id)&&(0,i.jsx)("button",{onClick:()=>eC(r.id,r.user_name||r.user_email||"User"),style:{background:"none",border:"none",cursor:"pointer",color:"#dc2626",padding:"0.25rem"},title:"Remove member",children:(0,i.jsx)(y.Z,{style:{width:"14px",height:"14px"}})})]})]},r.id))})]}),(0,i.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",marginTop:"1.5rem"},children:(0,i.jsx)("button",{onClick:()=>O(!1),style:{padding:"0.75rem 1.5rem",border:"1px solid #d1d5db",borderRadius:"6px",background:"#ffffff",color:"#374151",cursor:"pointer",fontSize:"0.875rem",fontWeight:"500"},children:"Close"})})]})}),(0,i.jsx)("style",{dangerouslySetInnerHTML:{__html:"\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        "}})]}):null}}},function(e){e.O(0,[8326,7708,1782,8411,3152,8714,2971,2472,1744],function(){return e(e.s=67676)}),_N_E=e.O()}]);