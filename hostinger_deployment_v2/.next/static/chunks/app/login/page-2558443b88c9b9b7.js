(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2626],{6510:function(e,r,t){Promise.resolve().then(t.bind(t,7355))},7355:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return x},dynamic:function(){return c}});var o=t(7437),i=t(9738),a=t.n(i),s=t(2265),n=t(4033),l=t(1396),m=t.n(l),d=t(3549);let c="force-dynamic";function x(){let e=(0,n.useRouter)(),{login:r}=(0,d.useAuth)(),[t,i]=(0,s.useState)(""),[l,c]=(0,s.useState)(""),[x,b]=(0,s.useState)(""),[p,f]=(0,s.useState)(!1),[u,y]=(0,s.useState)(!1);(0,s.useEffect)(()=>{let e=()=>{y(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let g=async o=>{o.preventDefault(),b(""),f(!0);try{await r(t,l),e.push("/dashboard")}catch(e){var i,a;b((null===(a=e.response)||void 0===a?void 0:null===(i=a.data)||void 0===i?void 0:i.detail)||"Failed to login")}finally{f(!1)}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a(),{id:"7189871be5f9db66",dynamic:[u?"1rem":"2rem",u?"12px":"16px",u?"2rem 1.5rem":"3rem",u?"100%":"420px",u?"0 16px":"0"],children:".login-container.__jsx-style-dynamic-selector{min-height:100vh;background:#fafafa;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;padding:".concat(u?"1rem":"2rem",';font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif}.login-card.__jsx-style-dynamic-selector{background:#fff;-webkit-border-radius:').concat(u?"12px":"16px",";-moz-border-radius:").concat(u?"12px":"16px",";border-radius:").concat(u?"12px":"16px",";-webkit-box-shadow:0 1px 3px rgba(0,0,0,.1);-moz-box-shadow:0 1px 3px rgba(0,0,0,.1);box-shadow:0 1px 3px rgba(0,0,0,.1);border:1px solid#e5e7eb;padding:").concat(u?"2rem 1.5rem":"3rem",";width:100%;max-width:").concat(u?"100%":"420px",";position:relative;margin:").concat(u?"0 16px":"0",'}.title-section.__jsx-style-dynamic-selector{text-align:center;margin-bottom:2.5rem}.title.__jsx-style-dynamic-selector{font-size:2rem;font-weight:700;color:#111827;margin-bottom:.5rem;letter-spacing:-.025em}.subtitle.__jsx-style-dynamic-selector{color:#6b7280;font-size:1rem;line-height:1.5;font-weight:400}.error-message.__jsx-style-dynamic-selector{margin-bottom:1.5rem;padding:1rem;background:#fef2f2;border:1px solid#fecaca;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.error-icon.__jsx-style-dynamic-selector{width:1.25rem;height:1.25rem;color:#ef4444;margin-right:.75rem;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0}.error-text.__jsx-style-dynamic-selector{color:#dc2626;font-size:.875rem;font-weight:500}.form.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:1.5rem}.form-group.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:.5rem}.form-label.__jsx-style-dynamic-selector{font-size:.875rem;font-weight:600;color:#374151;margin-bottom:.5rem}.form-input.__jsx-style-dynamic-selector{width:100%;padding:.875rem 1rem;border:1px solid#d1d5db;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;font-size:.875rem;-webkit-transition:all.2s ease;-moz-transition:all.2s ease;-o-transition:all.2s ease;transition:all.2s ease;background:#fff;color:#111827;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.form-input.__jsx-style-dynamic-selector:focus{outline:none;border-color:#374151;-webkit-box-shadow:0 0 0 3px rgba(55,65,81,.1);-moz-box-shadow:0 0 0 3px rgba(55,65,81,.1);box-shadow:0 0 0 3px rgba(55,65,81,.1)}.form-input.__jsx-style-dynamic-selector:hover{border-color:#9ca3af}.form-input.__jsx-style-dynamic-selector::-webkit-input-placeholder{color:#9ca3af}.form-input.__jsx-style-dynamic-selector:-moz-placeholder{color:#9ca3af}.form-input.__jsx-style-dynamic-selector::-moz-placeholder{color:#9ca3af}.form-input.__jsx-style-dynamic-selector:-ms-input-placeholder{color:#9ca3af}.form-input.__jsx-style-dynamic-selector::-ms-input-placeholder{color:#9ca3af}.form-input.__jsx-style-dynamic-selector::placeholder{color:#9ca3af}.remember-forgot.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin:.5rem 0}.remember-me.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;gap:.5rem}.checkbox.__jsx-style-dynamic-selector{width:1rem;height:1rem;border:1px solid#d1d5db;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;background:#fff;cursor:pointer;-webkit-transition:all.2s ease;-moz-transition:all.2s ease;-o-transition:all.2s ease;transition:all.2s ease}.checkbox.__jsx-style-dynamic-selector:checked{background:#111827;border-color:#111827}.checkbox-label.__jsx-style-dynamic-selector{font-size:.875rem;color:#6b7280;cursor:pointer}.forgot-link.__jsx-style-dynamic-selector{font-size:.875rem;font-weight:500;color:#111827;text-decoration:none;-webkit-transition:color.2s ease;-moz-transition:color.2s ease;-o-transition:color.2s ease;transition:color.2s ease}.forgot-link.__jsx-style-dynamic-selector:hover{color:#374151}.submit-button.__jsx-style-dynamic-selector{width:100%;padding:.875rem 1.5rem;background:#111827;color:#fff;border:none;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;font-size:.875rem;font-weight:600;cursor:pointer;-webkit-transition:all.2s ease;-moz-transition:all.2s ease;-o-transition:all.2s ease;transition:all.2s ease;position:relative;overflow:hidden}.submit-button.__jsx-style-dynamic-selector:hover:not(:disabled){background:#1f2937}.submit-button.__jsx-style-dynamic-selector:active:not(:disabled){background:#374151}.submit-button.__jsx-style-dynamic-selector:disabled{opacity:.5;cursor:not-allowed}.spinner.__jsx-style-dynamic-selector{display:inline-block;width:1rem;height:1rem;border:2px solid transparent;border-top:2px solid#fff;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;-webkit-animation:spin 1s linear infinite;-moz-animation:spin 1s linear infinite;-o-animation:spin 1s linear infinite;animation:spin 1s linear infinite;margin-right:.5rem}.divider.__jsx-style-dynamic-selector{margin:2rem 0;position:relative;text-align:center}.divider.__jsx-style-dynamic-selector::before{content:"";position:absolute;top:50%;left:0;right:0;height:1px;background:#e5e7eb}.divider-label.__jsx-style-dynamic-selector{background:#fff;padding:0 1rem;color:#6b7280;font-size:.875rem}.signup-section.__jsx-style-dynamic-selector{text-align:center}.signup-text.__jsx-style-dynamic-selector{color:#6b7280;font-size:.875rem}.signup-link.__jsx-style-dynamic-selector{font-weight:600;color:#111827;text-decoration:none;-webkit-transition:color.2s ease;-moz-transition:color.2s ease;-o-transition:color.2s ease;transition:color.2s ease}.signup-link.__jsx-style-dynamic-selector:hover{color:#374151}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@media(max-width:640px){.login-container.__jsx-style-dynamic-selector{padding:1rem}.login-card.__jsx-style-dynamic-selector{padding:2rem 1.5rem}.title.__jsx-style-dynamic-selector{font-size:1.75rem}.remember-forgot.__jsx-style-dynamic-selector{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;gap:1rem;-webkit-box-align:start;-webkit-align-items:flex-start;-moz-box-align:start;-ms-flex-align:start;align-items:flex-start}}')}),(0,o.jsx)("div",{className:a().dynamic([["7189871be5f9db66",[u?"1rem":"2rem",u?"12px":"16px",u?"2rem 1.5rem":"3rem",u?"100%":"420px",u?"0 16px":"0"]]])+" login-container",children:(0,o.jsxs)("div",{className:a().dynamic([["7189871be5f9db66",[u?"1rem":"2rem",u?"12px":"16px",u?"2rem 1.5rem":"3rem",u?"100%":"420px",u?"0 16px":"0"]]])+" login-card",children:[(0,o.jsxs)("div",{className:a().dynamic([["7189871be5f9db66",[u?"1rem":"2rem",u?"12px":"16px",u?"2rem 1.5rem":"3rem",u?"100%":"420px",u?"0 16px":"0"]]])+" title-section",children:[(0,o.jsx)("h1",{className:a().dynamic([["7189871be5f9db66",[u?"1rem":"2rem",u?"12px":"16px",u?"2rem 1.5rem":"3rem",u?"100%":"420px",u?"0 16px":"0"]]])+" title",children:"Welcome Back"}),(0,o.jsx)("p",{className:a().dynamic([["7189871be5f9db66",[u?"1rem":"2rem",u?"12px":"16px",u?"2rem 1.5rem":"3rem",u?"100%":"420px",u?"0 16px":"0"]]])+" subtitle",children:"Sign in to continue to your dashboard"})]}),x&&(0,o.jsxs)("div",{className:a().dynamic([["7189871be5f9db66",[u?"1rem":"2rem",u?"12px":"16px",u?"2rem 1.5rem":"3rem",u?"100%":"420px",u?"0 16px":"0"]]])+" error-message",children:[(0,o.jsx)("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",className:a().dynamic([["7189871be5f9db66",[u?"1rem":"2rem",u?"12px":"16px",u?"2rem 1.5rem":"3rem",u?"100%":"420px",u?"0 16px":"0"]]])+" error-icon",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",className:a().dynamic([["7189871be5f9db66",[u?"1rem":"2rem",u?"12px":"16px",u?"2rem 1.5rem":"3rem",u?"100%":"420px",u?"0 16px":"0"]]])})}),(0,o.jsx)("span",{className:a().dynamic([["7189871be5f9db66",[u?"1rem":"2rem",u?"12px":"16px",u?"2rem 1.5rem":"3rem",u?"100%":"420px",u?"0 16px":"0"]]])+" error-text",children:x})]}),(0,o.jsxs)("form",{onSubmit:g,autoComplete:"on",className:a().dynamic([["7189871be5f9db66",[u?"1rem":"2rem",u?"12px":"16px",u?"2rem 1.5rem":"3rem",u?"100%":"420px",u?"0 16px":"0"]]])+" form",children:[(0,o.jsxs)("div",{className:a().dynamic([["7189871be5f9db66",[u?"1rem":"2rem",u?"12px":"16px",u?"2rem 1.5rem":"3rem",u?"100%":"420px",u?"0 16px":"0"]]])+" form-group",children:[(0,o.jsx)("label",{htmlFor:"email",className:a().dynamic([["7189871be5f9db66",[u?"1rem":"2rem",u?"12px":"16px",u?"2rem 1.5rem":"3rem",u?"100%":"420px",u?"0 16px":"0"]]])+" form-label",children:"Email Address"}),(0,o.jsx)("input",{id:"email",name:"email",type:"email",required:!0,placeholder:"Enter your email",autoComplete:"email",value:t,onChange:e=>i(e.target.value),className:a().dynamic([["7189871be5f9db66",[u?"1rem":"2rem",u?"12px":"16px",u?"2rem 1.5rem":"3rem",u?"100%":"420px",u?"0 16px":"0"]]])+" form-input"})]}),(0,o.jsxs)("div",{className:a().dynamic([["7189871be5f9db66",[u?"1rem":"2rem",u?"12px":"16px",u?"2rem 1.5rem":"3rem",u?"100%":"420px",u?"0 16px":"0"]]])+" form-group",children:[(0,o.jsx)("label",{htmlFor:"password",className:a().dynamic([["7189871be5f9db66",[u?"1rem":"2rem",u?"12px":"16px",u?"2rem 1.5rem":"3rem",u?"100%":"420px",u?"0 16px":"0"]]])+" form-label",children:"Password"}),(0,o.jsx)("input",{id:"password",name:"password",type:"password",required:!0,placeholder:"Enter your password",autoComplete:"current-password",value:l,onChange:e=>c(e.target.value),className:a().dynamic([["7189871be5f9db66",[u?"1rem":"2rem",u?"12px":"16px",u?"2rem 1.5rem":"3rem",u?"100%":"420px",u?"0 16px":"0"]]])+" form-input"})]}),(0,o.jsxs)("div",{className:a().dynamic([["7189871be5f9db66",[u?"1rem":"2rem",u?"12px":"16px",u?"2rem 1.5rem":"3rem",u?"100%":"420px",u?"0 16px":"0"]]])+" remember-forgot",children:[(0,o.jsxs)("label",{className:a().dynamic([["7189871be5f9db66",[u?"1rem":"2rem",u?"12px":"16px",u?"2rem 1.5rem":"3rem",u?"100%":"420px",u?"0 16px":"0"]]])+" remember-me",children:[(0,o.jsx)("input",{type:"checkbox",name:"remember",autoComplete:"off",className:a().dynamic([["7189871be5f9db66",[u?"1rem":"2rem",u?"12px":"16px",u?"2rem 1.5rem":"3rem",u?"100%":"420px",u?"0 16px":"0"]]])+" checkbox"}),(0,o.jsx)("span",{className:a().dynamic([["7189871be5f9db66",[u?"1rem":"2rem",u?"12px":"16px",u?"2rem 1.5rem":"3rem",u?"100%":"420px",u?"0 16px":"0"]]])+" checkbox-label",children:"Remember me"})]}),(0,o.jsx)(m(),{href:"/forgot-password",className:"forgot-link",children:"Forgot password?"})]}),(0,o.jsx)("button",{type:"submit",disabled:p,className:a().dynamic([["7189871be5f9db66",[u?"1rem":"2rem",u?"12px":"16px",u?"2rem 1.5rem":"3rem",u?"100%":"420px",u?"0 16px":"0"]]])+" submit-button",children:p?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("span",{className:a().dynamic([["7189871be5f9db66",[u?"1rem":"2rem",u?"12px":"16px",u?"2rem 1.5rem":"3rem",u?"100%":"420px",u?"0 16px":"0"]]])+" spinner"}),"Signing in..."]}):"Sign In"})]})]})})]})}},3549:function(e,r,t){"use strict";t.r(r),t.d(r,{AuthProvider:function(){return l},useAuth:function(){return n}});var o=t(7437),i=t(2265),a=t(8411);let s=(0,i.createContext)(void 0),n=()=>{let e=(0,i.useContext)(s);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e},l=e=>{let{children:r}=e,[t,n]=(0,i.useState)(null),[l,m]=(0,i.useState)(!0),[d,c]=(0,i.useState)(!1);(0,i.useEffect)(()=>{c(!0)},[]),(0,i.useEffect)(()=>{if(!d)return;let e=async()=>{try{console.log("Starting auth initialization..."),await new Promise(e=>setTimeout(e,50));let{user:i,error:s}=await a.supabaseAuth.getUser();if(console.log("Auth result:",{currentUser:i,error:s}),i&&!s){var e,r,t,o;let a={id:i.id,email:i.email,name:(null===(e=i.user_metadata)||void 0===e?void 0:e.name)||i.email,phone:(null===(r=i.user_metadata)||void 0===r?void 0:r.phone)||"",role:(null===(t=i.user_metadata)||void 0===t?void 0:t.role)||"member",position:(null===(o=i.user_metadata)||void 0===o?void 0:o.position)||"",date_joined:new Date().toISOString()};n(a),console.log("User set:",a)}else console.log("No user found or error occurred")}catch(e){console.error("Auth initialization error:",e)}finally{console.log("Setting isLoading to false"),m(!1)}},r=setTimeout(()=>{console.warn("Auth initialization timeout, proceeding without auth"),m(!1)},3e3),t=setTimeout(()=>{e().finally(()=>{clearTimeout(r)})},100);return()=>{clearTimeout(r),clearTimeout(t)}},[d]);let x=async(e,r)=>{try{console.log("Attempting login for:",e);let{user:l,error:m}=await a.supabaseAuth.signIn(e,r);if(m)throw console.error("Login error:",m),Error(m instanceof Error?m.message:"Login failed");if(l){var t,o,i,s;let e={id:l.id,email:l.email,name:(null===(t=l.user_metadata)||void 0===t?void 0:t.name)||l.email,phone:(null===(o=l.user_metadata)||void 0===o?void 0:o.phone)||"",role:(null===(i=l.user_metadata)||void 0===i?void 0:i.role)||"member",position:(null===(s=l.user_metadata)||void 0===s?void 0:s.position)||"",date_joined:new Date().toISOString()};n(e),console.log("Login successful:",e)}}catch(e){throw console.error("Login failed:",e),Error(e.message||"Login failed")}},b=async e=>{throw Error("Registration is disabled. Please contact an administrator.")},p=async()=>{try{await a.supabaseAuth.signOut(),n(null)}catch(e){console.error("Logout error:",e),n(null)}};return(0,o.jsx)(s.Provider,{value:{user:t,isLoading:l,login:x,register:b,logout:p,isAuthenticated:!!t},children:r})}},4033:function(e,r,t){e.exports=t(94)}},function(e){e.O(0,[8326,7708,2933,8411,2971,2472,1744],function(){return e(e.s=6510)}),_N_E=e.O()}]);