"use strict";exports.id=7068,exports.ids=[7068],exports.modules={66823:(e,r,t)=>{t.d(r,{Z:()=>w});var n=t(53854),s=t(34218),o=t(75548),a=t.n(o),i=t(51018),l=t(56837),d=t(36676),c=t(2132),p=t(34148),m=t(75908),g=t(84063),h=t(89618),x=t(62075),u=t(8041),y=t(96835),F=t(27121),f=t(18998),b=t(92843),j=t(29329),A=t(99374);let v=[{name:"Personal",href:"/personal",icon:p.Z},{name:"Password Vault",href:"/password-vault",icon:m.Z},{name:"Meeting Schedule",href:"/calendar",icon:g.Z},{name:"Content Calendar",href:"/content-calendar",icon:h.Z}],k=[{name:"Notifications",href:"/notifications",icon:x.Z,badge:!0}];function w({projects:e,onCreateProject:r}={}){let t=(0,i.useRouter)(),o=(0,i.usePathname)(),{user:p,logout:m}=(0,l.useAuth)(),{projects:g,teamMembers:h,loadingProjects:w,unreadNotifications:S,unreadMessages:T,totalUnreadMessages:D,clearUnreadForUser:B,refreshProjects:C}=(0,d.useSidebarData)(),[M,W]=(0,s.useState)(!1),[z,N]=(0,s.useState)(""),[E,P]=(0,s.useState)("#3B82F6"),[R,_]=(0,s.useState)(!1),[I,L]=(0,s.useState)(!1);(0,s.useEffect)(()=>{L(!1)},[o]),(0,s.useEffect)(()=>(I?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[I]);let Z=async()=>{await m(),t.push("/login")},O=async()=>{if(p?.id&&z.trim()){_(!0);try{let{data:e,error:r}=await c.supabase.from("projects_project").insert({name:z.trim(),description:"",color:E,project_type:"general",status:"active",created_by_id:p.id,is_archived:!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(r){console.error("Error creating project:",r),alert("Failed to create project: "+(r.message||"Unknown error")),_(!1);return}let{error:n}=await c.supabase.from("projects_project_members").insert({project_id:e.id,user_id:p.id});if(n){console.error("Error adding member:",n);try{await c.supabase.rpc("add_project_member",{p_project_id:e.id,p_user_id:p.id,p_role:"admin"})}catch(e){console.error("RPC fallback also failed:",e)}}await C(),N(""),W(!1),t.push(`/projects/${e.id}`)}catch(e){console.error("Error creating project:",e),alert("Failed to create project")}_(!1)}},$=(0,n.jsxs)(n.Fragment,{children:[n.jsx("div",{className:"sidebar-header",children:(0,n.jsxs)("div",{className:"sidebar-brand",children:[n.jsx("div",{className:"sidebar-brand-icon",children:n.jsx("span",{style:{color:"#FFFFFF",fontWeight:700,fontSize:"1.125rem"},children:"F"})}),n.jsx("div",{style:{flex:1,minWidth:0},children:(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[n.jsx("span",{style:{color:"#FFFFFF",fontWeight:600,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:"Focus"}),n.jsx(u.Z,{style:{width:"16px",height:"16px",color:"#71717A"}})]})}),n.jsx("button",{className:"sidebar-close-btn",onClick:()=>L(!1),style:{display:"none",padding:"0.375rem",color:"#71717A",background:"none",border:"none",cursor:"pointer"},children:n.jsx(y.Z,{style:{width:"24px",height:"24px"}})})]})}),(0,n.jsxs)("nav",{className:"sidebar-nav",children:[(0,n.jsxs)(a(),{href:"/dashboard",className:"sidebar-link",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.625rem 0.75rem",borderRadius:"0.5rem",background:"/dashboard"===o?"#10B981":"transparent",color:"/dashboard"===o?"#FFFFFF":"#A1A1AA",textDecoration:"none",transition:"all 0.2s",marginBottom:"0.5rem"},onMouseEnter:e=>{"/dashboard"!==o&&(e.currentTarget.style.background="#1A1A1A",e.currentTarget.style.color="#FFFFFF")},onMouseLeave:e=>{"/dashboard"!==o&&(e.currentTarget.style.background="transparent",e.currentTarget.style.color="#A1A1AA")},children:[n.jsx(F.Z,{style:{width:"20px",height:"20px",flexShrink:0}}),n.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500,fontFamily:"Mabry Pro, sans-serif"},children:"Dashboard"})]}),(0,n.jsxs)("div",{style:{marginBottom:"0.5rem"},children:[n.jsx("div",{style:{padding:"0 0.75rem",marginBottom:"0.5rem",marginTop:"0.5rem"},children:(0,n.jsxs)("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#52525B",textTransform:"uppercase",letterSpacing:"0.05em",fontFamily:"Mabry Pro, sans-serif"},children:["Projects (",g.length,")"]})}),(0,n.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[w?n.jsx("div",{style:{padding:"0.5rem 0.75rem",fontSize:"0.8125rem",color:"#52525B",fontFamily:"Mabry Pro, sans-serif"},children:"Loading projects..."}):g.length>0?g.map(e=>{let r=o===`/projects/${e.id}`;return(0,n.jsxs)(a(),{href:`/projects/${e.id}`,className:"sidebar-link",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",borderRadius:"0.5rem",background:r?"#1A1A1A":"transparent",color:r?"#FFFFFF":"#A1A1AA",textDecoration:"none",transition:"all 0.2s"},onMouseEnter:e=>{r||(e.currentTarget.style.background="#1A1A1A",e.currentTarget.style.color="#FFFFFF")},onMouseLeave:e=>{r||(e.currentTarget.style.background="transparent",e.currentTarget.style.color="#A1A1AA")},children:[n.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"0.125rem",flexShrink:0,backgroundColor:e.color||"#71717A"}}),n.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1,fontFamily:"Mabry Pro, sans-serif"},children:e.name})]},e.id)}):n.jsx("div",{style:{padding:"0.5rem 0.75rem",fontSize:"0.8125rem",color:"#52525B",fontFamily:"Mabry Pro, sans-serif"},children:"No projects yet"}),(0,n.jsxs)("button",{onClick:()=>W(!0),className:"sidebar-create-btn",style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 0.75rem",borderRadius:"0.5rem",background:"transparent",color:"#71717A",border:"1px dashed #3D3D3D",cursor:"pointer",transition:"all 0.2s",width:"100%",marginTop:"0.5rem",fontSize:"0.8125rem",fontFamily:"Mabry Pro, sans-serif"},onMouseEnter:e=>{e.currentTarget.style.background="#1A1A1A",e.currentTarget.style.borderColor="#10B981",e.currentTarget.style.color="#10B981"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.borderColor="#3D3D3D",e.currentTarget.style.color="#71717A"},children:[n.jsx(f.Z,{style:{width:"16px",height:"16px"}}),n.jsx("span",{children:"New Project"})]})]})]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:v.map(e=>{let r=o===e.href;return(0,n.jsxs)(a(),{href:e.href,className:"sidebar-link",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.625rem 0.75rem",borderRadius:"0.5rem",background:r?"#10B981":"transparent",color:r?"#FFFFFF":"#A1A1AA",textDecoration:"none",transition:"all 0.2s",position:"relative"},onMouseEnter:e=>{r||(e.currentTarget.style.background="#1A1A1A",e.currentTarget.style.color="#FFFFFF")},onMouseLeave:e=>{r||(e.currentTarget.style.background="transparent",e.currentTarget.style.color="#A1A1AA")},children:[n.jsx(e.icon,{style:{width:"20px",height:"20px",flexShrink:0}}),n.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:e.name})]},e.name)})}),(0,n.jsxs)("div",{style:{marginTop:"1.5rem"},children:[n.jsx("div",{style:{padding:"0 0.75rem",marginBottom:"0.5rem"},children:n.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#52525B",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Personal"})}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:k.map(e=>{let r=o===e.href,t=e.badge&&S>0;return(0,n.jsxs)(a(),{href:e.href,className:"sidebar-link",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.625rem 0.75rem",borderRadius:"0.5rem",background:r?"#10B981":"transparent",color:r?"#FFFFFF":"#A1A1AA",textDecoration:"none",transition:"all 0.2s",position:"relative"},onMouseEnter:e=>{r||(e.currentTarget.style.background="#1A1A1A",e.currentTarget.style.color="#FFFFFF")},onMouseLeave:e=>{r||(e.currentTarget.style.background="transparent",e.currentTarget.style.color="#A1A1AA")},children:[n.jsx(e.icon,{style:{width:"20px",height:"20px",flexShrink:0}}),n.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1},children:e.name}),t&&n.jsx("span",{style:{fontSize:"0.6875rem",fontWeight:700,color:"#FFFFFF",background:"#EF4444",minWidth:"20px",height:"20px",borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 0.375rem"},children:S>99?"99+":S})]},e.name)})})]}),(0,n.jsxs)("div",{style:{marginTop:"1.5rem"},children:[(0,n.jsxs)("div",{style:{padding:"0 0.75rem",marginBottom:"0.5rem",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[n.jsx("span",{style:{fontSize:"0.75rem",fontWeight:600,color:"#52525B",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Messages"}),D>0&&n.jsx("span",{style:{fontSize:"0.625rem",fontWeight:700,color:"#FFFFFF",background:"#3B82F6",minWidth:"18px",height:"18px",borderRadius:"9px",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 0.25rem"},children:D>99?"99+":D})]}),n.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:h.length>0?h.map(e=>{let r="/messages"===o&&!1,t=T[e.id]||0;return(0,n.jsxs)(a(),{href:`/messages?user=${e.id}`,onClick:()=>B(e.id),className:"sidebar-link",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem 0.75rem",color:r?"#FFFFFF":"#A1A1AA",borderRadius:"0.5rem",cursor:"pointer",transition:"all 0.2s",textDecoration:"none",background:r?"#1A1A1A":"transparent"},onMouseEnter:e=>{e.currentTarget.style.background="#1A1A1A",e.currentTarget.style.color="#FFFFFF"},onMouseLeave:e=>{r||(e.currentTarget.style.background="transparent",e.currentTarget.style.color="#A1A1AA")},children:[(0,n.jsxs)("div",{style:{position:"relative",flexShrink:0},children:[e.avatar_url?n.jsx("img",{src:e.avatar_url,alt:e.name,style:{width:"32px",height:"32px",borderRadius:"50%",objectFit:"cover"}}):n.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",color:"#FFFFFF",fontSize:"0.75rem",fontWeight:500,background:"linear-gradient(135deg, #8B5CF6, #EC4899)"},children:e.name?.charAt(0).toUpperCase()||"?"}),n.jsx("div",{style:{position:"absolute",bottom:0,right:0,width:"8px",height:"8px",background:"#10B981",border:"2px solid #0D0D0D",borderRadius:"50%"}})]}),(0,n.jsxs)("div",{style:{flex:1,minWidth:0},children:[n.jsx("div",{style:{fontSize:"0.875rem",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.name}),n.jsx("div",{style:{fontSize:"0.75rem",color:"#52525B",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:"member"})]}),t>0&&n.jsx("span",{style:{minWidth:"20px",height:"20px",background:"#3B82F6",color:"#FFFFFF",fontSize:"0.7rem",fontWeight:700,borderRadius:"10px",display:"flex",alignItems:"center",justifyContent:"center",padding:"0 0.375rem",flexShrink:0},children:t>9?"9+":t})]},e.id)}):n.jsx("div",{style:{padding:"1rem 0.75rem",textAlign:"center",color:"#52525B",fontSize:"0.8125rem"},children:"No team members yet"})})]})]}),(0,n.jsxs)("div",{className:"sidebar-bottom",children:[(0,n.jsxs)(a(),{href:"/settings",className:"sidebar-link",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.625rem 0.75rem",borderRadius:"0.5rem",background:"/settings"===o?"#10B981":"transparent",color:"/settings"===o?"#FFFFFF":"#A1A1AA",textDecoration:"none",transition:"all 0.2s",marginBottom:"0.75rem"},onMouseEnter:e=>{"/settings"!==o&&(e.currentTarget.style.background="#1A1A1A",e.currentTarget.style.color="#FFFFFF")},onMouseLeave:e=>{"/settings"!==o&&(e.currentTarget.style.background="transparent",e.currentTarget.style.color="#A1A1AA")},children:[n.jsx(b.Z,{style:{width:"20px",height:"20px",flexShrink:0}}),n.jsx("span",{style:{fontSize:"0.875rem",fontWeight:500},children:"Settings"})]}),(0,n.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.5rem",borderRadius:"0.5rem",cursor:"pointer",transition:"background 0.2s"},onMouseEnter:e=>e.currentTarget.style.background="#1A1A1A",onMouseLeave:e=>e.currentTarget.style.background="transparent",children:[n.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",background:p?.avatar_url?`url(${p.avatar_url}) center/cover`:"linear-gradient(135deg, #8B5CF6, #EC4899)",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:!p?.avatar_url&&n.jsx("span",{style:{color:"#FFFFFF",fontWeight:500,fontSize:"0.875rem"},children:p?.name?.charAt(0)||"U"})}),(0,n.jsxs)("div",{style:{flex:1,minWidth:0},children:[n.jsx("div",{style:{color:"#FFFFFF",fontSize:"0.875rem",fontWeight:500,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p?.name||"User"}),n.jsx("div",{style:{color:"#52525B",fontSize:"0.75rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:p?.email||""})]}),n.jsx("button",{onClick:Z,className:"sidebar-logout-btn",style:{padding:"0.375rem",color:"#71717A",background:"none",border:"none",cursor:"pointer",transition:"color 0.2s"},title:"Logout",onMouseEnter:e=>e.currentTarget.style.color="#EF4444",onMouseLeave:e=>e.currentTarget.style.color="#71717A",children:n.jsx(j.Z,{style:{width:"20px",height:"20px"}})})]})]})]});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"mobile-topbar",id:"mobile-topbar",children:[(0,n.jsxs)("button",{className:"mobile-hamburger",onClick:()=>L(!0),"aria-label":"Open menu",children:[n.jsx(A.Z,{style:{width:"24px",height:"24px"}}),(S>0||D>0)&&n.jsx("span",{className:"mobile-hamburger-badge"})]}),(0,n.jsxs)("div",{className:"mobile-topbar-title",children:[n.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"0.5rem",background:"linear-gradient(135deg, #10B981, #059669)",display:"flex",alignItems:"center",justifyContent:"center"},children:n.jsx("span",{style:{color:"#FFFFFF",fontWeight:700,fontSize:"0.875rem"},children:"F"})}),n.jsx("span",{style:{color:"#FFFFFF",fontWeight:600,fontSize:"1rem",fontFamily:"Mabry Pro, sans-serif"},children:"Focus"})]}),(0,n.jsxs)(a(),{href:"/notifications",style:{position:"relative",color:"#A1A1AA",padding:"0.375rem"},children:[n.jsx(x.Z,{style:{width:"24px",height:"24px"}}),S>0&&n.jsx("span",{style:{position:"absolute",top:0,right:0,width:"8px",height:"8px",background:"#EF4444",borderRadius:"50%",border:"2px solid #0D0D0D"}})]})]}),I&&n.jsx("div",{className:"sidebar-overlay",onClick:()=>L(!1)}),n.jsx("aside",{className:`sidebar-panel ${I?"sidebar-open":""}`,id:"sidebar-panel",children:$}),M&&n.jsx("div",{className:"create-project-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:200},onClick:()=>W(!1),children:(0,n.jsxs)("div",{className:"create-project-modal",style:{background:"#1A1A1A",borderRadius:"16px",padding:"24px",width:"400px",maxWidth:"90vw",border:"1px solid #2D2D2D"},onClick:e=>e.stopPropagation(),children:[n.jsx("h3",{style:{color:"#FFFFFF",fontSize:"1.25rem",fontWeight:600,marginBottom:"20px",fontFamily:"Mabry Pro, sans-serif"},children:"Create New Project"}),(0,n.jsxs)("div",{style:{marginBottom:"16px"},children:[n.jsx("label",{style:{display:"block",color:"#A1A1AA",fontSize:"0.875rem",marginBottom:"8px",fontFamily:"Mabry Pro, sans-serif"},children:"Project Name"}),n.jsx("input",{type:"text",value:z,onChange:e=>N(e.target.value),placeholder:"Enter project name",className:"sidebar-modal-input",style:{width:"100%",padding:"12px 14px",background:"#141414",border:"1px solid #3D3D3D",borderRadius:"8px",color:"#FFFFFF",fontSize:"0.9375rem",outline:"none",fontFamily:"Mabry Pro, sans-serif"},onFocus:e=>e.currentTarget.style.borderColor="#3B82F6",onBlur:e=>e.currentTarget.style.borderColor="#3D3D3D"})]}),(0,n.jsxs)("div",{style:{marginBottom:"24px"},children:[n.jsx("label",{style:{display:"block",color:"#A1A1AA",fontSize:"0.875rem",marginBottom:"8px",fontFamily:"Mabry Pro, sans-serif"},children:"Project Color"}),n.jsx("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899","#06B6D4","#F97316"].map(e=>n.jsx("button",{onClick:()=>P(e),className:"sidebar-color-btn",style:{width:"32px",height:"32px",borderRadius:"8px",background:e,border:E===e?"3px solid #FFFFFF":"3px solid transparent",cursor:"pointer",transition:"transform 0.2s",padding:0,minHeight:"32px",minWidth:"32px"},onMouseEnter:e=>e.currentTarget.style.transform="scale(1.1)",onMouseLeave:e=>e.currentTarget.style.transform="scale(1)"},e))})]}),(0,n.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[n.jsx("button",{onClick:()=>W(!1),className:"sidebar-cancel-btn",style:{padding:"10px 20px",background:"transparent",border:"1px solid #3D3D3D",borderRadius:"8px",color:"#A1A1AA",fontSize:"0.875rem",fontWeight:500,cursor:"pointer",transition:"all 0.2s",fontFamily:"Mabry Pro, sans-serif",minHeight:"auto",minWidth:"auto"},onMouseEnter:e=>{e.currentTarget.style.background="#2D2D2D",e.currentTarget.style.color="#FFFFFF"},onMouseLeave:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.color="#A1A1AA"},children:"Cancel"}),n.jsx("button",{onClick:O,disabled:!z.trim()||R,className:"sidebar-submit-btn",style:{padding:"10px 20px",background:z.trim()?"#10B981":"#3D3D3D",border:"none",borderRadius:"8px",color:"#FFFFFF",fontSize:"0.875rem",fontWeight:500,cursor:z.trim()?"pointer":"not-allowed",transition:"all 0.2s",fontFamily:"Mabry Pro, sans-serif",opacity:R?.7:1,minHeight:"auto",minWidth:"auto"},onMouseEnter:e=>{z.trim()&&!R&&(e.currentTarget.style.background="#059669")},onMouseLeave:e=>{z.trim()&&(e.currentTarget.style.background="#10B981")},children:R?"Creating...":"Create Project"})]})]})})]})}},73881:(e,r,t)=>{t.r(r),t.d(r,{default:()=>s});var n=t(31323);let s=e=>{let r=(0,n.fillMetadataSegment)(".",e.params,"favicon.ico");return[{type:"image/x-icon",sizes:"16x16",url:r+""}]}}};