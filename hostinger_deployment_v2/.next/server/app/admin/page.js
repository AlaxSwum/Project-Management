(()=>{var e={};e.id=3,e.ids=[3],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},1017:e=>{"use strict";e.exports=require("path")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},2734:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>c.a,__next_app__:()=>f,originalPathname:()=>m,pages:()=>d,routeModule:()=>u,tree:()=>l});var t=r(7096),a=r(6132),i=r(7284),c=r.n(i),o=r(2564),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);r.d(s,n);let l=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,881)),"/Users/swumpyaesone/Documents/project_management/frontend/src/app/admin/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,2540)),"/Users/swumpyaesone/Documents/project_management/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/swumpyaesone/Documents/project_management/frontend/src/app/admin/page.tsx"],m="/admin/page",f={require:r,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},9436:(e,s,r)=>{Promise.resolve().then(r.bind(r,9392))},9392:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>f});var t=r(3854),a=r(887),i=r.n(a),c=r(4218),o=r(1018),n=r(6837),l=r(5450),d=r(9077);let m=(0,l.eI)("https://bayyefskgflbyyuwrlgm.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJheXllZnNrZ2ZsYnl5dXdybGdtIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAyNTg0MzAsImV4cCI6MjA2NTgzNDQzMH0.eTr2bOWOO7N7hzRR45qapeQ6V-u2bgV5BbQygZZgGGM");function f(){let{user:e,isAuthenticated:s,isLoading:r}=(0,n.useAuth)(),a=(0,o.useRouter)(),[l,f]=(0,c.useState)("projects"),[u,p]=(0,c.useState)([]),[x,b]=(0,c.useState)(!0),[g,j]=(0,c.useState)({name:"",email:"",password:"",role:"member",position:"",phone:""}),[h,y]=(0,c.useState)(!1),[_,N]=(0,c.useState)(""),w=u.map(e=>({id:e.project_id,name:e.project_name})),[v,k]=(0,c.useState)(!1),[C,S]=(0,c.useState)(null),[z,E]=(0,c.useState)([]),[B,I]=(0,c.useState)(!1),[D,R]=(0,c.useState)(""),[q,A]=(0,c.useState)([]),[W,P]=(0,c.useState)(!1),[F,U]=(0,c.useState)(""),[M,T]=(0,c.useState)([]),[L,O]=(0,c.useState)([]),[G,Z]=(0,c.useState)(!1),[J,$]=(0,c.useState)(null),[X,V]=(0,c.useState)({}),[Q,H]=(0,c.useState)(!1),[Y,K]=(0,c.useState)("");(0,c.useEffect)(()=>{if(r)return;if(!s){a.replace("/login");return}let t=e?.role||e?.user_metadata?.role,i="admin"===t||"hr"===t||e?.is_superuser||e?.is_staff;if(!i){a.replace("/dashboard");return}ee()},[s,r,a,e]);let ee=async()=>{try{b(!0);let{data:s,error:r}=await m.rpc("get_admin_projects",{admin_user_id:e?.id});if(r){if(console.error("Error fetching admin projects:",r),e?.role==="admin"||e?.is_superuser){let{data:e,error:s}=await m.from("projects_project").select("id, name").order("name");if(s)console.error("Error fetching all projects:",s),p([]);else{let s=e?.map(e=>({project_id:e.id,project_name:e.name,can_create_users:!0,can_edit_users:!0,can_delete_users:!0,can_manage_project:!0,can_view_reports:!0,can_assign_tasks:!0}))||[];p(s)}}else p([])}else p(s||[])}catch(e){console.error("Error in fetchAdminProjects:",e),p([])}finally{b(!1)}},es=async()=>{try{H(!0),K("");let{data:s,error:r}=await m.from("classes").select("id, instructor_id, instructor_name");if(r)throw r;let t=s||[],a=Array.from(new Set(t.filter(e=>!e.instructor_id&&e.instructor_name).map(e=>e.instructor_name).filter(Boolean))),i=new Map;if(a.length>0){let{data:e,error:s}=await m.from("auth_user").select("id, name").eq("role","instructor").in("name",a);if(s)throw s;(e||[]).forEach(e=>{e?.name&&e?.id&&i.set(e.name,e.id)})}let c=t.map(s=>{let r=s.instructor_id||(s.instructor_name?i.get(s.instructor_name):void 0);return r?{class_id:s.id,instructor_id:r,role:"instructor",is_active:!0,assigned_by:e?.id||null}:null}).filter(Boolean);if(0===c.length){K("No instructor assignments to backfill.");return}let{error:o}=await m.from("classes_instructors").upsert(c,{onConflict:"class_id,instructor_id"});if(o)throw o;K(`Backfill complete: ${c.length} instructor assignment(s) created/updated.`),await el(t.map(e=>e.id))}catch(e){console.error("Backfill error:",e),K("Error backfilling instructors: "+(e?.message||"Unknown error"))}finally{H(!1)}},er=async e=>{(e.can_manage_project||e.can_create_users||e.can_edit_users)&&(S(e),k(!0),U(""),await et(e.project_id))},et=async e=>{try{I(!0);let{data:s,error:r}=await m.from("projects_project_members").select(`
          user_id,
          auth_user:auth_user!inner(id, name, email, role)
        `).eq("project_id",e).order("user_id");if(r)throw r;E(s||[])}catch(e){console.error("Fetch members error:",e),U("Error loading members: "+(e?.message||"Unknown error")),E([])}finally{I(!1)}},ea=async e=>{if(R(e),U(""),C){if(!e||e.trim().length<2){A([]);return}try{let{data:s,error:r}=await m.from("auth_user").select("id, name, email, role").or(`name.ilike.%${e}%,email.ilike.%${e}%`).limit(10);if(r)throw r;A(s||[])}catch(e){console.error("User search error:",e),U("Error searching users"),A([])}}},ei=async e=>{if(C&&(C.can_manage_project||C.can_create_users||C.can_edit_users)){P(!0),U("");try{let{data:s,error:r}=await m.from("projects_project_members").select("user_id").eq("project_id",C.project_id).eq("user_id",e).maybeSingle();if(r)throw r;if(s){U("User is already a member of this project.");return}let{error:t}=await m.from("projects_project_members").insert([{project_id:C.project_id,user_id:e,joined_at:new Date().toISOString()}]);if(t)throw t;await et(C.project_id),U("Member added successfully"),A([]),R("")}catch(e){console.error("Add member error:",e),U("Error adding member: "+(e?.message||"Unknown error"))}finally{P(!1)}}},ec=async e=>{if(C&&(C.can_manage_project||C.can_edit_users))try{let{error:s}=await m.from("projects_project_members").delete().match({project_id:C.project_id,user_id:e});if(s)throw s;await et(C.project_id),U("Member removed")}catch(e){console.error("Remove member error:",e),U("Error removing member: "+(e?.message||"Unknown error"))}},eo=async s=>{if(s.preventDefault(),!g.email||!g.password||!g.name){N("Please fill in all required fields");return}y(!0),N("");try{let{data:s,error:r}=await m.from("auth_user").select("*").limit(1);r?console.log("Schema check error:",r):console.log("auth_user sample row structure:",s?.[0]?Object.keys(s[0]):"No rows found");let{data:t,error:a}=await m.from("auth_user").insert([{name:g.name,email:g.email,password:g.password,role:g.role,is_superuser:!1,is_staff:!1,is_active:!0,date_joined:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single();if(a){console.error("Error creating user:",a),N("Error creating user: "+a.message);return}await m.from("project_user_creation_log").insert([{created_user_id:t.id,created_by_admin_id:e?.id,user_role:g.role,notes:"User created by admin (no project assigned)"}]),N("User created successfully!"),j({name:"",email:"",password:"",role:"member",position:"",phone:""})}catch(e){console.error("Error in handleCreateUser:",e),N("An unexpected error occurred")}finally{y(!1)}},en=async()=>{try{Z(!0);let{data:e,error:s}=await m.from("classes").select(`
          *,
          classes_folders(name)
        `).order("class_date",{ascending:!0});if(s){console.error("Error fetching classes:",s);return}let r=e?.map(e=>({...e,folder_name:e.classes_folders?.name||"No Folder"}))||[];T(r);let t=r.map(e=>e.id);await el(t)}catch(e){console.error("Error in fetchClasses:",e)}finally{Z(!1)}},el=async e=>{if(!e||0===e.length){V({});return}try{let{data:s,error:r}=await m.from("classes_instructors").select("class_id, instructor_id, auth_user!classes_instructors_instructor_id_fkey(id, name, email)").in("class_id",e).eq("is_active",!0);if(r){console.error("Error fetching class instructors:",r),V({});return}let t={};s?.forEach(e=>{if(!e||!e.class_id||!e.auth_user)return;let s=t[e.class_id]||[];s.push({id:e.auth_user.id,name:e.auth_user.name,email:e.auth_user.email,role:"instructor"}),t[e.class_id]=s}),V(t)}catch(e){console.error("fetchClassInstructors error:",e),V({})}},ed=async()=>{try{let{data:e,error:s}=await m.from("auth_user").select("id, name, email, role").eq("role","instructor");if(s){console.error("❌ Error fetching instructors:",s);return}console.log("\uD83D\uDC68‍\uD83C\uDFEB Found instructors:",e),O(e||[])}catch(e){console.error("\uD83D\uDCA5 Error in fetchInstructors:",e)}},em=async(s,r)=>{try{console.log("\uD83C\uDFAF Assigning instructor:",{classId:s,instructorId:r}),$(s);let t=L.find(e=>e.id===r);if(!t){console.error("❌ Instructor not found:",r);return}console.log("\uD83D\uDC68‍\uD83C\uDFEB Found instructor:",t);let{data:a,error:i}=await m.from("classes_instructors").upsert({class_id:s,instructor_id:r,role:"instructor",is_active:!0,assigned_by:e?.id},{onConflict:"class_id,instructor_id"});if(i){console.error("❌ Error assigning instructor:",i),alert("Error assigning instructor: "+i.message);return}console.log("✅ Instructor assigned successfully:",a),await el([s])}catch(e){console.error("\uD83D\uDCA5 Error in assignInstructor:",e),alert("Unexpected error: "+e.message)}finally{$(null)}},ef=async(e,s)=>{try{console.log("\uD83D\uDDD1️ Removing instructor:",{classId:e,instructorId:s});let{error:r}=await m.from("classes_instructors").update({is_active:!1}).eq("class_id",e).eq("instructor_id",s);if(r){console.error("❌ Error removing instructor:",r),alert("Error removing instructor: "+r.message);return}console.log("✅ Instructor removed successfully"),await el([e])}catch(e){console.error("\uD83D\uDCA5 Error in removeInstructor:",e),alert("Unexpected error: "+e.message)}};return((0,c.useEffect)(()=>{"classes"===l&&(en(),ed())},[l]),r||x)?t.jsx("div",{style:{padding:"2rem"},children:"Loading..."}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(i(),{id:"5843053c2e31bfce",children:".admin-container.jsx-5843053c2e31bfce{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;background:-webkit-linear-gradient(315deg,#f5f5ed 0%,#fafaf2 100%);background:-moz-linear-gradient(315deg,#f5f5ed 0%,#fafaf2 100%);background:-o-linear-gradient(315deg,#f5f5ed 0%,#fafaf2 100%);background:linear-gradient(135deg,#f5f5ed 0%,#fafaf2 100%);position:relative;overflow:hidden}.main-content.jsx-5843053c2e31bfce{-webkit-box-flex:1;-webkit-flex:1;-moz-box-flex:1;-ms-flex:1;flex:1;margin-left:280px;background:transparent;position:relative;z-index:1}.header.jsx-5843053c2e31bfce{background:rgba(255,255,255,.95);-webkit-backdrop-filter:blur(20px);backdrop-filter:blur(20px);border-bottom:1px solid rgba(255,255,255,.3);padding:2.25rem 2rem;position:-webkit-sticky;position:sticky;top:0;z-index:20;-webkit-box-shadow:0 8px 32px rgba(0,0,0,.06);-moz-box-shadow:0 8px 32px rgba(0,0,0,.06);box-shadow:0 8px 32px rgba(0,0,0,.06)}.header-content.jsx-5843053c2e31bfce{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;max-width:1400px;margin:0 auto}.title.jsx-5843053c2e31bfce{font-size:2.25rem;font-weight:900;background:-webkit-linear-gradient(315deg,#1f2937 0%,#4b5563 100%);background:-moz-linear-gradient(315deg,#1f2937 0%,#4b5563 100%);background:-o-linear-gradient(315deg,#1f2937 0%,#4b5563 100%);background:linear-gradient(135deg,#1f2937 0%,#4b5563 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;margin:0;letter-spacing:-.02em}.section-container.jsx-5843053c2e31bfce{padding:2rem;max-width:1400px;margin:0 auto}"}),(0,t.jsxs)("div",{className:"jsx-5843053c2e31bfce admin-container",children:[t.jsx(d.Z,{projects:w,onCreateProject:()=>a.push("/dashboard")}),(0,t.jsxs)("div",{className:"jsx-5843053c2e31bfce main-content",children:[t.jsx("div",{className:"jsx-5843053c2e31bfce header",children:t.jsx("div",{className:"jsx-5843053c2e31bfce header-content",children:t.jsx("h1",{className:"jsx-5843053c2e31bfce title",children:"Admin Dashboard"})})}),(0,t.jsxs)("div",{className:"jsx-5843053c2e31bfce section-container",children:[t.jsx("div",{style:{marginBottom:"2rem",borderBottom:"1px solid #e5e7eb"},className:"jsx-5843053c2e31bfce",children:(0,t.jsxs)("nav",{style:{display:"flex",gap:"2rem"},className:"jsx-5843053c2e31bfce",children:[t.jsx("button",{onClick:()=>f("create-user"),style:{padding:"0.5rem 1rem",backgroundColor:"transparent",border:"none",borderBottom:"create-user"===l?"2px solid #3b82f6":"2px solid transparent",color:"create-user"===l?"#3b82f6":"#6b7280",fontWeight:"create-user"===l?"600":"400",cursor:"pointer"},className:"jsx-5843053c2e31bfce",children:"Create User"}),t.jsx("button",{onClick:()=>f("classes"),style:{padding:"0.5rem 1rem",backgroundColor:"transparent",border:"none",borderBottom:"classes"===l?"2px solid #3b82f6":"2px solid transparent",color:"classes"===l?"#3b82f6":"#6b7280",fontWeight:"classes"===l?"600":"400",cursor:"pointer"},className:"jsx-5843053c2e31bfce",children:"Classes"}),t.jsx("button",{onClick:()=>f("projects"),style:{padding:"0.5rem 1rem",backgroundColor:"transparent",border:"none",borderBottom:"projects"===l?"2px solid #3b82f6":"2px solid transparent",color:"projects"===l?"#3b82f6":"#6b7280",fontWeight:"projects"===l?"600":"400",cursor:"pointer"},className:"jsx-5843053c2e31bfce",children:"My Projects"})]})}),"create-user"===l&&(0,t.jsxs)("div",{className:"jsx-5843053c2e31bfce",children:[t.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"1rem"},className:"jsx-5843053c2e31bfce",children:"Create New User"}),(0,t.jsxs)("form",{onSubmit:eo,style:{maxWidth:"600px"},className:"jsx-5843053c2e31bfce",children:[(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},className:"jsx-5843053c2e31bfce",children:[(0,t.jsxs)("div",{className:"jsx-5843053c2e31bfce",children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},className:"jsx-5843053c2e31bfce",children:"Full Name *"}),t.jsx("input",{type:"text",value:g.name,onChange:e=>j({...g,name:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"1rem"},required:!0,className:"jsx-5843053c2e31bfce"})]}),(0,t.jsxs)("div",{className:"jsx-5843053c2e31bfce",children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},className:"jsx-5843053c2e31bfce",children:"Email *"}),t.jsx("input",{type:"email",value:g.email,onChange:e=>j({...g,email:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"1rem"},required:!0,className:"jsx-5843053c2e31bfce"})]})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1rem"},className:"jsx-5843053c2e31bfce",children:[(0,t.jsxs)("div",{className:"jsx-5843053c2e31bfce",children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},className:"jsx-5843053c2e31bfce",children:"Password *"}),t.jsx("input",{type:"password",value:g.password,onChange:e=>j({...g,password:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"1rem"},required:!0,minLength:8,className:"jsx-5843053c2e31bfce"})]}),(0,t.jsxs)("div",{className:"jsx-5843053c2e31bfce",children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},className:"jsx-5843053c2e31bfce",children:"Role"}),(0,t.jsxs)("select",{value:g.role,onChange:e=>j({...g,role:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"1rem"},className:"jsx-5843053c2e31bfce",children:[t.jsx("option",{value:"member",className:"jsx-5843053c2e31bfce",children:"Member"}),t.jsx("option",{value:"staff",className:"jsx-5843053c2e31bfce",children:"Staff"}),t.jsx("option",{value:"hr",className:"jsx-5843053c2e31bfce",children:"HR"}),t.jsx("option",{value:"instructor",className:"jsx-5843053c2e31bfce",children:"Instructor"})]})]})]}),(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem",marginBottom:"1.5rem"},className:"jsx-5843053c2e31bfce",children:[(0,t.jsxs)("div",{className:"jsx-5843053c2e31bfce",children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},className:"jsx-5843053c2e31bfce",children:"Position"}),t.jsx("input",{type:"text",value:g.position,onChange:e=>j({...g,position:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"1rem"},placeholder:"e.g. Project Manager",className:"jsx-5843053c2e31bfce"})]}),(0,t.jsxs)("div",{className:"jsx-5843053c2e31bfce",children:[t.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},className:"jsx-5843053c2e31bfce",children:"Phone Number"}),t.jsx("input",{type:"tel",value:g.phone,onChange:e=>j({...g,phone:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"1rem"},placeholder:"Optional",className:"jsx-5843053c2e31bfce"})]})]}),t.jsx("button",{type:"submit",disabled:h,style:{backgroundColor:h?"#9ca3af":"#3b82f6",color:"white",padding:"0.75rem 1.5rem",border:"none",borderRadius:"6px",fontSize:"1rem",fontWeight:"600",cursor:h?"not-allowed":"pointer"},className:"jsx-5843053c2e31bfce",children:h?"Creating User...":"Create User"}),_&&t.jsx("div",{style:{marginTop:"1rem",padding:"0.75rem",borderRadius:"6px",backgroundColor:_.includes("successfully")?"#d1fae5":"#fee2e2",color:_.includes("successfully")?"#065f46":"#991b1b",border:`1px solid ${_.includes("successfully")?"#10b981":"#ef4444"}`},className:"jsx-5843053c2e31bfce",children:_})]})]}),"classes"===l&&(0,t.jsxs)("div",{className:"jsx-5843053c2e31bfce",children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem"},className:"jsx-5843053c2e31bfce",children:[t.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600"},className:"jsx-5843053c2e31bfce",children:"Classes Management"}),t.jsx("div",{style:{display:"flex",alignItems:"center",gap:8},className:"jsx-5843053c2e31bfce",children:t.jsx("button",{onClick:es,disabled:Q,style:{backgroundColor:Q?"#9ca3af":"#0ea5e9",color:"white",padding:"0.5rem 0.9rem",border:"none",borderRadius:8,fontSize:"0.9rem",fontWeight:600,cursor:Q?"not-allowed":"pointer"},className:"jsx-5843053c2e31bfce",children:Q?"Syncing…":"Auto-assign Instructors"})})]}),Y&&t.jsx("div",{style:{marginBottom:"1rem",padding:"0.75rem",borderRadius:8,background:Y.toLowerCase().includes("error")?"#fee2e2":"#d1fae5",color:Y.toLowerCase().includes("error")?"#991b1b":"#065f46",border:`1px solid ${Y.toLowerCase().includes("error")?"#ef4444":"#10b981"}`},className:"jsx-5843053c2e31bfce",children:Y}),G?t.jsx("div",{style:{textAlign:"center",padding:"2rem"},className:"jsx-5843053c2e31bfce",children:"Loading classes..."}):0===M.length?(0,t.jsxs)("div",{style:{padding:"2rem",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0",textAlign:"center"},className:"jsx-5843053c2e31bfce",children:[t.jsx("p",{style:{color:"#64748b",marginBottom:"0.5rem"},className:"jsx-5843053c2e31bfce",children:"No classes found"}),t.jsx("p",{style:{color:"#94a3b8",fontSize:"0.875rem"},className:"jsx-5843053c2e31bfce",children:"Classes will appear here when they are created."})]}):t.jsx("div",{style:{display:"grid",gap:"1rem"},className:"jsx-5843053c2e31bfce",children:M.map(e=>(0,t.jsxs)("div",{style:{padding:"1.5rem",backgroundColor:"white",borderRadius:"8px",border:"1px solid #e2e8f0",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},className:"jsx-5843053c2e31bfce",children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},className:"jsx-5843053c2e31bfce",children:[(0,t.jsxs)("div",{style:{flex:1},className:"jsx-5843053c2e31bfce",children:[t.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#1f2937",marginBottom:"0.5rem"},className:"jsx-5843053c2e31bfce",children:e.class_title}),(0,t.jsxs)("p",{style:{color:"#6b7280",fontSize:"0.875rem",marginBottom:"0.5rem"},className:"jsx-5843053c2e31bfce",children:[e.class_type," • ",e.target_audience]}),(0,t.jsxs)("div",{style:{display:"flex",gap:"1rem",fontSize:"0.875rem",color:"#4b5563",marginBottom:"0.5rem"},className:"jsx-5843053c2e31bfce",children:[(0,t.jsxs)("span",{className:"jsx-5843053c2e31bfce",children:["Date: ",new Date(e.class_date).toLocaleDateString()]}),(0,t.jsxs)("span",{className:"jsx-5843053c2e31bfce",children:["Time: ",e.start_time," - ",e.end_time]}),(0,t.jsxs)("span",{className:"jsx-5843053c2e31bfce",children:["Location: ",e.location]})]}),(0,t.jsxs)("p",{style:{fontSize:"0.875rem",color:"#4b5563"},className:"jsx-5843053c2e31bfce",children:["Folder: ",e.folder_name]})]}),t.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},className:"jsx-5843053c2e31bfce",children:t.jsx("span",{style:{padding:"0.25rem 0.6rem",border:"1px solid #d1d5db",color:"#374151",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:500,background:"#ffffff"},className:"jsx-5843053c2e31bfce",children:e.status})})]}),(0,t.jsxs)("div",{style:{paddingTop:"1rem",borderTop:"1px solid #e5e7eb"},className:"jsx-5843053c2e31bfce",children:[(0,t.jsxs)("div",{style:{marginBottom:"1rem"},className:"jsx-5843053c2e31bfce",children:[t.jsx("p",{style:{fontSize:"0.875rem",color:"#4b5563",marginBottom:"0.5rem"},className:"jsx-5843053c2e31bfce",children:"Assigned Instructors:"}),X[e.id]?.length>0?t.jsx("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginBottom:"0.75rem"},className:"jsx-5843053c2e31bfce",children:X[e.id].map(s=>(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.375rem 0.75rem",backgroundColor:"#f3f4f6",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem"},className:"jsx-5843053c2e31bfce",children:[t.jsx("span",{style:{fontWeight:500},className:"jsx-5843053c2e31bfce",children:s.name}),t.jsx("button",{onClick:()=>ef(e.id,s.id),style:{background:"none",border:"none",color:"#ef4444",cursor:"pointer",fontSize:"0.75rem",padding:"0.125rem",lineHeight:1},title:"Remove instructor",className:"jsx-5843053c2e31bfce",children:"✕"})]},s.id))}):t.jsx("p",{style:{fontSize:"0.875rem",color:"#9ca3af",marginBottom:"0.75rem"},className:"jsx-5843053c2e31bfce",children:"No instructors assigned"}),(0,t.jsxs)("p",{style:{fontSize:"0.875rem",color:"#6b7280"},className:"jsx-5843053c2e31bfce",children:["Participants: ",e.current_participants,"/",e.max_participants]})]}),t.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},className:"jsx-5843053c2e31bfce",children:(0,t.jsxs)("select",{onChange:s=>s.target.value&&em(e.id,parseInt(s.target.value)),disabled:J===e.id,style:{padding:"0.5rem",border:"1px solid #d1d5db",borderRadius:"6px",fontSize:"0.875rem",backgroundColor:"white",cursor:J===e.id?"not-allowed":"pointer",opacity:J===e.id?.5:1},className:"jsx-5843053c2e31bfce",children:[t.jsx("option",{value:"",className:"jsx-5843053c2e31bfce",children:J===e.id?"Assigning...":"Add Instructor"}),L.map(e=>(0,t.jsxs)("option",{value:e.id,className:"jsx-5843053c2e31bfce",children:[e.name," (",e.email,")"]},e.id))]})})]})]},e.id))})]}),"projects"===l&&(0,t.jsxs)("div",{className:"jsx-5843053c2e31bfce",children:[t.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"1rem"},className:"jsx-5843053c2e31bfce",children:"My Assigned Projects"}),0===u.length?t.jsx("div",{style:{padding:"2rem",backgroundColor:"#f8fafc",borderRadius:"8px",border:"1px solid #e2e8f0",textAlign:"center"},className:"jsx-5843053c2e31bfce",children:t.jsx("p",{style:{color:"#6b7280"},className:"jsx-5843053c2e31bfce",children:"No projects assigned to you as admin."})}):t.jsx("div",{style:{display:"grid",gap:"1rem"},className:"jsx-5843053c2e31bfce",children:u.map(e=>(0,t.jsxs)("div",{style:{padding:"1.5rem",backgroundColor:"#ffffff",borderRadius:"8px",border:"1px solid #e2e8f0",boxShadow:"0 1px 3px 0 rgb(0 0 0 / 0.1)"},className:"jsx-5843053c2e31bfce",children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem"},className:"jsx-5843053c2e31bfce",children:[t.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:"600",marginBottom:"0.5rem"},className:"jsx-5843053c2e31bfce",children:e.project_name}),(e.can_manage_project||e.can_create_users||e.can_edit_users)&&t.jsx("button",{onClick:()=>er(e),style:{background:"linear-gradient(135deg, #5884FD, #8BA4FE)",color:"white",padding:"0.45rem 0.8rem",border:"none",borderRadius:8,fontSize:"0.9rem",fontWeight:600,cursor:"pointer"},className:"jsx-5843053c2e31bfce",children:"Edit Members"})]}),(0,t.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem"},className:"jsx-5843053c2e31bfce",children:[e.can_create_users&&t.jsx("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#d1fae5",color:"#065f46",borderRadius:"4px",fontSize:"0.875rem"},className:"jsx-5843053c2e31bfce",children:"Create Users"}),e.can_edit_users&&t.jsx("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#dbeafe",color:"#1e40af",borderRadius:"4px",fontSize:"0.875rem"},className:"jsx-5843053c2e31bfce",children:"Edit Users"}),e.can_manage_project&&t.jsx("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#f3e8ff",color:"#7c3aed",borderRadius:"4px",fontSize:"0.875rem"},className:"jsx-5843053c2e31bfce",children:"Manage Project"}),e.can_view_reports&&t.jsx("span",{style:{padding:"0.25rem 0.5rem",backgroundColor:"#fef3cd",color:"#92400e",borderRadius:"4px",fontSize:"0.875rem"},className:"jsx-5843053c2e31bfce",children:"View Reports"})]})]},e.project_id))})]}),v&&C&&t.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},className:"jsx-5843053c2e31bfce modal-overlay",children:(0,t.jsxs)("div",{style:{background:"#fff",width:"100%",maxWidth:720,borderRadius:16,border:"1px solid #E5E7EB",boxShadow:"0 10px 25px rgba(0,0,0,0.15)",overflow:"hidden"},className:"jsx-5843053c2e31bfce modal-content",children:[(0,t.jsxs)("div",{style:{padding:"1rem 1.25rem",borderBottom:"1px solid #E5E7EB",background:"#F9FAFB",display:"flex",alignItems:"center",justifyContent:"space-between"},className:"jsx-5843053c2e31bfce modal-header",children:[(0,t.jsxs)("h3",{style:{margin:0,fontWeight:700},className:"jsx-5843053c2e31bfce",children:["Edit Members — ",C.project_name]}),t.jsx("button",{onClick:()=>k(!1),style:{border:"none",background:"transparent",fontSize:18,cursor:"pointer"},className:"jsx-5843053c2e31bfce",children:"✕"})]}),t.jsx("div",{style:{padding:"1rem 1.25rem"},className:"jsx-5843053c2e31bfce modal-body",children:(0,t.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"1rem"},className:"jsx-5843053c2e31bfce",children:[(0,t.jsxs)("div",{className:"jsx-5843053c2e31bfce",children:[t.jsx("label",{style:{display:"block",marginBottom:6,fontWeight:600},className:"jsx-5843053c2e31bfce",children:"Add existing user"}),t.jsx("div",{style:{display:"flex",gap:8},className:"jsx-5843053c2e31bfce",children:t.jsx("input",{type:"text",placeholder:"Search by name or email",value:D,onChange:e=>ea(e.target.value),style:{flex:1,padding:"0.6rem 0.8rem",border:"1px solid #D1D5DB",borderRadius:8},className:"jsx-5843053c2e31bfce"})}),q.length>0&&t.jsx("div",{style:{marginTop:8,border:"1px solid #E5E7EB",borderRadius:8,overflow:"hidden"},className:"jsx-5843053c2e31bfce",children:q.map(e=>(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.6rem 0.8rem",background:"#fff"},className:"jsx-5843053c2e31bfce",children:[(0,t.jsxs)("div",{className:"jsx-5843053c2e31bfce",children:[t.jsx("div",{style:{fontWeight:600},className:"jsx-5843053c2e31bfce",children:e.name||"Unnamed"}),t.jsx("div",{style:{fontSize:12,color:"#6B7280"},className:"jsx-5843053c2e31bfce",children:e.email})]}),t.jsx("button",{disabled:W,onClick:()=>ei(e.id),style:{background:"linear-gradient(135deg, #10B981, #34D399)",color:"#fff",border:"none",borderRadius:8,padding:"0.4rem 0.7rem",cursor:"pointer"},className:"jsx-5843053c2e31bfce",children:W?"Adding...":"Add to project"})]},e.id))})]}),(0,t.jsxs)("div",{className:"jsx-5843053c2e31bfce",children:[(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:6},className:"jsx-5843053c2e31bfce",children:[t.jsx("label",{style:{fontWeight:700},className:"jsx-5843053c2e31bfce",children:"Current members"}),(0,t.jsxs)("span",{style:{color:"#6B7280",fontSize:12},className:"jsx-5843053c2e31bfce",children:[z.length," total"]})]}),t.jsx("div",{style:{border:"1px solid #E5E7EB",borderRadius:8},className:"jsx-5843053c2e31bfce",children:B?t.jsx("div",{style:{padding:12},className:"jsx-5843053c2e31bfce",children:"Loading members..."}):0===z.length?t.jsx("div",{style:{padding:12,color:"#6B7280"},className:"jsx-5843053c2e31bfce",children:"No members yet."}):z.map(e=>(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0.6rem 0.8rem",background:"#fff",borderBottom:"1px solid #F3F4F6"},className:"jsx-5843053c2e31bfce",children:[(0,t.jsxs)("div",{className:"jsx-5843053c2e31bfce",children:[t.jsx("div",{style:{fontWeight:600},className:"jsx-5843053c2e31bfce",children:e.auth_user?.name||"Unnamed"}),t.jsx("div",{style:{fontSize:12,color:"#6B7280"},className:"jsx-5843053c2e31bfce",children:e.auth_user?.email})]}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:8},className:"jsx-5843053c2e31bfce",children:[t.jsx("span",{style:{fontSize:12,color:"#374151",background:"#F3F4F6",border:"1px solid #E5E7EB",borderRadius:999,padding:"0.2rem 0.6rem"},className:"jsx-5843053c2e31bfce",children:e.role||"member"}),t.jsx("button",{onClick:()=>ec(e.user_id),style:{background:"#EF4444",color:"#fff",border:"none",borderRadius:8,padding:"0.4rem 0.7rem",cursor:"pointer"},className:"jsx-5843053c2e31bfce",children:"Remove"})]})]},e.user_id))})]}),F&&t.jsx("div",{style:{padding:"0.6rem 0.8rem",borderRadius:8,background:F.toLowerCase().includes("error")?"#fee2e2":"#d1fae5",color:F.toLowerCase().includes("error")?"#991b1b":"#065f46",border:`1px solid ${F.toLowerCase().includes("error")?"#ef4444":"#10b981"}`},className:"jsx-5843053c2e31bfce",children:F})]})})]})})]})]})]})]})}},881:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>c,__esModule:()=>i,default:()=>n});var t=r(5153);let a=(0,t.createProxy)(String.raw`/Users/swumpyaesone/Documents/project_management/frontend/src/app/admin/page.tsx`),{__esModule:i,$$typeof:c}=a,o=a.default,n=o}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[3271,1816,1323,7490,5446,8297,6097],()=>r(2734));module.exports=t})();