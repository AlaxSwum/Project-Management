(()=>{var e={};e.id=8322,e.ids=[8322],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},1017:e=>{"use strict";e.exports=require("path")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},2914:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var t=r(7096),i=r(6132),n=r(7284),l=r.n(n),a=r(2564),o={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>a[e]);r.d(s,o);let d=["",{children:["debug-drive",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,3907)),"/Users/swumpyaesone/Documents/project_management/frontend/src/app/debug-drive/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,2540)),"/Users/swumpyaesone/Documents/project_management/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/swumpyaesone/Documents/project_management/frontend/src/app/debug-drive/page.tsx"],u="/debug-drive/page",h={require:r,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/debug-drive/page",pathname:"/debug-drive",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},6381:(e,s,r)=>{Promise.resolve().then(r.bind(r,6143))},6143:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>n});var t=r(3854),i=r(4218);function n(){let[e,s]=(0,i.useState)(null),[r,n]=(0,i.useState)(null),[l,a]=(0,i.useState)(null),[o,d]=(0,i.useState)(!1),c=async()=>{d(!0);try{let e=await fetch("/api/google-drive-proxy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"testAuth"})}),r=await e.json();s(r),console.log("\uD83D\uDD0D Test Auth Result:",r)}catch(e){console.error("❌ Test Auth Error:",e),s({error:e instanceof Error?e.message:String(e)})}finally{d(!1)}},u=async()=>{d(!0);try{let e=await fetch("/api/google-drive-proxy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"listFiles",folderId:"root"})}),s=await e.json();n(s),console.log("\uD83D\uDD0D List Files Result:",s)}catch(e){console.error("❌ List Files Error:",e),n({error:e instanceof Error?e.message:String(e)})}finally{d(!1)}},h=async()=>{d(!0);try{let e=await fetch("/api/google-drive-proxy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"listSharedDrives"})}),s=await e.json();a(s),console.log("\uD83D\uDD0D Shared Drives Result:",s)}catch(e){console.error("❌ Shared Drives Error:",e),a({error:e instanceof Error?e.message:String(e)})}finally{d(!1)}};return t.jsx("div",{className:"min-h-screen p-8 bg-gray-50",children:t.jsx("div",{className:"max-w-4xl mx-auto",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-8",children:"\uD83D\uDD0D Google Drive API Debug"}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"p-6 bg-blue-50 rounded-lg",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Test Authentication"}),t.jsx("button",{onClick:c,disabled:o,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:o?"Testing...":"Test Service Account Auth"}),e&&(0,t.jsxs)("div",{className:"mt-4 p-4 bg-white rounded border",children:[t.jsx("h3",{className:"font-semibold mb-2",children:"Auth Test Result:"}),t.jsx("pre",{className:"text-sm overflow-auto",children:JSON.stringify(e,null,2)})]})]}),(0,t.jsxs)("div",{className:"p-6 bg-green-50 rounded-lg",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Test List Files"}),t.jsx("button",{onClick:u,disabled:o,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:o?"Testing...":"Test List Root Files"}),r&&(0,t.jsxs)("div",{className:"mt-4 p-4 bg-white rounded border",children:[t.jsx("h3",{className:"font-semibold mb-2",children:"List Files Result:"}),t.jsx("pre",{className:"text-sm overflow-auto",children:JSON.stringify(r,null,2)})]})]}),(0,t.jsxs)("div",{className:"p-6 bg-purple-50 rounded-lg",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Test List Shared Drives"}),t.jsx("button",{onClick:h,disabled:o,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:opacity-50",children:o?"Testing...":"List Available Shared Drives"}),l&&(0,t.jsxs)("div",{className:"mt-4 p-4 bg-white rounded border",children:[t.jsx("h3",{className:"font-semibold mb-2",children:"Shared Drives Result:"}),t.jsx("pre",{className:"text-sm overflow-auto",children:JSON.stringify(l,null,2)}),l.drives&&l.drives.length>0&&(0,t.jsxs)("div",{className:"mt-2 text-green-600",children:["✅ Found ",l.drives.length," shared drive(s) - uploads should work in these!"]}),l.drives&&0===l.drives.length&&t.jsx("div",{className:"mt-2 text-red-600",children:"❌ No shared drives found - you need to create shared drives for uploads to work"})]})]}),(0,t.jsxs)("div",{className:"p-6 bg-red-50 border-l-4 border-red-400 rounded-lg",children:[t.jsx("h2",{className:"text-xl font-semibold text-red-800 mb-4",children:"⚠️ Upload Issue Identified"}),(0,t.jsxs)("div",{className:"text-sm text-red-700 space-y-3",children:[(0,t.jsxs)("p",{children:[t.jsx("strong",{children:"Problem:"}),' "Internal Server Error" when uploading files']}),(0,t.jsxs)("p",{children:[t.jsx("strong",{children:"Root Cause:"})," Service accounts cannot upload to regular Google Drive folders due to storage quota limitations"]}),(0,t.jsxs)("div",{className:"bg-red-100 p-3 rounded border",children:[t.jsx("p",{children:t.jsx("strong",{children:"Google API Error:"})}),t.jsx("code",{className:"text-xs",children:"Service Accounts do not have storage quota. Use shared drives instead."})]})]})]}),(0,t.jsxs)("div",{className:"p-6 bg-green-50 border-l-4 border-green-400 rounded-lg",children:[t.jsx("h2",{className:"text-xl font-semibold text-green-800 mb-4",children:"✅ Solution: Use Google Shared Drives"}),(0,t.jsxs)("div",{className:"text-sm text-green-700 space-y-3",children:[t.jsx("p",{children:t.jsx("strong",{children:"Service Account Email:"})}),t.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-gray-900",children:"projectmanagement@projectmanagement-463423.iam.gserviceaccount.com"}),t.jsx("p",{className:"mt-4",children:t.jsx("strong",{children:"Step-by-Step Fix:"})}),(0,t.jsxs)("ol",{className:"list-decimal list-inside space-y-2",children:[(0,t.jsxs)("li",{children:[t.jsx("strong",{children:"Create a Shared Drive:"}),(0,t.jsxs)("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[(0,t.jsxs)("li",{children:["Go to ",t.jsx("a",{href:"https://drive.google.com",target:"_blank",className:"text-blue-600 underline",children:"Google Drive"})]}),t.jsx("li",{children:'Click "New" → "Shared drive"'}),t.jsx("li",{children:'Name it (e.g., "Project Management Files")'}),t.jsx("li",{children:'Click "Create"'})]})]}),(0,t.jsxs)("li",{children:[t.jsx("strong",{children:"Add Service Account to Shared Drive:"}),(0,t.jsxs)("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[t.jsx("li",{children:"Open your new shared drive"}),t.jsx("li",{children:'Right-click → "Manage members"'}),t.jsx("li",{children:'Click "Add members"'}),(0,t.jsxs)("li",{children:["Add: ",t.jsx("code",{className:"bg-gray-100 px-1 rounded",children:"projectmanagement@projectmanagement-463423.iam.gserviceaccount.com"})]}),(0,t.jsxs)("li",{children:["Set permission to ",t.jsx("strong",{children:'"Manager"'})," or ",t.jsx("strong",{children:'"Content manager"'})]}),t.jsx("li",{children:'Click "Send"'})]})]}),(0,t.jsxs)("li",{children:[t.jsx("strong",{children:"Create Folders in Shared Drive:"}),(0,t.jsxs)("ul",{className:"list-disc list-inside ml-4 mt-1 space-y-1",children:[t.jsx("li",{children:'Create folders like "Operations", "Marketing", etc. inside the shared drive'}),t.jsx("li",{children:"These folders will now support file uploads from the service account"})]})]}),(0,t.jsxs)("li",{children:[t.jsx("strong",{children:"Test:"}),' Use the "List Available Shared Drives" button above to verify setup']})]}),(0,t.jsxs)("div",{className:"bg-green-100 p-3 rounded border mt-4",children:[t.jsx("p",{children:t.jsx("strong",{children:"\uD83D\uDCA1 Why This Works:"})}),t.jsx("p",{className:"text-xs",children:"Shared drives have their own storage quota and allow service accounts to upload files, unlike regular Google Drive folders which are tied to individual user accounts."})]})]})]}),(0,t.jsxs)("div",{className:"p-6 bg-yellow-50 rounded-lg",children:[t.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"\uD83D\uDCC2 For File Browsing (Already Working)"}),(0,t.jsxs)("div",{className:"text-sm text-gray-700 space-y-2",children:[t.jsx("p",{children:t.jsx("strong",{children:"To share regular folders for browsing only:"})}),(0,t.jsxs)("ol",{className:"list-decimal list-inside space-y-1",children:[t.jsx("li",{children:"Share your Google Drive folders with the service account email above"}),t.jsx("li",{children:'Set permission to "Editor" when sharing'}),t.jsx("li",{children:"The service account can see and list these folders (but cannot upload to them)"})]})]})]})]})]})})})}},3907:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>l,__esModule:()=>n,default:()=>o});var t=r(5153);let i=(0,t.createProxy)(String.raw`/Users/swumpyaesone/Documents/project_management/frontend/src/app/debug-drive/page.tsx`),{__esModule:n,$$typeof:l}=i,a=i.default,o=a},3881:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>i});var t=r(8531);let i=e=>{let s=(0,t.fillMetadataSegment)(".",e.params,"favicon.ico");return[{type:"image/x-icon",sizes:"16x16",url:s+""}]}}};var s=require("../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[3271,1816,1323,8297],()=>r(2914));module.exports=t})();