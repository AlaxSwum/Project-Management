(()=>{var e={};e.id=6840,e.ids=[6840],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1808:e=>{"use strict";e.exports=require("net")},1017:e=>{"use strict";e.exports=require("path")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},4404:e=>{"use strict";e.exports=require("tls")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},3693:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>s.a,__next_app__:()=>x,originalPathname:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>l});var i=t(7096),n=t(6132),o=t(7284),s=t.n(o),a=t(2564),d={};for(let e in a)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>a[e]);t.d(r,d);let l=["",{children:["inbox",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8923)),"/Users/swumpyaesone/Documents/project_management/frontend/src/app/inbox/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,2540)),"/Users/swumpyaesone/Documents/project_management/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/swumpyaesone/Documents/project_management/frontend/src/app/inbox/page.tsx"],p="/inbox/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new i.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/inbox/page",pathname:"/inbox",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},171:(e,r,t)=>{Promise.resolve().then(t.bind(t,5427))},5427:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>f});var i=t(3854),n=t(4218),o=t(1018),s=t(6837),a=t(900),d=t(199),l=t(529),c=t(2075),p=t(3768),x=t(1843),u=t(9077);function f(){let{user:e,isAuthenticated:r,isLoading:f}=(0,s.useAuth)(),m=(0,o.useRouter)(),[g,h]=(0,n.useState)([]),[b,y]=(0,n.useState)(!0),[j,v]=(0,n.useState)(""),[w,_]=(0,n.useState)("all");(0,n.useEffect)(()=>{if(!f){if(!r){m.push("/login");return}k()}},[r,f,m,e]);let k=async()=>{if(e?.id)try{y(!0);let r=(await Promise.resolve().then(t.bind(t,2132))).supabase,{data:i,error:n}=await r.from("notifications").select("*").eq("recipient_id",e.id).order("created_at",{ascending:!1});if(n)throw n;h(i||[])}catch(e){console.error("Error fetching notifications:",e),v("Failed to load notifications")}finally{y(!1)}},S=async e=>{try{let r=(await Promise.resolve().then(t.bind(t,2132))).supabase,{error:i}=await r.from("notifications").update({is_read:!0}).eq("id",e);if(i)throw i;h(g.map(r=>r.id===e?{...r,is_read:!0}:r))}catch(e){console.error("Error marking notification as read:",e)}},F=async()=>{try{let e=(await Promise.resolve().then(t.bind(t,2132))).supabase,r=g.filter(e=>!e.is_read).map(e=>e.id);if(0===r.length)return;let{error:i}=await e.from("notifications").update({is_read:!0}).in("id",r);if(i)throw i;h(g.map(e=>({...e,is_read:!0})))}catch(e){console.error("Error marking all notifications as read:",e)}},q=e=>{switch(e){case"leave_request_submitted":return i.jsx(a.Z,{style:{width:"20px",height:"20px",color:"#FFB333"}});case"leave_request_approved":return i.jsx(d.Z,{style:{width:"20px",height:"20px",color:"#10b981"}});case"leave_request_rejected":return i.jsx(l.Z,{style:{width:"20px",height:"20px",color:"#F87239"}});default:return i.jsx(c.Z,{style:{width:"20px",height:"20px",color:"#C483D9"}})}},P=e=>{let r=new Date(e),t=new Date,i=(t.getTime()-r.getTime())/36e5;return i<1?"Just now":i<24?`${Math.floor(i)}h ago`:i<48?"Yesterday":r.toLocaleDateString()},C="unread"===w?g.filter(e=>!e.is_read):g;return f||b?(0,i.jsxs)("div",{style:{display:"flex",minHeight:"100vh",background:"#F5F5ED"},children:[i.jsx(u.Z,{projects:[],onCreateProject:()=>{}}),i.jsx("div",{style:{marginLeft:"256px",padding:"2rem",background:"#F5F5ED",flex:1,display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:i.jsx("div",{style:{width:"32px",height:"32px",border:"3px solid #C483D9",borderTop:"3px solid #5884FD",borderRadius:"50%",animation:"spin 1s linear infinite"}})})]}):r?(0,i.jsxs)(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `}}),(0,i.jsxs)("div",{style:{display:"flex",minHeight:"100vh",background:"#F5F5ED"},children:[i.jsx(u.Z,{projects:[],onCreateProject:()=>{}}),(0,i.jsxs)("div",{style:{marginLeft:"256px",padding:"2rem",background:"#F5F5ED",flex:1,minHeight:"100vh"},children:[i.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"3rem",paddingBottom:"1.5rem"},children:(0,i.jsxs)("div",{children:[i.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"300",margin:"0",color:"#1a1a1a",letterSpacing:"-0.02em"},children:"Inbox"}),i.jsx("p",{style:{fontSize:"1.1rem",color:"#666666",margin:"0.5rem 0 0 0",lineHeight:"1.5"},children:"Notifications and important updates"})]})}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"1.5rem",marginBottom:"3rem"},children:[(0,i.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"2rem",textAlign:"center",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[i.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"300",color:"#5884FD",marginBottom:"0.5rem"},children:g.length}),i.jsx("div",{style:{color:"#666666",fontSize:"0.9rem",fontWeight:"500"},children:"Total Notifications"})]}),(0,i.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"2rem",textAlign:"center",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[i.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"300",color:"#FFB333",marginBottom:"0.5rem"},children:g.filter(e=>!e.is_read).length}),i.jsx("div",{style:{color:"#666666",fontSize:"0.9rem",fontWeight:"500"},children:"Unread"})]}),(0,i.jsxs)("div",{style:{background:"rgba(255, 255, 255, 0.9)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"16px",padding:"2rem",textAlign:"center",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)"},children:[i.jsx("div",{style:{fontSize:"2.5rem",fontWeight:"300",color:"#10b981",marginBottom:"0.5rem"},children:g.filter(e=>e.is_read).length}),i.jsx("div",{style:{color:"#666666",fontSize:"0.9rem",fontWeight:"500"},children:"Read"})]})]}),i.jsx("div",{style:{background:"#ffffff",border:"1px solid #e8e8e8",borderRadius:"16px",padding:"2rem",marginBottom:"2rem",boxShadow:"0 2px 16px rgba(0, 0, 0, 0.04)"},children:(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"1rem"},children:[(0,i.jsxs)("div",{style:{display:"flex",gap:"0.75rem"},children:[(0,i.jsxs)("button",{onClick:()=>_("all"),style:{padding:"0.75rem 1.5rem",background:"all"===w?"#5884FD":"#ffffff",color:"all"===w?"#ffffff":"#666666",border:"1px solid #e0e0e0",borderRadius:"12px",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"all"===w?"0 4px 12px rgba(88, 132, 253, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.1)"},children:["All (",g.length,")"]}),(0,i.jsxs)("button",{onClick:()=>_("unread"),style:{padding:"0.75rem 1.5rem",background:"unread"===w?"#5884FD":"#ffffff",color:"unread"===w?"#ffffff":"#666666",border:"1px solid #e0e0e0",borderRadius:"12px",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"unread"===w?"0 4px 12px rgba(88, 132, 253, 0.3)":"0 2px 8px rgba(0, 0, 0, 0.1)"},children:["Unread (",g.filter(e=>!e.is_read).length,")"]})]}),g.some(e=>!e.is_read)&&i.jsx("button",{onClick:F,style:{padding:"0.75rem 1.5rem",background:"#FFB333",color:"#ffffff",border:"none",borderRadius:"12px",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(255, 179, 51, 0.3)"},children:"Mark All as Read"})]})}),j&&i.jsx("div",{style:{background:"#ffffff",border:"1px solid #F87239",borderRadius:"12px",padding:"1rem",marginBottom:"2rem",color:"#F87239",fontWeight:"500",boxShadow:"0 2px 8px rgba(248, 114, 57, 0.1)"},children:j}),i.jsx("div",{style:{background:"#ffffff",border:"1px solid #e8e8e8",borderRadius:"16px",overflow:"hidden",boxShadow:"0 2px 16px rgba(0, 0, 0, 0.04)"},children:0===C.length?(0,i.jsxs)("div",{style:{textAlign:"center",padding:"4rem 2rem",color:"#999999"},children:[i.jsx("div",{style:{width:"64px",height:"64px",background:"#f0f0f0",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 2rem"},children:i.jsx(p.Z,{style:{width:"32px",height:"32px",color:"#999999"}})}),i.jsx("h3",{style:{fontSize:"1.5rem",fontWeight:"400",margin:"0 0 1rem 0",color:"#1a1a1a",letterSpacing:"-0.01em"},children:"unread"===w?"No Unread Notifications":"No Notifications"}),i.jsx("p",{style:{fontSize:"1.1rem",margin:"0",lineHeight:"1.5"},children:"unread"===w?"All caught up! No unread notifications at the moment.":"Your inbox is empty. Notifications will appear here when you have updates."})]}):i.jsx("div",{style:{padding:"1.5rem"},children:C.map(e=>(0,i.jsxs)("div",{onClick:()=>!e.is_read&&S(e.id),style:{display:"flex",alignItems:"flex-start",gap:"1.5rem",padding:"1.5rem",marginBottom:"1rem",background:e.is_read?"#ffffff":"#f8fafc",border:`1px solid ${e.is_read?"#e8e8e8":"#5884FD"}`,borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.04)"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 16px rgba(0, 0, 0, 0.1)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 2px 8px rgba(0, 0, 0, 0.04)"},children:[i.jsx("div",{style:{width:"48px",height:"48px",background:"#f0f0f0",borderRadius:"12px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},children:q(e.type)}),(0,i.jsxs)("div",{style:{flex:1,minWidth:0},children:[i.jsx("div",{style:{fontSize:"1.1rem",fontWeight:"500",color:"#1a1a1a",marginBottom:"0.5rem",lineHeight:"1.4"},children:e.title}),i.jsx("div",{style:{fontSize:"0.95rem",color:"#666666",lineHeight:"1.5",marginBottom:"1rem"},children:e.message}),(0,i.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",fontSize:"0.85rem",color:"#999999"},children:[i.jsx("span",{children:P(e.created_at)}),!e.is_read&&i.jsx("button",{onClick:r=>{r.stopPropagation(),S(e.id)},style:{background:"transparent",border:"none",color:"#5884FD",cursor:"pointer",padding:"0.25rem",borderRadius:"6px",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"0.25rem"},title:"Mark as read",children:i.jsx(x.Z,{style:{width:"16px",height:"16px"}})})]})]})]},e.id))})})]})]})]}):null}},8923:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>s,__esModule:()=>o,default:()=>d});var i=t(5153);let n=(0,i.createProxy)(String.raw`/Users/swumpyaesone/Documents/project_management/frontend/src/app/inbox/page.tsx`),{__esModule:o,$$typeof:s}=n,a=n.default,d=a},1843:(e,r,t)=>{"use strict";t.d(r,{Z:()=>o});var i=t(4218);let n=i.forwardRef(function({title:e,titleId:r,...t},n){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":r},t),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}),o=n},529:(e,r,t)=>{"use strict";t.d(r,{Z:()=>o});var i=t(4218);let n=i.forwardRef(function({title:e,titleId:r,...t},n){return i.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":r},t),e?i.createElement("title",{id:r},e):null,i.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}),o=n}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[3271,1816,1323,7490,5446,8297,6097],()=>t(3693));module.exports=i})();