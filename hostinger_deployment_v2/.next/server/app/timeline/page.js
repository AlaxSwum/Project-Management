(()=>{var e={};e.id=8571,e.ids=[8571],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1017:e=>{"use strict";e.exports=require("path")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},8718:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>c,pages:()=>p,routeModule:()=>g,tree:()=>a});var r=i(7096),n=i(6132),o=i(7284),l=i.n(o),d=i(2564),s={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(s[e]=()=>d[e]);i.d(t,s);let a=["",{children:["timeline",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,7797)),"/Users/swumpyaesone/Documents/project_management/hostinger_deployment_v2/src/app/timeline/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(i.bind(i,6188)),"/Users/swumpyaesone/Documents/project_management/hostinger_deployment_v2/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],p=["/Users/swumpyaesone/Documents/project_management/hostinger_deployment_v2/src/app/timeline/page.tsx"],c="/timeline/page",x={require:i,loadChunk:()=>Promise.resolve()},g=new r.AppPageRouteModule({definition:{kind:n.x.APP_PAGE,page:"/timeline/page",pathname:"/timeline",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:a}})},7019:(e,t,i)=>{Promise.resolve().then(i.bind(i,8606))},8606:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>u});var r=i(3854),n=i(4218),o=i(1018),l=i(6837),d=i(7801),s=i(4358),a=i(8998),p=i(789),c=i(7689),x=i(2769),g=i(30),h=i(8041);let m=(0,d.eI)(process.env.NEXT_PUBLIC_SUPABASE_URL,process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY);function u(){let{user:e,isAuthenticated:t,isLoading:i}=(0,l.useAuth)(),d=(0,o.useRouter)(),[u,y]=(0,n.useState)([]),[f,b]=(0,n.useState)(null),[j,_]=(0,n.useState)([]),[v,B]=(0,n.useState)([]),[w,E]=(0,n.useState)([]),[k,S]=(0,n.useState)(!0),[D,C]=(0,n.useState)(""),[F,z]=(0,n.useState)(""),[A,W]=(0,n.useState)(!1),[R,I]=(0,n.useState)("month"),[M,T]=(0,n.useState)(new Date),[P,q]=(0,n.useState)(!0),[L,$]=(0,n.useState)(!1),[Y,U]=(0,n.useState)(!1),[N,Z]=(0,n.useState)(!1),[H,O]=(0,n.useState)(!1),[G,X]=(0,n.useState)(!1),[V,K]=(0,n.useState)(!1),[Q,J]=(0,n.useState)({name:"",description:"",start_date:"",end_date:"",total_budget:0,currency:"USD"}),[ee,et]=(0,n.useState)({name:"",description:"",color:"#3B82F6",responsible_person_id:0,parent_category_id:null}),[ei,er]=(0,n.useState)({title:"",description:"",category_id:0,start_date:"",end_date:"",phase:"Planning",status:"not_started",planned_budget:0,actual_spending:0,completion_percentage:0,priority:"medium",team_leader_id:0,team_member_ids:[],color:"#FFB333"}),[en,eo]=(0,n.useState)([]),[el,ed]=(0,n.useState)(""),[es,ea]=(0,n.useState)(null),[ep,ec]=(0,n.useState)(!1),[ex,eg]=(0,n.useState)(null),[eh,em]=(0,n.useState)([]),[eu,ey]=(0,n.useState)([]),[ef,eb]=(0,n.useState)(!1),[ej,e_]=(0,n.useState)(new Set),[ev,eB]=(0,n.useState)(["Planning","Design","Development","Testing","Launch","Maintenance"]);(0,n.useEffect)(()=>{let e=()=>W(window.innerWidth<768);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,n.useEffect)(()=>{if(!i){if(!t){d.push("/login");return}ek()}},[t,i,d]),(0,n.useEffect)(()=>{f&&(eS(),eD(),eC(),ew())},[f]);let ew=async()=>{if(f)try{let{data:e,error:t}=await m.from("timeline_folder_members").select("user_id").eq("folder_id",f.id);if(t)throw t;let i=e?.map(e=>e.user_id)||[];if(0===i.length){ey([]);return}let{data:r,error:n}=await m.from("auth_user").select("id, name, email").in("id",i).eq("is_active",!0).order("name",{ascending:!0});!n&&r&&ey(r)}catch(e){console.error("Error fetching team members:",e)}},eE=async e=>{ea(e);try{let{data:t,error:i}=await m.from("timeline_item_checklist").select("*").eq("timeline_item_id",e.id).order("item_order",{ascending:!0});!i&&t?em(t):em([])}catch(e){console.error("Error loading checklist:",e),em([])}eb(!0)},ek=async()=>{try{S(!0);let t=parseInt(e?.id?.toString()||"0"),{data:i,error:r}=await m.from("timeline_folder_members").select("folder_id").eq("user_id",t);if(r)throw r;let n=i?.map(e=>e.folder_id)||[],{data:o,error:l}=await m.from("timeline_folders").select("*").or(`created_by_id.eq.${t},id.in.(${n.join(",")||"0"})`).eq("is_active",!0).order("created_at",{ascending:!1});if(l)throw l;y(o||[]),o&&o.length>0&&!f&&b(o[0])}catch(e){console.error("Error fetching folders:",e),C("Failed to load timeline folders")}finally{S(!1)}},eS=async()=>{if(f)try{let{data:e,error:t}=await m.from("timeline_categories").select("*").eq("folder_id",f.id).eq("is_active",!0).order("display_order",{ascending:!0});if(t)throw t;let i=new Map,r=[];if((e||[]).forEach(e=>{i.set(e.id,{...e,subcategories:[]})}),(e||[]).forEach(e=>{let t=i.get(e.id);if(e.parent_category_id){let r=i.get(e.parent_category_id);r&&r.subcategories.push(t)}else r.push(t)}),_(r),e&&e.length>0&&0===ej.size){let t=new Set(e.map(e=>e.id));e_(t)}}catch(e){console.error("Error fetching categories:",e)}},eD=async()=>{if(f)try{let{data:e,error:t}=await m.from("timeline_items").select(`
          *,
          timeline_categories (name, color)
        `).eq("folder_id",f.id).neq("status","cancelled").order("start_date",{ascending:!0});if(t)throw t;let i=(e||[]).map(e=>({...e,category_name:e.timeline_categories?.name}));B(i)}catch(e){console.error("Error fetching timeline items:",e)}},eC=async()=>{if(f)try{let{data:e,error:t}=await m.from("timeline_folder_members").select("*").eq("folder_id",f.id);if(t)throw t;let i=await Promise.all((e||[]).map(async e=>{let{data:t}=await m.from("auth_user").select("id, name, email").eq("id",e.user_id).single();return{...e,user_name:t?.name||"Unknown",user_email:t?.email||""}}));E(i)}catch(e){console.error("Error fetching folder members:",e),E([])}},eF=async()=>{try{if(!Q.name.trim()){C("Folder name is required");return}let t={...Q,created_by_id:parseInt(e?.id?.toString()||"0"),is_active:!0},{data:i,error:r}=await m.from("timeline_folders").insert([t]).select().single();if(r)throw r;await m.from("timeline_folder_members").insert([{folder_id:i.id,user_id:parseInt(e?.id?.toString()||"0"),role:"owner",can_edit:!0,can_delete:!0,can_manage_members:!0,can_manage_budget:!0}]),y([i,...u]),b(i),$(!1),J({name:"",description:"",start_date:"",end_date:"",total_budget:0,currency:"USD"}),z("Timeline folder created successfully!"),setTimeout(()=>z(""),3e3)}catch(e){console.error("Error creating folder:",e),C("Failed to create folder")}},ez=async()=>{try{if(!f||!ee.name.trim()){C("Category name is required");return}let e=Math.max(...j.map(e=>e.display_order),0),t={folder_id:f.id,name:ee.name,description:ee.description,color:ee.color,responsible_person_id:ee.responsible_person_id||null,parent_category_id:ee.parent_category_id,display_order:e+1,is_active:!0},{data:i,error:r}=await m.from("timeline_categories").insert([t]).select().single();if(r)throw r;eS(),U(!1),et({name:"",description:"",color:"#3B82F6",responsible_person_id:0,parent_category_id:null}),z("Category created successfully!"),setTimeout(()=>z(""),3e3)}catch(e){console.error("Error creating category:",e),C("Failed to create category")}},eA=async()=>{try{if(!f||!ei.title.trim()){C("Title is required");return}let t=ei.description||"";if(en.length>0){let e="\n\nChecklist:\n"+en.map((e,t)=>`${t+1}. ${e}`).join("\n");t+=e}let i={folder_id:f.id,category_id:ei.category_id||null,title:ei.title,description:t,color:ei.color,start_date:ei.start_date,end_date:ei.end_date,phase:ei.phase,status:ei.status,planned_budget:ei.planned_budget,actual_spending:ei.actual_spending,completion_percentage:ei.completion_percentage,team_leader_id:ei.team_leader_id||null,team_member_ids:ei.team_member_ids.length>0?ei.team_member_ids:null,priority:ei.priority,created_by_id:parseInt(e?.id?.toString()||"0")},{data:r,error:n}=await m.from("timeline_items").insert([i]).select().single();if(n)throw n;if(en.length>0){let e=en.map((e,t)=>({timeline_item_id:r.id,item_text:e,is_completed:!1,item_order:t}));await m.from("timeline_item_checklist").insert(e)}eD(),Z(!1),eW(),z("Timeline item created successfully!"),setTimeout(()=>z(""),3e3)}catch(e){console.error("Error creating timeline item:",e),C("Failed to create timeline item")}},eW=()=>{er({title:"",description:"",category_id:0,start_date:"",end_date:"",phase:"Planning",status:"not_started",planned_budget:0,actual_spending:0,completion_percentage:0,priority:"medium",team_leader_id:0,team_member_ids:[],color:"#FFB333"}),eo([]),ed(""),ea(null),ec(!1)},eR=(e,t)=>{let i=new Date(e.start_date),r=new Date(e.end_date),n=0,o=1;if("day"===R){i.setHours(0,0,0,0),r.setHours(0,0,0,0),n=t.findIndex(e=>{let t=new Date(e.date);return t.setHours(0,0,0,0),t.getTime()===i.getTime()});let e=t.findIndex(e=>{let t=new Date(e.date);return t.setHours(0,0,0,0),t.getTime()===r.getTime()});-1!==n&&-1!==e?o=e-n+1:-1!==n?o=t.length-n:-1!==e&&(n=0,o=e+1)}else if("week"===R){n=t.findIndex(e=>{let t=new Date(e.date);return t.setDate(e.date.getDate()+6),i>=e.date&&i<=t});let e=t.findIndex(e=>{let t=new Date(e.date);return t.setDate(e.date.getDate()+6),r>=e.date&&r<=t});-1!==n&&-1!==e&&(o=e-n+1)}else if("month"===R){n=t.findIndex(e=>e.date.getMonth()===i.getMonth()&&e.date.getFullYear()===i.getFullYear());let e=t.findIndex(e=>e.date.getMonth()===r.getMonth()&&e.date.getFullYear()===r.getFullYear());-1!==n&&-1!==e&&(o=e-n+1)}else if("quarter"===R){n=t.findIndex(e=>{let t=Math.floor(i.getMonth()/3),r=Math.floor(e.date.getMonth()/3);return i.getFullYear()===e.date.getFullYear()&&t===r});let e=t.findIndex(e=>{let t=Math.floor(r.getMonth()/3),i=Math.floor(e.date.getMonth()/3);return r.getFullYear()===e.date.getFullYear()&&t===i});-1!==n&&-1!==e&&(o=e-n+1)}return{startCol:Math.max(0,n),spanCols:Math.max(1,o)}},eI=e=>({not_started:"#9CA3AF",in_progress:"#3B82F6",completed:"#10B981",on_hold:"#F59E0B",cancelled:"#EF4444",delayed:"#DC2626"})[e]||"#9CA3AF";if(i||k)return r.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",background:"white"},children:r.jsx("div",{style:{textAlign:"center"},children:r.jsx("p",{style:{color:"#6B7280",fontSize:"13px"},children:"Loading..."})})});let eM=(()=>{let e=[],t=new Date(M);if("day"===R){t.setHours(0,0,0,0);for(let i=0;i<30;i++){let r=new Date(t);r.setDate(t.getDate()+i),e.push({label:r.toLocaleDateString("en-US",{month:"short",day:"numeric"}),date:r})}}else if("week"===R){let i=new Date(t);i.setDate(t.getDate()-t.getDay());for(let t=0;t<12;t++){let r=new Date(i);r.setDate(i.getDate()+7*t);let n=new Date(r);n.setDate(r.getDate()+6),e.push({label:`${r.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${n.toLocaleDateString("en-US",{month:"short",day:"numeric"})}`,date:r})}}else if("month"===R){t.setDate(1);for(let i=0;i<6;i++){let r=new Date(t);r.setMonth(t.getMonth()+i),e.push({label:r.toLocaleDateString("en-US",{month:"short",year:"numeric"}),date:r})}}else if("quarter"===R){let i=new Date(t.getFullYear(),3*Math.floor(t.getMonth()/3),1);for(let t=0;t<8;t++){let r=new Date(i);r.setMonth(i.getMonth()+3*t);let n=Math.floor(r.getMonth()/3)+1;e.push({label:`Q${n} ${r.getFullYear()}`,date:r})}}return e})();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{flex:1,padding:A?"16px":"24px",maxWidth:"100%",overflow:"hidden"},children:[(0,r.jsxs)("div",{style:{marginBottom:"24px",borderBottom:"1px solid #E5E7EB",paddingBottom:"16px"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"16px",flexWrap:"wrap",gap:"12px"},children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{style:{fontSize:A?"20px":"24px",fontWeight:"600",color:"#111827",margin:"0 0 4px 0"},children:"Timeline & Roadmap"}),r.jsx("p",{style:{color:"#6B7280",margin:0,fontSize:"14px"},children:"Project timeline and task management"})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap"},children:[(0,r.jsxs)("button",{onClick:()=>$(!0),style:{padding:"8px 16px",background:"white",color:"#374151",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[r.jsx(s.Z,{style:{width:"16px",height:"16px"}}),"New Folder"]}),f&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{onClick:()=>U(!0),style:{padding:"8px 16px",background:"white",color:"#374151",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[r.jsx(a.Z,{style:{width:"16px",height:"16px"}}),"New Category"]}),(0,r.jsxs)("button",{onClick:()=>Z(!0),style:{padding:"8px 16px",background:"white",color:"#374151",border:"1px solid #D1D5DB",borderRadius:"4px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:[r.jsx(a.Z,{style:{width:"16px",height:"16px"}}),"New Item"]})]})]})]}),u.length>0&&(0,r.jsxs)("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",alignItems:"center",marginBottom:"16px",padding:"12px",background:"#F9FAFB",border:"1px solid #E5E7EB"},children:[r.jsx("select",{value:f?.id||"",onChange:e=>{let t=u.find(t=>t.id===parseInt(e.target.value));b(t||null)},style:{padding:"6px 12px",border:"1px solid #D1D5DB",fontSize:"13px",background:"white",minWidth:"200px"},children:u.map(e=>r.jsx("option",{value:e.id,children:e.name},e.id))}),(0,r.jsxs)("div",{style:{display:"flex",gap:"0",border:"1px solid #D1D5DB"},children:[r.jsx("button",{onClick:()=>I("day"),style:{padding:"6px 12px",background:"day"===R?"#E5E7EB":"white",color:"#374151",border:"none",borderRight:"1px solid #D1D5DB",cursor:"pointer",fontSize:"13px"},children:"Day"}),r.jsx("button",{onClick:()=>I("week"),style:{padding:"6px 12px",background:"week"===R?"#E5E7EB":"white",color:"#374151",border:"none",borderRight:"1px solid #D1D5DB",cursor:"pointer",fontSize:"13px"},children:"Week"}),r.jsx("button",{onClick:()=>I("month"),style:{padding:"6px 12px",background:"month"===R?"#E5E7EB":"white",color:"#374151",border:"none",borderRight:"1px solid #D1D5DB",cursor:"pointer",fontSize:"13px"},children:"Month"}),r.jsx("button",{onClick:()=>I("quarter"),style:{padding:"6px 12px",background:"quarter"===R?"#E5E7EB":"white",color:"#374151",border:"none",cursor:"pointer",fontSize:"13px"},children:"Quarter"})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"0",border:"1px solid #D1D5DB"},children:[r.jsx("button",{onClick:()=>{let e=new Date(M);"day"===R?e.setDate(e.getDate()-1):"week"===R?e.setDate(e.getDate()-7):"month"===R?e.setMonth(e.getMonth()-1):e.setMonth(e.getMonth()-3),T(e)},style:{padding:"6px 10px",background:"white",border:"none",borderRight:"1px solid #D1D5DB",cursor:"pointer"},children:r.jsx(p.Z,{style:{width:"16px",height:"16px",color:"#6B7280"}})}),r.jsx("button",{onClick:()=>T(new Date),style:{padding:"6px 12px",background:"white",border:"none",borderRight:"1px solid #D1D5DB",fontSize:"13px",cursor:"pointer",color:"#374151"},children:"Today"}),r.jsx("button",{onClick:()=>{let e=new Date(M);"day"===R?e.setDate(e.getDate()+1):"week"===R?e.setDate(e.getDate()+7):"month"===R?e.setMonth(e.getMonth()+1):e.setMonth(e.getMonth()+3),T(e)},style:{padding:"6px 10px",background:"white",border:"none",cursor:"pointer"},children:r.jsx(c.Z,{style:{width:"16px",height:"16px",color:"#6B7280"}})})]}),f&&(0,r.jsxs)("button",{onClick:()=>O(!0),style:{padding:"6px 12px",background:"white",color:"#374151",border:"1px solid #D1D5DB",fontSize:"13px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[r.jsx(x.Z,{style:{width:"14px",height:"14px"}}),"Team (",w.length,")"]}),(0,r.jsxs)("button",{onClick:()=>K(!0),style:{padding:"6px 12px",background:"white",color:"#374151",border:"1px solid #D1D5DB",fontSize:"13px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[r.jsx(g.Z,{style:{width:"14px",height:"14px"}}),"Reports"]})]})]}),D&&(0,r.jsxs)("div",{style:{padding:"12px",background:"#FAFAFA",color:"#374151",border:"1px solid #D1D5DB",marginBottom:"16px",fontSize:"13px"},children:[D,r.jsx("button",{onClick:()=>C(""),style:{float:"right",background:"none",border:"none",cursor:"pointer",color:"#6B7280"},children:"\xd7"})]}),F&&r.jsx("div",{style:{padding:"12px",background:"#FAFAFA",color:"#374151",border:"1px solid #D1D5DB",marginBottom:"16px",fontSize:"13px"},children:F}),f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{style:{display:"flex",gap:"24px",marginBottom:"16px",padding:"12px",background:"#F9FAFB",border:"1px solid #E5E7EB",flexWrap:"wrap"},children:[(0,r.jsxs)("div",{children:[r.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"2px",textTransform:"uppercase"},children:"Completion"}),(0,r.jsxs)("div",{style:{fontSize:"20px",fontWeight:"600",color:"#111827"},children:[Math.round(v.reduce((e,t)=>e+t.completion_percentage,0)/(v.length||1)),"%"]}),(0,r.jsxs)("div",{style:{fontSize:"11px",color:"#6B7280"},children:[v.filter(e=>"completed"===e.status).length,"/",v.length," tasks"]})]}),(0,r.jsxs)("div",{style:{borderLeft:"1px solid #E5E7EB",paddingLeft:"24px"},children:[r.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"2px",textTransform:"uppercase"},children:"Budget"}),(0,r.jsxs)("div",{style:{fontSize:"20px",fontWeight:"600",color:"#111827"},children:["$",v.reduce((e,t)=>e+t.actual_spending,0).toLocaleString()]}),(0,r.jsxs)("div",{style:{fontSize:"11px",color:"#6B7280"},children:["of $",v.reduce((e,t)=>e+t.planned_budget,0).toLocaleString()]})]}),(0,r.jsxs)("div",{style:{borderLeft:"1px solid #E5E7EB",paddingLeft:"24px"},children:[r.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"2px",textTransform:"uppercase"},children:"Active"}),r.jsx("div",{style:{fontSize:"20px",fontWeight:"600",color:"#111827"},children:v.filter(e=>"in_progress"===e.status).length}),r.jsx("div",{style:{fontSize:"11px",color:"#6B7280"},children:"in progress"})]}),(0,r.jsxs)("div",{style:{borderLeft:"1px solid #E5E7EB",paddingLeft:"24px"},children:[r.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"2px",textTransform:"uppercase"},children:"Status"}),r.jsx("div",{style:{fontSize:"20px",fontWeight:"600",color:"#111827"},children:v.filter(e=>new Date(e.end_date)>=new Date||"completed"===e.status).length>v.length/2?"On Track":"At Risk"}),(0,r.jsxs)("div",{style:{fontSize:"11px",color:"#6B7280"},children:[v.filter(e=>new Date(e.end_date)<new Date&&"completed"!==e.status).length," overdue"]})]})]}),j.length>0&&(0,r.jsxs)("div",{style:{background:"white",border:"1px solid #E5E7EB",overflowX:"auto"},children:[r.jsx("div",{style:{padding:"12px",borderBottom:"1px solid #E5E7EB",background:"#F9FAFB"},children:r.jsx("h2",{style:{fontSize:"14px",fontWeight:"600",margin:0,color:"#374151"},children:"Timeline"})}),(0,r.jsxs)("div",{style:{minWidth:"800px"},children:[(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:`250px repeat(${eM.length}, 1fr)`,gap:"0",borderBottom:"2px solid #E5E7EB"},children:[r.jsx("div",{style:{background:"#F9FAFB",padding:"8px 12px",fontWeight:"600",color:"#111827",fontSize:"12px",borderRight:"1px solid #E5E7EB"},children:"Task"}),eM.map((e,t)=>r.jsx("div",{style:{background:"#F9FAFB",padding:"8px 12px",textAlign:"center",fontWeight:"500",fontSize:"11px",color:"#6B7280",borderRight:t<eM.length-1?"1px solid #E5E7EB":"none"},children:e.label},t))]}),(()=>{let e=(t,i=0)=>{let n=v.filter(e=>e.category_id===t.id);return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:`250px repeat(${eM.length}, 1fr)`,gap:"0",borderBottom:"1px solid #E5E7EB"},children:[(0,r.jsxs)("div",{style:{background:"#F9FAFB",padding:"8px 12px",paddingLeft:`${12+20*i}px`,fontWeight:"600",color:"#111827",fontSize:"13px",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",borderRight:"1px solid #E5E7EB"},onClick:()=>eg(ex===t.id?null:t.id),children:[(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[r.jsx("button",{onClick:e=>{e.stopPropagation();let i=new Set(ej);i.has(t.id)?i.delete(t.id):i.add(t.id),e_(i)},style:{background:"none",border:"none",cursor:"pointer",padding:"0",display:"flex",alignItems:"center"},children:ej.has(t.id)?r.jsx(h.Z,{style:{width:"14px",height:"14px",color:"#6B7280"}}):r.jsx(c.Z,{style:{width:"14px",height:"14px",color:"#6B7280"}})}),(0,r.jsxs)("span",{children:[i>0?"└ ":"",t.name]})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[(0,r.jsxs)("span",{style:{fontSize:"11px",color:"#6B7280"},children:["(",n.length,")"]}),ex===t.id&&r.jsx("button",{onClick:async e=>{e.stopPropagation(),confirm(`Delete category "${t.name}"?`)&&(await m.from("timeline_categories").update({is_active:!1}).eq("id",t.id),eS(),eg(null),z(`"${t.name}" deleted`))},style:{padding:"2px 8px",background:"white",color:"#374151",border:"1px solid #D1D5DB",cursor:"pointer",fontSize:"11px"},children:"Delete"})]})]}),eM.map((e,t)=>r.jsx("div",{style:{background:"#FAFAFA",minHeight:"20px",borderRight:t<eM.length-1?"1px solid #E5E7EB":"none"}},t))]}),ej.has(t.id)&&n.map(e=>{let{startCol:t,spanCols:i}=eR(e,eM),n="completed"===e.status;return(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:`250px repeat(${eM.length}, 1fr)`,gap:"0",borderBottom:"1px solid #E5E7EB"},children:[(0,r.jsxs)("div",{style:{background:"white",padding:"8px 12px",fontSize:"13px",color:"#374151",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",borderRight:"1px solid #E5E7EB"},onClick:t=>{t.stopPropagation(),eE(e)},children:[r.jsx("input",{type:"checkbox",checked:n,onChange:async t=>{t.stopPropagation(),await m.from("timeline_items").update({status:n?"in_progress":"completed",completion_percentage:n?e.completion_percentage:100}).eq("id",e.id),eD()},style:{width:"14px",height:"14px",cursor:"pointer",marginRight:"8px",flexShrink:0}}),(0,r.jsxs)("div",{style:{flex:1},children:[r.jsx("div",{style:{fontSize:"13px",textDecoration:n?"line-through":"none",color:n?"#9CA3AF":"#111827"},children:e.title}),(0,r.jsxs)("div",{style:{fontSize:"11px",color:"#9CA3AF",marginTop:"2px"},children:[e.completion_percentage,"% • $",e.actual_spending.toLocaleString()]})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"6px",alignItems:"center"},children:[r.jsx("span",{style:{fontSize:"11px",color:"#6B7280"},children:e.status.replace("_"," ")}),r.jsx("button",{onClick:async t=>{t.stopPropagation(),confirm(`Delete "${e.title}"?`)&&(await m.from("timeline_items").delete().eq("id",e.id),eD(),z("Deleted"))},style:{padding:"2px 6px",background:"white",color:"#6B7280",border:"1px solid #D1D5DB",cursor:"pointer",fontSize:"10px"},children:"\xd7"})]})]}),eM.map((n,o)=>r.jsx("div",{style:{background:"white",position:"relative",minHeight:"40px",borderRight:o<eM.length-1?"1px solid #E5E7EB":"none"},children:o===t&&r.jsx("div",{style:{position:"absolute",left:"4px",right:i>1?"auto":"4px",width:i>1?`calc(${100*i}% + ${(i-1)*100}% - 8px)`:"calc(100% - 8px)",top:"50%",transform:"translateY(-50%)",background:"#E5E7EB",height:"20px",border:"1px solid #D1D5DB",cursor:"pointer",zIndex:10,overflow:"hidden"},onClick:()=>{ea(e),Z(!0)},children:r.jsx("div",{style:{height:"100%",width:`${e.completion_percentage}%`,background:"#9CA3AF",transition:"width 0.3s ease"}})})},o))]},e.id)}),t.subcategories&&t.subcategories.length>0&&r.jsx(r.Fragment,{children:t.subcategories.map(t=>e(t,i+1))})]},t.id)};return j.map(t=>e(t,0))})(),0===j.length&&(0,r.jsxs)("div",{style:{textAlign:"center",padding:"40px 20px",background:"#FAFAFA",border:"1px solid #E5E7EB"},children:[r.jsx("p",{style:{color:"#6B7280",fontSize:"13px",marginBottom:"12px"},children:"No categories yet."}),r.jsx("button",{onClick:()=>U(!0),style:{padding:"6px 16px",background:"white",color:"#374151",border:"1px solid #D1D5DB",fontSize:"13px",cursor:"pointer"},children:"Create Category"})]})]})]})]}):(0,r.jsxs)("div",{style:{textAlign:"center",padding:"60px 20px",background:"#FAFAFA",border:"1px solid #E5E7EB"},children:[r.jsx("p",{style:{color:"#6B7280",fontSize:"14px",marginBottom:"16px"},children:"No timeline folders yet"}),r.jsx("button",{onClick:()=>$(!0),style:{padding:"8px 16px",background:"white",color:"#374151",border:"1px solid #D1D5DB",fontSize:"13px",cursor:"pointer"},children:"Create Folder"})]})]}),L&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>$(!1),children:(0,r.jsxs)("div",{style:{background:"white",borderRadius:"16px",padding:"32px",maxWidth:"600px",width:"90%"},onClick:e=>e.stopPropagation(),children:[r.jsx("h3",{style:{fontSize:"24px",fontWeight:"700",marginBottom:"24px"},children:"Create Timeline Folder"}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:"Folder Name *"}),r.jsx("input",{type:"text",value:Q.name,onChange:e=>J({...Q,name:e.target.value}),placeholder:"e.g., 2025 Company Roadmap",style:{width:"100%",padding:"12px",border:"2px solid #E5E7EB",borderRadius:"8px"}})]}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:"Description"}),r.jsx("textarea",{value:Q.description,onChange:e=>J({...Q,description:e.target.value}),rows:3,style:{width:"100%",padding:"12px",border:"2px solid #E5E7EB",borderRadius:"8px"}})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"20px"},children:[(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:"Start Date"}),r.jsx("input",{type:"date",value:Q.start_date,onChange:e=>J({...Q,start_date:e.target.value}),style:{width:"100%",padding:"12px",border:"2px solid #E5E7EB",borderRadius:"8px"}})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:"End Date"}),r.jsx("input",{type:"date",value:Q.end_date,onChange:e=>J({...Q,end_date:e.target.value}),style:{width:"100%",padding:"12px",border:"2px solid #E5E7EB",borderRadius:"8px"}})]})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>$(!1),style:{padding:"8px 16px",background:"white",color:"#374151",border:"1px solid #D1D5DB",fontSize:"13px",cursor:"pointer"},children:"Cancel"}),r.jsx("button",{onClick:eF,style:{padding:"8px 16px",background:"#111827",color:"white",border:"none",fontSize:"13px",cursor:"pointer"},children:"Create"})]})]})}),Y&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>U(!1),children:(0,r.jsxs)("div",{style:{background:"white",borderRadius:"16px",padding:"32px",maxWidth:"500px",width:"90%"},onClick:e=>e.stopPropagation(),children:[r.jsx("h3",{style:{fontSize:"24px",fontWeight:"700",marginBottom:"24px"},children:"Create Category"}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:"Category Name *"}),r.jsx("input",{type:"text",value:ee.name,onChange:e=>et({...ee,name:e.target.value}),placeholder:"e.g., Social Media, IT, Marketing",style:{width:"100%",padding:"12px",border:"2px solid #E5E7EB",borderRadius:"8px"}})]}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:"Parent Category (Optional)"}),(0,r.jsxs)("select",{value:ee.parent_category_id||"",onChange:e=>et({...ee,parent_category_id:e.target.value?parseInt(e.target.value):null}),style:{width:"100%",padding:"12px",border:"2px solid #E5E7EB",borderRadius:"8px"},children:[r.jsx("option",{value:"",children:"None (Main Category)"}),j.map(e=>(0,r.jsxs)("option",{value:e.id,children:["↳ ",e.name]},e.id))]}),r.jsx("div",{style:{fontSize:"12px",color:"#64748B",marginTop:"4px"},children:"Select a parent to create a subcategory"})]}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:"Description"}),r.jsx("textarea",{value:ee.description,onChange:e=>et({...ee,description:e.target.value}),rows:2,placeholder:"Optional description...",style:{width:"100%",padding:"12px",border:"2px solid #E5E7EB",borderRadius:"8px"}})]}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:"Color"}),r.jsx("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:["#F59E0B","#8B5CF6","#10B981","#3B82F6","#EF4444","#EC4899","#F97316","#14B8A6"].map(e=>r.jsx("button",{onClick:()=>et({...ee,color:e}),style:{width:"40px",height:"40px",borderRadius:"8px",background:e,border:ee.color===e?"3px solid #1F2937":"none",cursor:"pointer"}},e))})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>U(!1),style:{padding:"8px 16px",background:"white",color:"#374151",border:"1px solid #D1D5DB",fontSize:"13px",cursor:"pointer"},children:"Cancel"}),r.jsx("button",{onClick:ez,style:{padding:"8px 16px",background:"#111827",color:"white",border:"none",fontSize:"13px",cursor:"pointer"},children:"Create"})]})]})}),N&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px",overflowY:"auto"},onClick:()=>Z(!1),children:(0,r.jsxs)("div",{style:{background:"white",borderRadius:"16px",padding:"32px",maxWidth:"700px",width:"100%",maxHeight:"90vh",overflowY:"auto"},onClick:e=>e.stopPropagation(),children:[r.jsx("h3",{style:{fontSize:"24px",fontWeight:"700",marginBottom:"24px"},children:"Create Timeline Item"}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:"Title *"}),r.jsx("input",{type:"text",value:ei.title,onChange:e=>er({...ei,title:e.target.value}),placeholder:"e.g., Website Redesign Project",style:{width:"100%",padding:"12px",border:"2px solid #E5E7EB",borderRadius:"8px"}})]}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:"Category & Subcategories"}),(0,r.jsxs)("select",{value:ei.category_id,onChange:e=>er({...ei,category_id:parseInt(e.target.value)}),style:{width:"100%",padding:"12px",border:"2px solid #E5E7EB",borderRadius:"8px"},children:[r.jsx("option",{value:0,children:"Select category..."}),(()=>{let e=(t,i=0)=>{let n=[];return t.forEach(t=>{let o="  ".repeat(i);n.push((0,r.jsxs)("option",{value:t.id,children:[i>0?o+"└ ":"",t.name]},t.id)),t.subcategories&&t.subcategories.length>0&&(n=n.concat(e(t.subcategories,i+1)))}),n};return e(j)})()]})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"20px"},children:[(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:"Start Date *"}),r.jsx("input",{type:"date",value:ei.start_date,onChange:e=>er({...ei,start_date:e.target.value}),style:{width:"100%",padding:"12px",border:"2px solid #E5E7EB",borderRadius:"8px"}})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:"End Date *"}),r.jsx("input",{type:"date",value:ei.end_date,onChange:e=>er({...ei,end_date:e.target.value}),style:{width:"100%",padding:"12px",border:"2px solid #E5E7EB",borderRadius:"8px"}})]})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"20px"},children:[(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:"Phase"}),r.jsx("select",{value:ei.phase,onChange:e=>er({...ei,phase:e.target.value}),style:{width:"100%",padding:"12px",border:"2px solid #E5E7EB",borderRadius:"8px"},children:ev.map(e=>r.jsx("option",{value:e,children:e},e))})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:"Status"}),(0,r.jsxs)("select",{value:ei.status,onChange:e=>er({...ei,status:e.target.value}),style:{width:"100%",padding:"12px",border:"2px solid #E5E7EB",borderRadius:"8px"},children:[r.jsx("option",{value:"not_started",children:"Not Started"}),r.jsx("option",{value:"in_progress",children:"In Progress"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"on_hold",children:"On Hold"}),r.jsx("option",{value:"delayed",children:"Delayed"})]})]})]}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"20px"},children:[(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:"Planned Budget ($)"}),r.jsx("input",{type:"number",value:ei.planned_budget,onChange:e=>er({...ei,planned_budget:parseFloat(e.target.value)||0}),style:{width:"100%",padding:"12px",border:"2px solid #E5E7EB",borderRadius:"8px"}})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:"Actual Spending ($)"}),r.jsx("input",{type:"number",value:ei.actual_spending,onChange:e=>er({...ei,actual_spending:parseFloat(e.target.value)||0}),style:{width:"100%",padding:"12px",border:"2px solid #E5E7EB",borderRadius:"8px"}})]})]}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"12px",fontWeight:"600"},children:"Assign Team Members"}),r.jsx("div",{style:{border:"2px solid #E5E7EB",borderRadius:"8px",padding:"16px",background:"#F9FAFB",maxHeight:"200px",overflowY:"auto"},children:eu.length>0?eu.map(e=>(0,r.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"10px",background:"white",borderRadius:"6px",marginBottom:"8px",cursor:"pointer",border:ei.team_member_ids.includes(e.id)?"2px solid #3B82F6":"2px solid transparent"},children:[r.jsx("input",{type:"checkbox",checked:ei.team_member_ids.includes(e.id),onChange:t=>{t.target.checked?er({...ei,team_member_ids:[...ei.team_member_ids,e.id]}):er({...ei,team_member_ids:ei.team_member_ids.filter(t=>t!==e.id)})},style:{width:"18px",height:"18px",cursor:"pointer",accentColor:"#3B82F6"}}),(0,r.jsxs)("div",{style:{flex:1},children:[r.jsx("div",{style:{fontWeight:"600",fontSize:"14px",color:"#374151"},children:e.name}),r.jsx("div",{style:{fontSize:"12px",color:"#64748B"},children:e.email})]})]},e.id)):r.jsx("p",{style:{textAlign:"center",color:"#9CA3AF",fontSize:"14px",padding:"20px"},children:"No team members. Add members in Team settings."})})]}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:"Completion % (0-100)"}),r.jsx("input",{type:"number",min:"0",max:"100",value:ei.completion_percentage,onChange:e=>er({...ei,completion_percentage:parseInt(e.target.value)||0}),style:{width:"100%",padding:"12px",border:"2px solid #E5E7EB",borderRadius:"8px"}})]}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"600"},children:"Checklist Items"}),(0,r.jsxs)("div",{style:{border:"2px solid #E5E7EB",borderRadius:"8px",padding:"16px",background:"#F9FAFB"},children:[(0,r.jsxs)("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[r.jsx("input",{type:"text",value:el,onChange:e=>ed(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),el.trim()&&(eo([...en,el]),ed("")))},placeholder:"Add checklist item...",style:{flex:1,padding:"10px",border:"1px solid #D1D5DB",borderRadius:"6px"}}),r.jsx("button",{type:"button",onClick:()=>{el.trim()&&(eo([...en,el]),ed(""))},style:{padding:"8px 16px",background:"#111827",color:"white",border:"none",fontSize:"13px",cursor:"pointer"},children:"Add"})]}),en.map((e,t)=>(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px",background:"white",borderRadius:"6px",marginBottom:"8px"},children:[(0,r.jsxs)("span",{style:{flex:1,fontSize:"14px"},children:[t+1,". ",e]}),r.jsx("button",{onClick:()=>eo(en.filter((e,i)=>i!==t)),style:{padding:"2px 8px",background:"white",color:"#6B7280",border:"1px solid #D1D5DB",fontSize:"11px",cursor:"pointer"},children:"\xd7"})]},t))]})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>{Z(!1),eW()},style:{padding:"8px 16px",background:"white",color:"#374151",border:"1px solid #D1D5DB",fontSize:"13px",cursor:"pointer"},children:"Cancel"}),r.jsx("button",{onClick:eA,style:{padding:"8px 16px",background:"#111827",color:"white",border:"none",fontSize:"13px",cursor:"pointer"},children:"Create"})]})]})}),H&&f&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:()=>O(!1),children:(0,r.jsxs)("div",{style:{background:"white",borderRadius:"16px",padding:"32px",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto"},onClick:e=>e.stopPropagation(),children:[r.jsx("h3",{style:{fontSize:"24px",fontWeight:"700",marginBottom:"24px"},children:"Manage Team Members"}),r.jsx("div",{style:{marginBottom:"24px"},children:(0,r.jsxs)("div",{style:{display:"flex",gap:"8px",marginBottom:"16px",flexDirection:A?"column":"row"},children:[r.jsx("input",{type:"email",placeholder:"Enter team member email...",id:"memberEmail",style:{flex:1,padding:"14px 16px",border:"2px solid #E5E7EB",borderRadius:"8px",fontSize:"15px",minWidth:A?"100%":"300px"}}),(0,r.jsxs)("select",{id:"memberRole",style:{padding:"12px",border:"2px solid #E5E7EB",borderRadius:"8px"},children:[r.jsx("option",{value:"viewer",children:"Viewer"}),r.jsx("option",{value:"editor",children:"Editor"}),r.jsx("option",{value:"manager",children:"Manager"})]}),r.jsx("button",{onClick:async()=>{let e=document.getElementById("memberEmail").value,t=document.getElementById("memberRole").value;if(e.trim())try{let{data:i}=await m.from("auth_user").select("id").eq("email",e).single();i&&(await m.from("timeline_folder_members").insert([{folder_id:f.id,user_id:i.id,role:t,can_edit:"viewer"!==t,can_delete:"manager"===t,can_manage_members:"manager"===t,can_manage_budget:"manager"===t}]),eC(),z("Member added successfully!"),document.getElementById("memberEmail").value="")}catch(e){C("Failed to add member")}},style:{padding:"8px 16px",background:"#111827",color:"white",border:"none",fontSize:"13px",cursor:"pointer"},children:"Add"})]})}),(0,r.jsxs)("div",{children:[r.jsx("h4",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px"},children:"Current Members"}),w.map(e=>(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"8px",background:"#FAFAFA",border:"1px solid #E5E7EB",marginBottom:"4px"},children:[(0,r.jsxs)("div",{children:[r.jsx("div",{style:{fontSize:"13px",color:"#111827"},children:e.user_name}),r.jsx("div",{style:{fontSize:"11px",color:"#6B7280"},children:e.user_email})]}),(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[r.jsx("span",{style:{fontSize:"11px",color:"#6B7280"},children:e.role}),"owner"!==e.role&&r.jsx("button",{onClick:async()=>{confirm("Remove this member?")&&(await m.from("timeline_folder_members").delete().eq("id",e.id),eC())},style:{padding:"2px 8px",background:"white",color:"#6B7280",border:"1px solid #D1D5DB",fontSize:"11px",cursor:"pointer"},children:"\xd7"})]})]},e.id))]}),r.jsx("div",{style:{marginTop:"24px",display:"flex",justifyContent:"flex-end"},children:r.jsx("button",{onClick:()=>O(!1),style:{padding:"8px 16px",background:"#111827",color:"white",border:"none",fontSize:"13px",cursor:"pointer"},children:"Done"})})]})}),V&&f&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:()=>K(!1),children:(0,r.jsxs)("div",{style:{background:"white",borderRadius:"16px",padding:"32px",maxWidth:"900px",width:"100%",maxHeight:"90vh",overflowY:"auto"},onClick:e=>e.stopPropagation(),children:[r.jsx("h3",{style:{fontSize:"24px",fontWeight:"700",marginBottom:"24px"},children:"Visual Reports & Analytics"}),(0,r.jsxs)("div",{style:{marginBottom:"24px",padding:"16px",background:"#FAFAFA",border:"1px solid #E5E7EB"},children:[r.jsx("div",{style:{fontSize:"13px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Total Progress"}),(0,r.jsxs)("div",{style:{fontSize:"24px",fontWeight:"700",color:"#111827",marginBottom:"8px"},children:[Math.round(v.reduce((e,t)=>e+t.completion_percentage,0)/(v.length||1)),"%"]}),r.jsx("div",{style:{width:"100%",height:"8px",background:"#E5E7EB"},children:r.jsx("div",{style:{width:`${Math.round(v.reduce((e,t)=>e+t.completion_percentage,0)/(v.length||1))}%`,height:"100%",background:"#6B7280"}})})]}),(0,r.jsxs)("div",{style:{marginBottom:"24px"},children:[r.jsx("div",{style:{fontSize:"13px",fontWeight:"600",marginBottom:"12px",color:"#374151"},children:"Budget"}),(0,r.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"12px"},children:[(0,r.jsxs)("div",{style:{padding:"12px",background:"#FAFAFA",border:"1px solid #E5E7EB"},children:[r.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"Planned"}),(0,r.jsxs)("div",{style:{fontSize:"18px",fontWeight:"600",color:"#111827"},children:["$",v.reduce((e,t)=>e+t.planned_budget,0).toLocaleString()]})]}),(0,r.jsxs)("div",{style:{padding:"12px",background:"#FAFAFA",border:"1px solid #E5E7EB"},children:[r.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"Actual"}),(0,r.jsxs)("div",{style:{fontSize:"18px",fontWeight:"600",color:"#111827"},children:["$",v.reduce((e,t)=>e+t.actual_spending,0).toLocaleString()]})]}),(0,r.jsxs)("div",{style:{padding:"12px",background:"#FAFAFA",border:"1px solid #E5E7EB"},children:[r.jsx("div",{style:{fontSize:"11px",color:"#6B7280",marginBottom:"4px"},children:"Variance"}),(0,r.jsxs)("div",{style:{fontSize:"18px",fontWeight:"600",color:"#111827"},children:["$",Math.abs(v.reduce((e,t)=>e+t.actual_spending,0)-v.reduce((e,t)=>e+t.planned_budget,0)).toLocaleString()]})]})]})]}),(0,r.jsxs)("div",{style:{marginBottom:"24px"},children:[r.jsx("div",{style:{fontSize:"13px",fontWeight:"600",marginBottom:"12px",color:"#374151"},children:"By Category"}),j.map(e=>{let t=v.filter(t=>t.category_id===e.id),i=t.length>0?Math.round(t.reduce((e,t)=>e+t.completion_percentage,0)/t.length):0;return(0,r.jsxs)("div",{style:{marginBottom:"12px",padding:"8px",background:"#FAFAFA",border:"1px solid #E5E7EB"},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{style:{fontSize:"12px",color:"#374151"},children:e.name}),(0,r.jsxs)("span",{style:{fontSize:"12px",fontWeight:"600",color:"#111827"},children:[i,"%"]})]}),r.jsx("div",{style:{width:"100%",height:"6px",background:"#E5E7EB"},children:r.jsx("div",{style:{width:`${i}%`,height:"100%",background:"#9CA3AF"}})}),(0,r.jsxs)("div",{style:{fontSize:"10px",color:"#6B7280",marginTop:"4px"},children:[t.filter(e=>"completed"===e.status).length,"/",t.length," completed"]})]},e.id)})]}),(0,r.jsxs)("div",{style:{marginBottom:"24px"},children:[r.jsx("div",{style:{fontSize:"13px",fontWeight:"600",marginBottom:"12px",color:"#374151"},children:"Status"}),r.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",gap:"8px"},children:["not_started","in_progress","completed","on_hold","delayed"].map(e=>{let t=v.filter(t=>t.status===e).length;return(0,r.jsxs)("div",{style:{padding:"8px",background:"#FAFAFA",border:"1px solid #E5E7EB",textAlign:"center"},children:[r.jsx("div",{style:{fontSize:"18px",fontWeight:"600",color:"#111827"},children:t}),r.jsx("div",{style:{fontSize:"10px",color:"#6B7280",marginTop:"2px",textTransform:"capitalize"},children:e.replace("_"," ")})]},e)})})]}),r.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:r.jsx("button",{onClick:()=>K(!1),style:{padding:"8px 16px",background:"#111827",color:"white",border:"none",fontSize:"13px",cursor:"pointer"},children:"Close"})})]})}),ef&&es&&r.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:()=>eb(!1),children:(0,r.jsxs)("div",{style:{background:"white",borderRadius:"16px",padding:"32px",maxWidth:"700px",width:"100%",maxHeight:"90vh",overflowY:"auto"},onClick:e=>e.stopPropagation(),children:[r.jsx("h3",{style:{fontSize:"24px",fontWeight:"700",marginBottom:"24px",color:"#1F2937"},children:es.title}),(0,r.jsxs)("div",{style:{marginBottom:"24px",padding:"16px",background:"#F9FAFB",borderRadius:"8px"},children:[(0,r.jsxs)("div",{style:{marginBottom:"12px"},children:[r.jsx("span",{style:{fontWeight:"600",color:"#64748B",fontSize:"14px"},children:"Status: "}),r.jsx("span",{style:{padding:"4px 12px",background:eI(es.status)+"20",color:eI(es.status),borderRadius:"12px",fontSize:"13px",fontWeight:"600"},children:es.status.replace("_"," ")})]}),(0,r.jsxs)("div",{style:{marginBottom:"12px"},children:[r.jsx("span",{style:{fontWeight:"600",color:"#64748B",fontSize:"14px"},children:"Timeline: "}),(0,r.jsxs)("span",{style:{fontSize:"14px"},children:[new Date(es.start_date).toLocaleDateString()," - ",new Date(es.end_date).toLocaleDateString()]})]}),(0,r.jsxs)("div",{style:{marginBottom:"12px"},children:[r.jsx("span",{style:{fontWeight:"600",color:"#64748B",fontSize:"14px"},children:"Budget: "}),(0,r.jsxs)("span",{style:{fontSize:"14px"},children:["$",es.actual_spending.toLocaleString()," / $",es.planned_budget.toLocaleString()]})]}),(0,r.jsxs)("div",{children:[r.jsx("span",{style:{fontWeight:"600",color:"#64748B",fontSize:"14px"},children:"Completion: "}),(0,r.jsxs)("span",{style:{fontSize:"14px",fontWeight:"600",color:"#111827"},children:[es.completion_percentage,"%"]})]})]}),es.team_member_ids&&es.team_member_ids.length>0&&(0,r.jsxs)("div",{style:{marginBottom:"24px"},children:[r.jsx("h4",{style:{fontSize:"14px",fontWeight:"600",marginBottom:"8px",color:"#374151"},children:"Team Members"}),r.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:es.team_member_ids.map(e=>{let t=eu.find(t=>t.id===e);return t?r.jsx("div",{style:{padding:"4px 10px",background:"#FAFAFA",color:"#374151",border:"1px solid #E5E7EB",fontSize:"12px"},children:t.name},e):null})})]}),(0,r.jsxs)("div",{style:{marginBottom:"24px"},children:[(0,r.jsxs)("h4",{style:{fontSize:"16px",fontWeight:"600",marginBottom:"12px"},children:["Checklist (",eh.filter(e=>e.is_completed).length,"/",eh.length," completed)"]}),eh.length>0?r.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:eh.map((t,i)=>(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"12px",padding:"12px",background:t.is_completed?"#F3F4F6":"white",border:"2px solid #E5E7EB",borderRadius:"8px"},children:[r.jsx("input",{type:"checkbox",checked:t.is_completed,onChange:async i=>{let r=i.target.checked;try{await m.from("timeline_item_checklist").update({is_completed:r,completed_at:r?new Date().toISOString():null,completed_by_id:r?parseInt(e?.id?.toString()||"0"):null}).eq("id",t.id),em(e=>e.map(e=>e.id===t.id?{...e,is_completed:r}:e)),eD()}catch(e){console.error("Error updating checklist item:",e)}},style:{width:"20px",height:"20px",cursor:"pointer",flexShrink:0,accentColor:"#10B981"}}),(0,r.jsxs)("span",{style:{flex:1,fontSize:"14px",color:t.is_completed?"#9CA3AF":"#374151",textDecoration:t.is_completed?"line-through":"none",fontWeight:t.is_completed?"400":"500"},children:[i+1,". ",t.item_text]}),t.is_completed&&t.completed_at&&r.jsx("span",{style:{fontSize:"11px",color:"#6B7280"},children:"Done"})]},t.id||i))}):r.jsx("p",{style:{textAlign:"center",color:"#9CA3AF",fontSize:"14px",padding:"20px",fontStyle:"italic"},children:"No checklist items for this timeline item"})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"8px",justifyContent:"flex-end"},children:[r.jsx("button",{onClick:()=>eb(!1),style:{padding:"8px 16px",background:"white",color:"#374151",border:"1px solid #D1D5DB",fontSize:"13px",cursor:"pointer"},children:"Close"}),r.jsx("button",{onClick:()=>{er({title:es.title,description:es.description||"",category_id:es.category_id||0,start_date:es.start_date,end_date:es.end_date,phase:es.phase||"Planning",status:es.status,planned_budget:es.planned_budget,actual_spending:es.actual_spending,completion_percentage:es.completion_percentage,priority:es.priority,team_leader_id:es.team_leader_id||0,team_member_ids:es.team_member_ids||[],color:es.color}),eo(eh.map(e=>e.item_text)),ec(!0),eb(!1),Z(!0)},style:{padding:"8px 16px",background:"#111827",color:"white",border:"none",fontSize:"13px",cursor:"pointer"},children:"Edit"})]})]})})]})}},7797:(e,t,i)=>{"use strict";i.r(t),i.d(t,{$$typeof:()=>l,__esModule:()=>o,default:()=>s});var r=i(5153);let n=(0,r.createProxy)(String.raw`/Users/swumpyaesone/Documents/project_management/hostinger_deployment_v2/src/app/timeline/page.tsx`),{__esModule:o,$$typeof:l}=n,d=n.default,s=d},3881:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>n});var r=i(8531);let n=e=>{let t=(0,r.fillMetadataSegment)(".",e.params,"favicon.ico");return[{type:"image/x-icon",sizes:"16x16",url:t+""}]}},789:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(4218);let n=r.forwardRef(function({title:e,titleId:t,...i},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},i),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}),o=n},7689:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(4218);let n=r.forwardRef(function({title:e,titleId:t,...i},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},i),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}),o=n},2769:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var r=i(4218);let n=r.forwardRef(function({title:e,titleId:t,...i},n){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},i),e?r.createElement("title",{id:t},e):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m.94 3.198.001.031c0 .225-.012.447-.037.666A11.944 11.944 0 0 1 12 21c-2.17 0-4.207-.576-5.963-1.584A6.062 6.062 0 0 1 6 18.719m12 0a5.971 5.971 0 0 0-.941-3.197m0 0A5.995 5.995 0 0 0 12 12.75a5.995 5.995 0 0 0-5.058 2.772m0 0a3 3 0 0 0-4.681 2.72 8.986 8.986 0 0 0 3.74.477m.94-3.197a5.971 5.971 0 0 0-.94 3.197M15 6.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm6 3a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Zm-13.5 0a2.25 2.25 0 1 1-4.5 0 2.25 2.25 0 0 1 4.5 0Z"}))}),o=n}};var t=require("../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),r=t.X(0,[3271,3913,1323,1336],()=>i(8718));module.exports=r})();