(()=>{var e={};e.id=9362,e.ids=[9362],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1017:e=>{"use strict";e.exports=require("path")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},5205:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>m,originalPathname:()=>c,pages:()=>p,routeModule:()=>u,tree:()=>l});var i=r(7096),s=r(6132),o=r(7284),a=r.n(o),n=r(2564),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);r.d(t,d);let l=["",{children:["my-personal",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,8209)),"/Users/swumpyaesone/Documents/project_management/hostinger_deployment_v2/src/app/my-personal/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,6188)),"/Users/swumpyaesone/Documents/project_management/hostinger_deployment_v2/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],p=["/Users/swumpyaesone/Documents/project_management/hostinger_deployment_v2/src/app/my-personal/page.tsx"],c="/my-personal/page",m={require:r,loadChunk:()=>Promise.resolve()},u=new i.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/my-personal/page",pathname:"/my-personal",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},9253:(e,t,r)=>{Promise.resolve().then(r.bind(r,8057))},8057:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>l});var i=r(3854),s=r(4218),o=r(1018),a=r(6837),n=r(8998),d=r(4937);function l(){let{user:e,isAuthenticated:t,isLoading:l}=(0,a.useAuth)(),p=(0,o.useRouter)(),[c,m]=(0,s.useState)([]),[u,g]=(0,s.useState)([]),[h,x]=(0,s.useState)([]),[f,y]=(0,s.useState)("15min"),[b,v]=(0,s.useState)(new Date),[_,j]=(0,s.useState)(!0),[S,w]=(0,s.useState)(""),[k,D]=(0,s.useState)(!1),[z,B]=(0,s.useState)(null),[C,P]=(0,s.useState)(null),[I,q]=(0,s.useState)({title:"",description:"",priority:"medium",category:"",color:"#FFB333",estimated_duration:30,start_date:new Date().toISOString().split("T")[0],start_time:"09:00",due_date:new Date().toISOString().split("T")[0],due_time:"10:00"});(0,s.useEffect)(()=>{if(!l){if(!t){p.push("/login");return}T(),F(),R()}},[t,l,p,b]);let T=async()=>{try{j(!0);let t=(await Promise.resolve().then(r.bind(r,2132))).supabase,i=new Date(b);i.setDate(b.getDate()-7);let s=new Date(b);s.setDate(b.getDate()+7);let[o,a]=await Promise.all([t.from("personal_events").select("*").eq("user_id",parseInt(e?.id?.toString()||"0")).gte("start_datetime",i.toISOString()).lte("start_datetime",s.toISOString()).order("start_datetime",{ascending:!0}),t.from("personal_tasks").select("*").eq("user_id",parseInt(e?.id?.toString()||"0")).not("scheduled_start","is",null).gte("scheduled_start",i.toISOString()).lte("scheduled_start",s.toISOString()).order("scheduled_start",{ascending:!0})]);if(o.error)throw o.error;if(a.error)throw a.error;let n=(o.data||[]).map(e=>({id:e.id,title:e.title,description:e.description||"",start_datetime:e.start_datetime,end_datetime:e.end_datetime,all_day:e.all_day||!1,location:e.location||"",event_type:e.event_type||"personal",priority:e.priority||"medium",status:e.status||"confirmed",color:e.color||"#5884FD",item_type:"event",completion_percentage:void 0})),d=(a.data||[]).map(e=>({id:e.id,title:e.title,description:e.description||"",start_datetime:e.scheduled_start,end_datetime:e.scheduled_end,all_day:!1,location:"",event_type:"task",priority:e.priority||"medium",status:e.status||"todo",color:e.color||"#FFB333",item_type:"task",completion_percentage:e.completion_percentage||0}));m([...n,...d])}catch(e){console.error("Error fetching calendar data:",e),w("Failed to load calendar data")}finally{j(!1)}},F=async()=>{try{let t=(await Promise.resolve().then(r.bind(r,2132))).supabase,{data:i,error:s}=await t.from("personal_tasks").select("*").eq("user_id",parseInt(e?.id?.toString()||"0")).is("scheduled_start",null).order("created_at",{ascending:!1});if(s){console.error("Supabase error:",s);return}g(i||[])}catch(e){console.error("Error fetching unscheduled tasks:",e)}},R=async()=>{try{let e=await d.projectService.getProjects();x(e||[])}catch(e){console.error("Error fetching projects:",e),x([])}},W=async()=>{try{if(!I.title.trim()){w("Please enter a task title");return}let t=(await Promise.resolve().then(r.bind(r,2132))).supabase,i=`${I.start_date}T${I.start_time}:00`,s=`${I.due_date}T${I.due_time}:00`,{data:o,error:a}=await t.from("personal_tasks").insert([{user_id:parseInt(e?.id?.toString()||"0"),title:I.title,description:I.description||"",priority:I.priority,status:"todo",category:I.category||"personal",color:I.color,tags:[],completion_percentage:0,estimated_duration:I.estimated_duration,scheduled_start:i,scheduled_end:s,due_date:s}]).select().single();if(a)throw a;await T(),await F(),q({title:"",description:"",priority:"medium",category:"",color:"#FFB333",estimated_duration:30,start_date:new Date().toISOString().split("T")[0],start_time:"09:00",due_date:new Date().toISOString().split("T")[0],due_time:"10:00"}),D(!1),w("")}catch(e){console.error("Error creating task:",e),w("Failed to create task: "+e.message)}},E=e=>{B(e)},$=()=>{B(null),P(null)},O=(e,t,r,i=0)=>{e.preventDefault(),z&&P({date:t,hour:r,minute:i})},H=async(t,i,s,o=0)=>{if(t.preventDefault(),z)try{let t=new Date(i);t.setHours(s,o,0,0);let a=(await Promise.resolve().then(r.bind(r,2132))).supabase,n=new Date(t.getTime()+36e5);await a.from("personal_tasks").update({scheduled_start:t.toISOString(),scheduled_end:n.toISOString(),auto_scheduled:!1}).eq("id",z.id).eq("user_id",parseInt(e?.id?.toString()||"0")),await T(),await F()}catch(e){console.error("Error scheduling task:",e),w("Failed to schedule task: "+e.message)}finally{B(null),P(null)}};return l||_?i.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:i.jsx("div",{children:"Loading..."})}):t?(0,i.jsxs)("div",{style:{padding:"2rem",background:"#F5F5ED",flex:1,minHeight:"100vh"},children:[(0,i.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"2rem"},children:[(0,i.jsxs)("div",{children:[i.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"300",margin:"0",color:"#1a1a1a",letterSpacing:"-0.02em"},children:"Personal Calendar - 15 Min Timeblocking"}),i.jsx("p",{style:{fontSize:"1.1rem",color:"#666666",margin:"0.5rem 0 0 0",lineHeight:"1.5"},children:"Drag tasks from sidebar to time slots for scheduling"})]}),(0,i.jsxs)("button",{onClick:()=>D(!0),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:"#FFB333",color:"#ffffff",border:"none",borderRadius:"12px",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(255, 179, 51, 0.3)"},children:[i.jsx(n.Z,{style:{width:"16px",height:"16px"}}),"New Task"]})]}),S&&i.jsx("div",{style:{background:"#fee2e2",border:"1px solid #fecaca",color:"#dc2626",padding:"1rem",borderRadius:"8px",marginBottom:"1rem"},children:S}),(()=>{let e=[];for(let t=0;t<=23;t++)for(let r=0;r<60;r+=15)e.push({hour:t,minute:r});return(0,i.jsxs)("div",{style:{display:"flex",gap:"1rem"},children:[(0,i.jsxs)("div",{style:{width:"300px",background:"#ffffff",border:"1px solid #e8e8e8",borderRadius:"16px",padding:"1rem",boxShadow:"0 2px 16px rgba(0, 0, 0, 0.04)",maxHeight:"600px",overflowY:"auto"},children:[i.jsx("h3",{style:{margin:"0 0 1rem 0",fontSize:"1.1rem",fontWeight:"600",color:"#1a1a1a"},children:"Unscheduled Tasks"}),0===u.length?i.jsx("p",{style:{color:"#666666",fontSize:"0.9rem",fontStyle:"italic",textAlign:"center",margin:"2rem 0"},children:"No unscheduled tasks"}):i.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:u.map(e=>(0,i.jsxs)("div",{draggable:!0,onDragStart:()=>E(e),onDragEnd:$,style:{padding:"0.75rem",background:e.color||"#FFB333",color:"#ffffff",borderRadius:"8px",cursor:"grab",fontSize:"0.85rem",fontWeight:"500",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",transition:"all 0.2s ease",userSelect:"none"},children:[i.jsx("div",{style:{fontWeight:"600",marginBottom:"0.25rem"},children:e.title}),e.priority&&(0,i.jsxs)("div",{style:{fontSize:"0.7rem",opacity:.8,marginTop:"0.25rem"},children:["Priority: ",e.priority]})]},e.id))})]}),i.jsx("div",{style:{background:"#ffffff",border:"1px solid #e8e8e8",borderRadius:"16px",overflow:"hidden",boxShadow:"0 2px 16px rgba(0, 0, 0, 0.04)",flex:1,maxHeight:"600px",overflowY:"auto"},children:(0,i.jsxs)("div",{style:{display:"flex"},children:[(0,i.jsxs)("div",{style:{width:"80px",borderRight:"1px solid #e0e4e7",background:"#fafbfc"},children:[i.jsx("div",{style:{height:"100px",borderBottom:"2px solid #d1d5db",display:"flex",alignItems:"center",justifyContent:"center"},children:i.jsx("span",{style:{fontSize:"0.8rem",fontWeight:"600",color:"#374151"},children:"Time"})}),e.map((e,t)=>i.jsx("div",{style:{height:"40px",borderBottom:0===e.minute?"2px solid #d1d5db":"1px solid #e5e7eb",display:"flex",alignItems:"center",justifyContent:"center",fontSize:0===e.minute?"0.8rem":"0.7rem",color:0===e.minute?"#1e293b":"#64748b",fontWeight:0===e.minute?"700":"600",background:0===e.minute?"rgba(88, 132, 253, 0.05)":"transparent"},children:i.jsx("div",{style:{textAlign:"center"},children:0===e.minute?`${e.hour}:00`:`:${e.minute.toString().padStart(2,"0")}`})},`${e.hour}-${e.minute}`))]}),(0,i.jsxs)("div",{style:{flex:1,position:"relative"},children:[i.jsx("div",{style:{height:"100px",borderBottom:"2px solid #d1d5db",display:"flex",alignItems:"center",justifyContent:"center",background:"#fafbfc"},children:i.jsx("span",{style:{fontSize:"1rem",fontWeight:"600",color:"#374151"},children:b.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})}),e.map((e,t)=>{let r=e.hour>=9&&e.hour<=17;return i.jsx("div",{onDragOver:t=>O(t,b,e.hour,e.minute),onDrop:t=>H(t,b,e.hour,e.minute),style:{height:"40px",borderBottom:0===e.minute?"2px solid #e2e8f0":"1px solid #e5e7eb",borderRight:"1px solid #e5e7eb",position:"relative",background:C&&C.date.toDateString()===b.toDateString()&&C.hour===e.hour&&C.minute===e.minute?"rgba(88, 132, 253, 0.2)":r?"rgba(5, 150, 105, 0.02)":"#ffffff",transition:"all 0.2s ease",userSelect:"none",cursor:z?"copy":"default"}},`main-${e.hour}-${e.minute}`)}),c.map(e=>{let t=new Date(e.start_datetime),r=new Date(e.end_datetime);if(t.toDateString()!==b.toDateString())return null;let s=60*t.getHours()+t.getMinutes(),o=60*r.getHours()+r.getMinutes();return(0,i.jsxs)("div",{style:{position:"absolute",top:`${100+s/15*40}px`,left:"4px",right:"4px",height:`${(o-s)/15*40}px`,background:e.color,color:"#ffffff",borderRadius:"4px",padding:"4px 8px",fontSize:"0.75rem",fontWeight:"500",overflow:"hidden",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.2)",zIndex:10},children:[i.jsx("div",{style:{fontWeight:"600"},children:e.title}),e.description&&i.jsx("div",{style:{fontSize:"0.7rem",opacity:.9,marginTop:"2px"},children:e.description})]},e.id)})]})]})})]})})(),k&&i.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:(0,i.jsxs)("div",{style:{background:"#ffffff",borderRadius:"12px",padding:"2rem",width:"90%",maxWidth:"500px",maxHeight:"90vh",overflow:"auto"},children:[i.jsx("h2",{style:{margin:"0 0 1.5rem 0",fontSize:"1.5rem",fontWeight:"600"},children:"Create New Task"}),(0,i.jsxs)("form",{onSubmit:e=>{e.preventDefault(),W()},children:[(0,i.jsxs)("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Task Title *"}),i.jsx("input",{type:"text",required:!0,style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"1rem"},placeholder:"Enter task title",value:I.title,onChange:e=>q({...I,title:e.target.value})})]}),(0,i.jsxs)("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Description"}),i.jsx("textarea",{style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"1rem",minHeight:"80px"},placeholder:"Enter task description",value:I.description,onChange:e=>q({...I,description:e.target.value})})]}),(0,i.jsxs)("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Priority"}),(0,i.jsxs)("select",{style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"1rem"},value:I.priority,onChange:e=>q({...I,priority:e.target.value}),children:[i.jsx("option",{value:"low",children:"Low"}),i.jsx("option",{value:"medium",children:"Medium"}),i.jsx("option",{value:"high",children:"High"})]})]}),(0,i.jsxs)("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Start Date & Time"}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[i.jsx("input",{type:"date",style:{padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"1rem"},value:I.start_date,onChange:e=>q({...I,start_date:e.target.value})}),i.jsx("input",{type:"time",style:{padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"1rem"},value:I.start_time,onChange:e=>q({...I,start_time:e.target.value})})]})]}),(0,i.jsxs)("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Due Date & Time"}),(0,i.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"0.5rem"},children:[i.jsx("input",{type:"date",style:{padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"1rem"},value:I.due_date,onChange:e=>q({...I,due_date:e.target.value})}),i.jsx("input",{type:"time",style:{padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"1rem"},value:I.due_time,onChange:e=>q({...I,due_time:e.target.value})})]})]}),(0,i.jsxs)("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Duration (minutes)"}),i.jsx("input",{type:"number",min:"5",step:"5",style:{width:"100%",padding:"0.75rem",border:"1px solid #d1d5db",borderRadius:"8px",fontSize:"1rem"},placeholder:"30",value:I.estimated_duration,onChange:e=>q({...I,estimated_duration:parseInt(e.target.value)||30})}),i.jsx("small",{style:{color:"#6b7280",fontSize:"0.875rem",marginTop:"0.25rem",display:"block"},children:"Estimated time to complete this task"})]}),(0,i.jsxs)("div",{style:{marginBottom:"1rem"},children:[i.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500"},children:"Color"}),i.jsx("div",{style:{display:"flex",gap:"0.5rem",flexWrap:"wrap"},children:["#FFB333","#F87239","#10b981","#5884FD","#C483D9","#ef4444"].map(e=>i.jsx("button",{type:"button",onClick:()=>q({...I,color:e}),style:{width:"32px",height:"32px",borderRadius:"50%",background:e,border:I.color===e?"3px solid #1a1a1a":"2px solid #e5e7eb",cursor:"pointer",transition:"all 0.2s ease"}},e))})]}),(0,i.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[i.jsx("button",{type:"button",onClick:()=>D(!1),style:{padding:"0.75rem 1.5rem",background:"#f3f4f6",color:"#374151",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"500",cursor:"pointer"},children:"Cancel"}),i.jsx("button",{type:"submit",style:{padding:"0.75rem 1.5rem",background:"#FFB333",color:"#ffffff",border:"none",borderRadius:"8px",fontSize:"1rem",fontWeight:"500",cursor:"pointer"},children:"Create Task"})]})]})]})})]}):null}},8209:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>a,__esModule:()=>o,default:()=>d});var i=r(5153);let s=(0,i.createProxy)(String.raw`/Users/swumpyaesone/Documents/project_management/hostinger_deployment_v2/src/app/my-personal/page.tsx`),{__esModule:o,$$typeof:a}=s,n=s.default,d=n},3881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var i=r(8531);let s=e=>{let t=(0,i.fillMetadataSegment)(".",e.params,"favicon.ico");return[{type:"image/x-icon",sizes:"16x16",url:t+""}]}}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[3271,3913,1323,1336,4937],()=>r(5205));module.exports=i})();