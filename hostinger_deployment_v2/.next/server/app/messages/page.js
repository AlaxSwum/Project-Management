(()=>{var e={};e.id=4750,e.ids=[4750],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},1017:e=>{"use strict";e.exports=require("path")},5477:e=>{"use strict";e.exports=require("punycode")},2781:e=>{"use strict";e.exports=require("stream")},7310:e=>{"use strict";e.exports=require("url")},9796:e=>{"use strict";e.exports=require("zlib")},2035:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=r(7096),a=r(6132),n=r(7284),i=r.n(n),o=r(2564),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["messages",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,5458)),"/Users/swumpyaesone/Documents/project_management/hostinger_deployment_v2/src/app/messages/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,6188)),"/Users/swumpyaesone/Documents/project_management/hostinger_deployment_v2/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9291,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/swumpyaesone/Documents/project_management/hostinger_deployment_v2/src/app/messages/page.tsx"],p="/messages/page",m={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/messages/page",pathname:"/messages",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8746:(e,t,r)=>{Promise.resolve().then(r.bind(r,3746))},3746:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>x});var s=r(3854),a=r(4218),n=r(1018),i=r(6837),o=r(2132),l=r(8998),d=r(2432),c=r(8604),p=r(1888),m=r(8930),u=r(6835);function g({name:e,avatarUrl:t,size:r=40}){let a=(e||"?").split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2),n=["#5884FD","#C483D9","#FFB333","#10b981","#F87239","#6366f1","#ec4899"],i=(e||"").split("").reduce((e,t)=>e+t.charCodeAt(0),0)%n.length;return t?s.jsx("img",{src:t,alt:e,style:{width:`${r}px`,height:`${r}px`,borderRadius:"50%",objectFit:"cover",flexShrink:0}}):s.jsx("div",{style:{width:`${r}px`,height:`${r}px`,borderRadius:"50%",background:n[i],display:"flex",alignItems:"center",justifyContent:"center",color:"#FFFFFF",fontSize:`${.38*r}px`,fontWeight:600,flexShrink:0,letterSpacing:"0.02em"},children:a})}function f(){let{user:e,isAuthenticated:t,isLoading:r}=(0,i.useAuth)(),f=(0,n.useRouter)(),x=(0,n.useSearchParams)(),[h,_]=(0,a.useState)([]),[y,v]=(0,a.useState)(null),[b,w]=(0,a.useState)([]),[j,S]=(0,a.useState)(""),[k,C]=(0,a.useState)(!0),[F,D]=(0,a.useState)(!1),[q,I]=(0,a.useState)(""),[E,z]=(0,a.useState)(!1),[R,T]=(0,a.useState)([]),[L,P]=(0,a.useState)(""),W=(0,a.useRef)(null);(0,a.useEffect)(()=>{if(!r){if(!t){f.push("/login");return}Z(),U()}},[t,r,f]),(0,a.useEffect)(()=>{let t=x?.get("user");if(t&&e?.id&&h.length>=0&&!k){let r=parseInt(t);if(isNaN(r))return;let s=h.find(e=>e.other_participants?.some(e=>e.user_id===r));s?v(s.conversation_id):r!==e.id&&A(r)}},[x,h,e,k]),(0,a.useEffect)(()=>{if(!y)return;B(y);let t=o.supabase.channel(`messages-${y}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"messages",filter:`conversation_id=eq.${y}`},async t=>{let r=t.new;if(r.sender_id===e?.id)return;let{data:s}=await o.supabase.from("auth_user").select("name, avatar_url").eq("id",r.sender_id).single();w(e=>[...e,{...r,sender_name:s?.name||"User",sender_avatar_url:s?.avatar_url,deleted_by_user_ids:r.deleted_by_user_ids||[]}])}).subscribe();return()=>{o.supabase.removeChannel(t)}},[y]),(0,a.useEffect)(()=>{if(!e?.id)return;let t=o.supabase.channel("messages-global-realtime").on("postgres_changes",{event:"INSERT",schema:"public",table:"messages"},t=>{let r=t.new;r.sender_id!==e?.id&&Z()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"conversations"},()=>{Z()}).subscribe();return()=>{o.supabase.removeChannel(t)}},[e?.id]),(0,a.useEffect)(()=>{W.current?.scrollIntoView({behavior:"smooth"})},[b]);let U=async()=>{try{let{data:e}=await o.supabase.from("auth_user").select("id, name, email, avatar_url").eq("is_active",!0).order("name");T(e||[])}catch(e){console.error("Error fetching team members:",e)}},A=async t=>{if(e?.id)try{let{data:r,error:s}=await o.supabase.rpc("get_or_create_direct_conversation",{user1_id:e.id,user2_id:t});if(s){console.error("Error creating conversation via RPC:",s),await N(t);return}r&&(v(r),Z())}catch(e){console.error("Error creating conversation:",e),await N(t)}},N=async t=>{if(e?.id)try{let{data:r}=await o.supabase.from("conversation_participants").select("conversation_id").eq("user_id",e.id);if(r&&r.length>0){let e=r.map(e=>e.conversation_id),{data:s}=await o.supabase.from("conversation_participants").select("conversation_id").eq("user_id",t).in("conversation_id",e);if(s&&s.length>0)for(let e of s){let{data:t}=await o.supabase.from("conversations").select("id, conversation_type").eq("id",e.conversation_id).eq("conversation_type","direct").single();if(t){v(t.id),Z();return}}}let{data:s,error:a}=await o.supabase.from("conversations").insert([{conversation_type:"direct",last_message_at:new Date().toISOString()}]).select().single();if(a||!s){console.error("Error creating conversation:",a),P("Failed to create conversation. The messages table might not be set up yet.");return}await o.supabase.from("conversation_participants").insert([{conversation_id:s.id,user_id:e.id},{conversation_id:s.id,user_id:t}]),v(s.id),Z()}catch(e){console.error("Error creating conversation manually:",e),P("Failed to create conversation.")}},Z=async()=>{if(e?.id){C(!0);try{let{data:t,error:r}=await o.supabase.from("conversation_participants").select("conversation_id, conversations(id, conversation_type, group_name, last_message_at)").eq("user_id",e.id);if(r){console.error("Error fetching conversation participants:",r),P("Messages feature is not available. The required database tables may not be set up yet."),_([]),C(!1);return}if(!t||0===t.length){_([]),C(!1);return}let s=await Promise.all(t.map(async t=>{let r=t.conversations;if(!r)return null;let{data:s}=await o.supabase.from("conversation_participants").select("user_id, auth_user(id, name, email, avatar_url)").eq("conversation_id",r.id).neq("user_id",e.id),{count:a}=await o.supabase.from("messages").select("*",{count:"exact",head:!0}).eq("conversation_id",r.id).eq("is_read",!1).neq("sender_id",e.id),{data:n}=await o.supabase.from("messages").select("message_text, created_at, sender_id").eq("conversation_id",r.id).order("created_at",{ascending:!1}).limit(1),i=(s||[]).map(e=>({user_id:e.auth_user?.id||e.user_id,name:e.auth_user?.name||"Unknown",email:e.auth_user?.email||"",avatar_url:e.auth_user?.avatar_url}));return{conversation_id:r.id,conversation_type:r.conversation_type,group_name:r.group_name,last_message_at:r.last_message_at,unread_count:a||0,last_message:n?.[0]||null,other_participants:i}})),a=s.filter(e=>null!==e).sort((e,t)=>new Date(t.last_message_at).getTime()-new Date(e.last_message_at).getTime());_(a),P("")}catch(e){console.error("Error fetching conversations:",e),P("Failed to load conversations."),_([])}finally{C(!1)}}},B=async t=>{if(e?.id){D(!0);try{let{data:r,error:s}=await o.supabase.from("messages").select(`
          id,
          conversation_id,
          sender_id,
          message_text,
          created_at,
          is_deleted,
          deleted_for_everyone,
          deleted_by_user_ids
        `).eq("conversation_id",t).order("created_at",{ascending:!0});if(s){console.error("Error fetching messages:",s),w([]),D(!1);return}if(r){let s=await Promise.all(r.map(async e=>{let{data:t}=await o.supabase.from("auth_user").select("name, avatar_url").eq("id",e.sender_id).single();return{...e,sender_name:t?.name||"User",sender_avatar_url:t?.avatar_url,deleted_by_user_ids:e.deleted_by_user_ids||[]}}));w(s),await o.supabase.from("messages").update({is_read:!0}).eq("conversation_id",t).eq("is_read",!1).neq("sender_id",e.id)}}catch(e){console.error("Error fetching messages:",e)}finally{D(!1)}}},M=async()=>{if(!j.trim()||!y||!e?.id)return;let t=j.trim();S("");let r={id:Date.now(),conversation_id:y,sender_id:e.id,sender_name:e.name||"You",message_text:t,created_at:new Date().toISOString(),is_deleted:!1,deleted_for_everyone:!1,deleted_by_user_ids:[]};w(e=>[...e,r]);try{let{error:r}=await o.supabase.rpc("send_message",{conversation_id_param:y,sender_id_param:e.id,message_text_param:t});if(r){let{error:r}=await o.supabase.from("messages").insert([{conversation_id:y,sender_id:e.id,message_text:t,created_at:new Date().toISOString(),is_read:!1,is_deleted:!1,deleted_for_everyone:!1,deleted_by_user_ids:[]}]);if(r){console.error("Error sending message:",r),B(y);return}}await o.supabase.from("conversations").update({last_message_at:new Date().toISOString()}).eq("id",y),setTimeout(()=>B(y),500)}catch(e){console.error("Error sending message:",e),B(y)}},O=async(t,r)=>{if(e?.id)try{if(r)await o.supabase.from("messages").update({deleted_for_everyone:!0,is_deleted:!0}).eq("id",t);else{let{data:r}=await o.supabase.from("messages").select("deleted_by_user_ids").eq("id",t).single(),s=r?.deleted_by_user_ids||[];await o.supabase.from("messages").update({deleted_by_user_ids:[...s,e.id]}).eq("id",t)}y&&B(y)}catch(e){console.error("Error deleting message:",e)}},$=async()=>{if(y&&e?.id&&confirm("Are you sure you want to delete this entire conversation? This cannot be undone."))try{await o.supabase.from("messages").delete().eq("conversation_id",y),await o.supabase.from("conversation_participants").delete().eq("conversation_id",y),await o.supabase.from("conversations").delete().eq("id",y),v(null),w([]),Z()}catch(e){console.error("Error deleting conversation:",e),alert("Failed to delete conversation")}},H=e=>{let t=new Date(e),r=new Date,s=(r.getTime()-t.getTime())/36e5;return s<1?"Just now":s<24?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):s<48?"Yesterday":t.toLocaleDateString()},G=h.find(e=>e.conversation_id===y),Y=h.filter(e=>{if(!q)return!0;let t="group"===e.conversation_type?e.group_name:e.other_participants?.[0]?.name;return t?.toLowerCase().includes(q.toLowerCase())}),K=R.filter(t=>t.id!==e?.id&&(!q||t.name?.toLowerCase().includes(q.toLowerCase())||t.email?.toLowerCase().includes(q.toLowerCase())));return r?s.jsx("div",{style:{padding:"2rem",background:"#F5F5ED",flex:1,display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:s.jsx("div",{style:{width:"32px",height:"32px",border:"3px solid #C483D9",borderTop:"3px solid #5884FD",borderRadius:"50%",animation:"spin 1s linear infinite"}})}):t?(0,s.jsxs)(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
          .msg-conv-item:hover {
            background: #f0f0e8 !important;
          }
          .msg-send-btn:hover:not(:disabled) {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(88, 132, 253, 0.4);
          }
          .msg-bubble-delete:hover {
            opacity: 1 !important;
            background: #F87239 !important;
            color: #fff !important;
          }
          .msg-new-chat-item:hover {
            background: #f0f0e8 !important;
          }
        `}}),(0,s.jsxs)("div",{style:{background:"#F5F5ED",minHeight:"100vh",display:"flex",flexDirection:"column"},children:[s.jsx("div",{style:{padding:"2rem 2rem 0 2rem"},children:(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"1.5rem"},children:[(0,s.jsxs)("div",{children:[s.jsx("h1",{style:{fontSize:"2.5rem",fontWeight:"300",margin:"0",color:"#1a1a1a",letterSpacing:"-0.02em"},children:"Messages"}),s.jsx("p",{style:{fontSize:"1.1rem",color:"#666666",margin:"0.5rem 0 0 0",lineHeight:"1.5"},children:"Chat with your team members"})]}),(0,s.jsxs)("button",{onClick:()=>z(!0),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.75rem 1.5rem",background:"#5884FD",color:"#ffffff",border:"none",borderRadius:"12px",fontSize:"0.9rem",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 4px 12px rgba(88, 132, 253, 0.3)"},children:[s.jsx(l.Z,{style:{width:"18px",height:"18px"}}),"New Chat"]})]})}),L&&s.jsx("div",{style:{margin:"0 2rem 1rem 2rem",background:"#ffffff",border:"1px solid #F87239",borderRadius:"12px",padding:"1rem",color:"#F87239",fontWeight:"500",boxShadow:"0 2px 8px rgba(248, 114, 57, 0.1)"},children:L}),(0,s.jsxs)("div",{style:{flex:1,margin:"0 2rem 2rem 2rem",background:"#ffffff",border:"1px solid #e8e8e8",borderRadius:"16px",overflow:"hidden",boxShadow:"0 2px 16px rgba(0, 0, 0, 0.04)",display:"flex",minHeight:"calc(100vh - 200px)"},children:[(0,s.jsxs)("div",{style:{width:"340px",borderRight:"1px solid #e8e8e8",display:"flex",flexDirection:"column",background:"#fafaf5"},children:[s.jsx("div",{style:{padding:"1rem",borderBottom:"1px solid #e8e8e8"},children:(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#f0f0e8",borderRadius:"10px",padding:"0.6rem 0.75rem"},children:[s.jsx(d.Z,{style:{width:"18px",height:"18px",color:"#999999",flexShrink:0}}),s.jsx("input",{type:"text",placeholder:"Search conversations...",value:q,onChange:e=>I(e.target.value),style:{flex:1,border:"none",background:"none",outline:"none",fontSize:"0.9rem",color:"#1a1a1a"}})]})}),s.jsx("div",{style:{flex:1,overflowY:"auto"},children:k?(0,s.jsxs)("div",{style:{padding:"2rem",textAlign:"center",color:"#999999"},children:[s.jsx("div",{style:{width:"24px",height:"24px",border:"2px solid #e0e0e0",borderTop:"2px solid #5884FD",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 0.5rem"}}),"Loading conversations..."]}):0===Y.length?(0,s.jsxs)("div",{style:{padding:"2rem",textAlign:"center",color:"#999999",fontSize:"0.9rem"},children:[s.jsx(c.Z,{style:{width:"40px",height:"40px",margin:"0 auto 0.75rem",color:"#cccccc"}}),s.jsx("p",{style:{margin:0},children:"No conversations yet"}),s.jsx("p",{style:{margin:"0.5rem 0 0 0",fontSize:"0.85rem"},children:"Start a new chat to begin messaging"})]}):Y.map(e=>{let t=y===e.conversation_id,r="group"===e.conversation_type?e.group_name||"Group Chat":e.other_participants?.[0]?.name||"Unknown",a="group"===e.conversation_type?void 0:e.other_participants?.[0]?.avatar_url,n=e.last_message?.message_text||"No messages yet";return(0,s.jsxs)("div",{className:"msg-conv-item",onClick:()=>v(e.conversation_id),style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.875rem 1rem",cursor:"pointer",transition:"background 0.15s",background:t?"#e8e8e0":"transparent",borderBottom:"1px solid #f0f0e8",borderLeft:t?"3px solid #5884FD":"3px solid transparent"},children:[s.jsx(g,{name:r,avatarUrl:a,size:44}),(0,s.jsxs)("div",{style:{flex:1,minWidth:0},children:[(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.2rem"},children:[s.jsx("span",{style:{fontWeight:e.unread_count>0?600:500,color:"#1a1a1a",fontSize:"0.95rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:r}),s.jsx("span",{style:{fontSize:"0.75rem",color:"#999999",flexShrink:0,marginLeft:"0.5rem"},children:e.last_message_at?H(e.last_message_at):""})]}),(0,s.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("span",{style:{fontSize:"0.85rem",color:"#888888",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",maxWidth:"200px"},children:n}),e.unread_count>0&&s.jsx("span",{style:{background:"#5884FD",color:"#fff",fontSize:"0.7rem",fontWeight:600,borderRadius:"50%",width:"20px",height:"20px",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,marginLeft:"0.5rem"},children:e.unread_count>9?"9+":e.unread_count})]})]})]},e.conversation_id)})})]}),s.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",background:"#ffffff"},children:y&&G?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{style:{padding:"1rem 1.5rem",borderBottom:"1px solid #e8e8e8",display:"flex",alignItems:"center",justifyContent:"space-between",background:"#fafaf5"},children:[(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:[s.jsx(g,{name:("group"===G.conversation_type?G.group_name:G.other_participants?.[0]?.name)||"Unknown",avatarUrl:"group"===G.conversation_type?void 0:G.other_participants?.[0]?.avatar_url,size:40}),(0,s.jsxs)("div",{children:[s.jsx("div",{style:{fontSize:"1rem",fontWeight:600,color:"#1a1a1a"},children:"group"===G.conversation_type?G.group_name:G.other_participants?.[0]?.name||"Unknown"}),s.jsx("div",{style:{fontSize:"0.8rem",color:"#10b981"},children:"Online"})]})]}),(0,s.jsxs)("button",{onClick:$,style:{display:"flex",alignItems:"center",gap:"0.4rem",padding:"0.5rem 0.875rem",background:"rgba(248, 114, 57, 0.08)",border:"1px solid rgba(248, 114, 57, 0.2)",borderRadius:"8px",color:"#F87239",cursor:"pointer",fontSize:"0.8rem",fontWeight:500,transition:"all 0.2s"},onMouseEnter:e=>{e.currentTarget.style.background="#F87239",e.currentTarget.style.color="#fff"},onMouseLeave:e=>{e.currentTarget.style.background="rgba(248, 114, 57, 0.08)",e.currentTarget.style.color="#F87239"},children:[s.jsx(p.Z,{style:{width:"14px",height:"14px"}}),"Delete Chat"]})]}),(0,s.jsxs)("div",{style:{flex:1,overflowY:"auto",padding:"1.5rem",display:"flex",flexDirection:"column",gap:"0.75rem",background:"#fafaf5"},children:[F?s.jsx("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx("div",{style:{width:"28px",height:"28px",border:"2px solid #e0e0e0",borderTop:"2px solid #5884FD",borderRadius:"50%",animation:"spin 1s linear infinite"}})}):0===b.length?(0,s.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"0.5rem",color:"#999999"},children:[s.jsx(c.Z,{style:{width:"48px",height:"48px",color:"#cccccc"}}),s.jsx("p",{style:{fontSize:"1rem",fontWeight:500,color:"#666666"},children:"No messages yet"}),s.jsx("p",{style:{fontSize:"0.85rem"},children:"Send a message to start the conversation"})]}):b.map(t=>{let r=t.sender_id===e?.id,a=t.deleted_by_user_ids?.includes(e?.id||0),n=t.deleted_for_everyone||a;return n?null:(0,s.jsxs)("div",{style:{display:"flex",justifyContent:r?"flex-end":"flex-start",alignItems:"flex-start",gap:"0.5rem"},children:[!r&&s.jsx(g,{name:t.sender_name,avatarUrl:t.sender_avatar_url,size:32}),(0,s.jsxs)("div",{style:{maxWidth:"60%",display:"flex",flexDirection:"column",gap:"0.15rem"},children:[!r&&(0,s.jsxs)("span",{style:{fontSize:"0.75rem",color:"#999999",marginLeft:"0.5rem"},children:[t.sender_name," \xb7 ",new Date(t.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]}),(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.35rem"},children:[s.jsx("div",{style:{padding:"0.75rem 1rem",background:r?"#5884FD":"#f0f0e8",color:r?"#FFFFFF":"#1a1a1a",borderRadius:r?"16px 16px 4px 16px":"16px 16px 16px 4px",fontSize:"0.9rem",lineHeight:1.5,flex:1,wordBreak:"break-word"},children:t.message_text}),s.jsx("button",{className:"msg-bubble-delete",onClick:()=>{confirm(`Delete this message ${r?"for everyone?":"for you?"}`)&&O(t.id,r)},style:{width:"22px",height:"22px",background:"transparent",border:"none",borderRadius:"50%",color:"#cccccc",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,opacity:.5,transition:"all 0.2s"},children:s.jsx(p.Z,{style:{width:"12px",height:"12px"}})})]}),r&&(0,s.jsxs)("span",{style:{fontSize:"0.75rem",color:"#999999",textAlign:"right",marginRight:"0.5rem"},children:[new Date(t.created_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})," \xb7 You"]})]})]},t.id)}),s.jsx("div",{ref:W})]}),s.jsx("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid #e8e8e8",background:"#ffffff"},children:(0,s.jsxs)("div",{style:{display:"flex",gap:"0.75rem",alignItems:"center"},children:[s.jsx("div",{style:{flex:1,background:"#f0f0e8",borderRadius:"24px",padding:"0.75rem 1.25rem",display:"flex",alignItems:"center"},children:s.jsx("input",{type:"text",value:j,onChange:e=>S(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),M())},placeholder:"Type a message...",style:{flex:1,background:"none",border:"none",color:"#1a1a1a",fontSize:"0.9rem",outline:"none"}})}),s.jsx("button",{className:"msg-send-btn",onClick:M,disabled:!j.trim(),style:{width:"42px",height:"42px",background:j.trim()?"#5884FD":"#e0e0e0",border:"none",borderRadius:"50%",color:"#FFFFFF",cursor:j.trim()?"pointer":"not-allowed",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,transition:"all 0.2s"},children:s.jsx(m.Z,{style:{width:"18px",height:"18px"}})})]})})]}):(0,s.jsxs)("div",{style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",gap:"1rem"},children:[s.jsx("div",{style:{width:"80px",height:"80px",background:"rgba(88, 132, 253, 0.1)",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(c.Z,{style:{width:"40px",height:"40px",color:"#5884FD"}})}),(0,s.jsxs)("div",{style:{textAlign:"center"},children:[s.jsx("h3",{style:{fontSize:"1.25rem",fontWeight:600,color:"#1a1a1a",marginBottom:"0.5rem"},children:"Select a conversation"}),s.jsx("p",{style:{color:"#888888",fontSize:"0.9rem"},children:"Choose a chat from the sidebar or start a new conversation"})]})]})})]})]}),E&&s.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.4)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:()=>z(!1),children:(0,s.jsxs)("div",{style:{background:"#ffffff",borderRadius:"16px",width:"420px",maxHeight:"70vh",boxShadow:"0 20px 60px rgba(0,0,0,0.15)",display:"flex",flexDirection:"column",overflow:"hidden"},onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{style:{padding:"1.25rem 1.5rem",borderBottom:"1px solid #e8e8e8",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[s.jsx("h3",{style:{margin:0,fontSize:"1.1rem",fontWeight:600,color:"#1a1a1a"},children:"New Conversation"}),s.jsx("button",{onClick:()=>z(!1),style:{background:"none",border:"none",cursor:"pointer",color:"#999999",padding:"0.25rem"},children:s.jsx(u.Z,{style:{width:"20px",height:"20px"}})})]}),s.jsx("div",{style:{padding:"0.75rem 1.5rem",borderBottom:"1px solid #f0f0e8"},children:(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",background:"#f0f0e8",borderRadius:"10px",padding:"0.5rem 0.75rem"},children:[s.jsx(d.Z,{style:{width:"16px",height:"16px",color:"#999999"}}),s.jsx("input",{type:"text",placeholder:"Search team members...",value:q,onChange:e=>I(e.target.value),style:{flex:1,border:"none",background:"none",outline:"none",fontSize:"0.9rem",color:"#1a1a1a"}})]})}),s.jsx("div",{style:{flex:1,overflowY:"auto",maxHeight:"50vh"},children:0===K.length?s.jsx("div",{style:{padding:"2rem",textAlign:"center",color:"#999999",fontSize:"0.9rem"},children:"No team members found"}):K.map(e=>(0,s.jsxs)("div",{className:"msg-new-chat-item",onClick:()=>{z(!1),I(""),A(e.id)},style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.75rem 1.5rem",cursor:"pointer",transition:"background 0.15s",borderBottom:"1px solid #f5f5f0"},children:[s.jsx(g,{name:e.name,avatarUrl:e.avatar_url,size:38}),(0,s.jsxs)("div",{children:[s.jsx("div",{style:{fontSize:"0.95rem",fontWeight:500,color:"#1a1a1a"},children:e.name}),s.jsx("div",{style:{fontSize:"0.8rem",color:"#999999"},children:e.email})]})]},e.id))})]})})]}):null}function x(){return s.jsx(a.Suspense,{fallback:s.jsx("div",{style:{padding:"2rem",background:"#F5F5ED",flex:1,display:"flex",alignItems:"center",justifyContent:"center",minHeight:"100vh"},children:s.jsx("div",{style:{width:"32px",height:"32px",border:"3px solid #C483D9",borderTop:"3px solid #5884FD",borderRadius:"50%",animation:"spin 1s linear infinite"}})}),children:s.jsx(f,{})})}},5458:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>n,default:()=>l});var s=r(5153);let a=(0,s.createProxy)(String.raw`/Users/swumpyaesone/Documents/project_management/hostinger_deployment_v2/src/app/messages/page.tsx`),{__esModule:n,$$typeof:i}=a,o=a.default,l=o},3881:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(8531);let a=e=>{let t=(0,s.fillMetadataSegment)(".",e.params,"favicon.ico");return[{type:"image/x-icon",sizes:"16x16",url:t+""}]}},2432:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(4218);let a=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"}))}),n=a},8930:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var s=r(4218);let a=s.forwardRef(function({title:e,titleId:t,...r},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"}))}),n=a}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[3271,3913,1323,1336],()=>r(2035));module.exports=s})();